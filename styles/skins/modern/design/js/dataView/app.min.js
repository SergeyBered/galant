!function(e){var t={};function i(r){if(t[r])return t[r].exports;var n=t[r]={exports:{},id:r,loaded:!1};return e[r].call(n.exports,n,n.exports,i),n.loaded=!0,n.exports}i.m=e,i.c=t,i.p="",i(0)}([function(e,t,i){var r=i(1),n=Backbone.Marionette.Application.extend({opt:{},layouts:null,data:null,config:null,userSettings:null,control:null,controlViews:[],level0view:null,colCount:0,debug:!1,dragAllowed:!1,head:"umiTableHeader.twig",row:"umiDataTableRow.twig",dataProtocol:"json",usedColumns:[],columnsMenu:{},lastSelect:-1,expanded:[],drugMode:!1,hView:null,draggableItem:null,dropIndicator:null,dropValidator:null,perPageLimit:10,pageLimits:[10,20,50,100],configUrl:"",childTemplate:{},tableHeaderView:null,initialize:function(){if(void 0!==this.options.container&&this.addRegions({umiMain:this.options.container}),this.options.debug&&(this.debug=!0),this.head=this.options.head||this.head,this.row=this.options.row||this.row,this.dragAllowed=this.options.dragAllowed||!1,this.dropValidator=this.options.dropValidator||null,this.perPageLimit=this.options.perPageLimit||null,this.configUrl=this.options.configUrl||"",this.pageLimits=this.options.pageLimits||[10,20,50,100],this.dataProtocol=this.options.dataProtocol||"json",window.dc_application=this,r.extendFunction("trans",function(e){return"function"==typeof getLabel&&(e=getLabel(e)),e}),r.extendFunction("isDefined",function(e,t){return _.has(e,t)}),r.extendFunction("imageField",function(e){if(_.isNull(e))return"";var t=e,i=t.substring(0,t.lastIndexOf(".")),r="",n="",a=t.substring(t.lastIndexOf(".")+1),s="";("string"==typeof t&&(r=(n=t.split(/\//))[n.length-1]),r)&&(s='<img alt="" style="width:13px;height:13px;cursor: pointer;" src="/styles/skins/modern/design/img/image.png" onmouseover="dc_application.showPreviewImage(event, \''+("/autothumbs.php?img="+i+"_sl_180_120."+a)+"')\" />",s+='&nbsp;&nbsp;<span title="'+t+'">'+r+"</span>");return s}),r.extendFunction("fileField",function(e){if(_.isNull(e))return"";var t=e,i="",r="";return"string"==typeof t&&(i=t.split(/\//),r='<span title="'+t+'">'+i[i.length-1]+"</span>"),r}),r.extendFunction("multipleImageField",function(e){if(_.isNull(e))return"";var t="";return $.each(e,function(e,i){var r=i.src.substring(0,i.src.lastIndexOf(".")),n=i.src.substring(i.src.lastIndexOf(".")+1);t+='<img alt="" style="width:13px;height:13px;cursor: pointer;" src="/styles/skins/modern/design/img/image.png" onmouseover="dc_application.showPreviewImage(event, \''+("/autothumbs.php?img="+r+"_sl_180_120."+n)+"')\" />&nbsp;"}),t}),r.extendFunction("multipleFileField",function(e){if(_.isNull(e))return"";var t="";return $.each(e,function(e,i){t+='<img alt="" style="width:13px;height:13px;cursor: pointer;" src="/styles/skins/modern/design/img/ico_file.gif" title="'+i.src+'"/>&nbsp;'}),t}),r.extendFunction("textWysiwygField",function(e){return _.isNull(e)||""==e?"":'<img alt="" style="width:13px;height:13px;cursor: pointer;" src="/styles/skins/modern/design/img/ico_file.gif"/>&nbsp;'}),r.extendFunction("relationField",function(e){return _.isNull(e)||""==e?"":(Array.isArray(e)&&(e=e.join(", ")),e)}),r.extendFunction("textSymlinkField",function(e){if(_.isNull(e)||""==e)return"";let t=[];for(let i=0;e[i];i++)t.push(e[i].name);return t=t.join(", ")}),Backbone.Marionette.TemplateCache.prototype.loadTemplate=function(e){return e},Backbone.Marionette.TemplateCache.prototype.compileTemplate=function(e){return i(6)("./"+e).template},Backbone.Marionette.Renderer.render=function(e,t){return i(6)("./"+e)(t)},this.dragAllowed){var e=document.createElement("div");e.className="ti-drop",this.dropIndicator=document.body.appendChild(e)}},onStart:function(){var e=this;this.layouts=i(16),this.layouts=new this.layouts({perPageLimit:this.perPageLimit,pageLimits:this.pageLimits,domainsList:this.options.domainsList||!1}),this.layouts.on("show",function(){e.onLayoutShow.call(e)}),this.getRegion("umiMain").show(this.layouts),this.childTemplate=i(11)},onLayoutShow:function(){var e=this;this.config=i(17),this.config=new this.config({configUrl:this.configUrl,module:this.options.module,param:this.options.controlParam}),this.config.fetch().then(function(){return e.userSettings=i(18),e.userSettings=new e.userSettings,e.userSettings.fetch()}).then(function(){var t=e.config.get("def"),r=e.config.get("fields"),n=e.userSettings.get(e.config.get("column_order_key")),a=t;_.isUndefined(n)||_.isUndefined(n["used-columns"])||(a=n["used-columns"]);var s=[];_.each(a,function(e){e.field in r&&s.push(e)}),_.each(s,function(e){_.extend(e,r[e.field])}),e.usedColumns=s;for(var o=_.pluck(e.usedColumns,"field"),p=_.keys(r),l=0,c=p.length;l<c;l++){var u=r[p[l]],y=_.indexOf(o,u.name)>-1;e.columnsMenu[u.name]={caption:u.title,icon:y?"checked":"undefined",id:0,title:u.title,fieldName:u.name,dataType:0,guideId:0,checked:y,execute:function(t){e.changeUsedColumns.call(e,t)}}}var d=i(19);return e.data=i(20),e.data=new e.data({prefix:e.options.prefix,loadMethod:e.config.get("load_method"),dataProtocol:e.options.dataProtocol,qb:new d({lang:[e.options.lang],domain:[e.options.domain],limit:e.perPageLimit})}),e.data.fetch()}).done(function(){var t=e.data.limit;$(".per_page_limit",$(e.options.container)).each(function(e,i){i.text==t&&$(i).addClass("current")}),e.onDataLoaded.call(e)}),this.vent.on("b:getselected",function(){e.getSel(e.data)}),this.vent.on("b:limitchange",function(t){e.data.qb.setLimit(t),e.data.qb.setPage(0),e.refresh()}),this.vent.on("b:pagechange",function(e,t){var i=t.collection;i.qb.setPage(parseInt(e)-1),i.reset(),t.$el.empty(),i.fetch(i.qb.Parents[0]).done(function(){t.render()})}),this.vent.on("b:orderhange",function(t,i){e.data.qb.setOrder(t,i),e.refresh()}),this.vent.on("data:saveusercolls",function(){var t=$("th[umi-field]",$(e.options.container)),i=e.config.get("column_order_key"),r=[];if(t.length){for(var n=0,a=t.length;n<a;n++){var s=$(t[n]);r.push(s.attr("umi-field")+"["+s.outerWidth()+"px]")}r=r.join("|"),SettingsStore.getInstance().set(i,r,"used-columns")}}),this.vent.on("item:selected",function(t){var i=_.isUndefined(t.model.collection)?{}:t.model.collection.models,r=t.model.cid,n=_.indexOf(i,t.model),a=0,s=0,o=0;if(!_.isUndefined(t.model.collection)&&t.shiftMode&&e.lastSelect>=0&&i[e.lastSelect].selected){if(i=t.model.collection.models,r.length>1)for(a=Math.min(n,e.lastSelect),s=Math.max(n,e.lastSelect),o=a;o<=s;o++)i[o].selected||i[o].select(!0);t.shiftMode=!1}t.model.selected&&(e.lastSelect=n),e.toolbar.redraw(),e.trigger("row_select",t.model),_.isFunction(e.options.onSelect)&&e.options.onSelect.call(e,t.model)}),this.vent.on("domainchange",function(t){e.data.qb.setDomain(t),e.refresh()})},onDataLoaded:function(){var e=this,t=this.config.get("def"),r=new a({fields:this.usedColumns,countFields:t.length});this.colCount=_.keys(r.get("fields")[0]).length;var n=i(21);(n=new n({model:r,el:"#udcControlHeader",template:this.head})).render(),this.tableHeaderView=n,this.vent.on("data:filter",function(t){e.filterData.call(e,t)}),this.vent.on("data:reset_filter",function(){e.resetFilter.call(e)});var s=i(23);(s=new s({collection:this.data,el:"#udcControlBody",template:this.row,fields:this.usedColumns,dragAllowed:this.dragAllowed})).on("udcrow:expand",function(t){e.rowExpanded.call(e,t)}),s.render(),this.level0view=s,$(".overflow-block").on("resize",function(){var e=$(this),t=$(".overflow-block table"),i=$(".overflow-block table .plus");i.length>0&&(e.width()!==t.width()?i.css("width","80px"):i.css("width","100%"))}),n.recalculateAllValueCellsWidth(),this.toolbar=i(25),this.toolbar=new this.toolbar({el:"#udcToolbar",toolbarFunctions:this.options.toolbarFunction,toolbarMenu:this.options.toolbarMenu,showSelectButtons:this.options.showSelectButtons,showResetButtons:this.options.showResetButtons}),this.toolbar.render()},rowExpanded:function(e){var t=this,r=e.model,n=e.$el,a=$("#"+r.cid);if(r.expanded)if(this.expanded.push(r.get("id")),this.expanded=_.uniq(this.expanded),a.length>0)a.show();else{var s=t.getQueryBuilder().clone();s.setParentElements([r.get("id")]);var o=i(20);o=new o({prefix:t.options.prefix,loadMethod:t.config.get("load_method"),dataProtocol:t.options.dataProtocol,qb:s}),$(this.childTemplate({id:r.cid,col_count:this.usedColumns.length+1})).insertAfter(n),o.fetch(r.get("id")).done(function(){r.set("children",o),t.renderChild.call(t,r,e)})}else this.expanded=_.without(this.expanded,r.cid),a.hide()},renderChild:function(e,t){var r=this,n=i(23);(n=new n({collection:e.attributes.children,el:"#ch_"+e.cid,template:this.row,fields:this.usedColumns,dragAllowed:this.dragAllowed,parentView:t})).on("udcrow:expand",function(e){r.dataExpanded.call(r,e)}),n.render(),this.controlViews.push(n)},clearControl:function(e){for(var t=0,i=e.length;t<i;t++){var r=e[t];this.controlViews=_.without(this.controlViews,e[t]),r.remove()}},filterData:function(e){var t;$(".umiDC").remove(),this.clearControl(this.controlViews);var i=this.getQueryBuilder();i.setPage(0);for(var r=0,n=e.length;r<n;r++)t=_.where(this.usedColumns,{name:e[r].field}),e[r].value.length>0?_.indexOf(["date","datetime","image","file","float","int","number","integer","bool","relation","multiple_image","multiple_file"],t[0].type)>-1?i.setPropertyEqual(e[r].field,e[r].value):(t.length,i.setPropertyLike(e[r].field,e[r].value)):i.removeProperty(e[r].field);this.refresh()},resetFilter:function(){this.clearControl(this.controlViews),this.getQueryBuilder().resetPropertyFilter(),this.refresh()},resetFilterAndSort:function(){var e=this.getQueryBuilder(),t=this.getTableHeaderView();e.resetPropertyFilter(),t.resetFilter(),e.resetPropertyOrder(),t.resetOrder(),this.refresh()},getQueryBuilder:function(){return this.data.qb},getToolBar:function(){return this.toolbar},hasSelectedRows:function(){return 0!==this.getSelectedRowsCount()},isOneRowSelected:function(){return 1===this.getSelectedRowsCount()},getSelectedRowsCount:function(){return this.getToolBar().selectedItemsCount},getSelectedIdList:function(){var e=[],t=this;return _.each(t.getSelectedRowList(),function(i){e.push(t.unPackId(i.attributes.id))}),e},getSelectedRowList:function(){return this.getToolBar().selectedItems},getFirstSelectedRow:function(){return this.getSelectedRowList()[0]},getFirstSelectedId:function(){return this.unPackId(this.getFirstSelectedRow().attributes.id)},toggleToolBarButton:function(e,t){var i=this.getToolBar();if(t(this))return i.enableButtons(e);i.disableButtons(e)},getTableHeaderView:function(){return this.tableHeaderView},refresh:function(){var e=this;this.clearControl(this.controlViews),_.each(this.data.models,function(e){e.clear()}),e.data.reset(),e.toolbar.redraw(),this.level0view.$el.empty(),this.data.fetch().done(function(){e.level0view.once("render",function(){var t=e.expanded;if(t.length>0)for(var i=0,r=t.length;i<r;i++)$("span.catalog-toggle-wrapper.ex_"+t[i]).trigger("click")}),e.level0view.render()})},assembleQueryString:function(e){var t,i=e.getQueryString(),r=[];return null!=e.id&&(_.isArray(e.id)?t=e.id:(t=[]).push(e.id),r.push("id="+t.join(","))),null!=e.rel&&(_.isArray(e.rel)?t=e.rel:(t=[]).push(e.rel),r.push("rel="+t.join(","))),r.length&&(i="?"+r.join("&")),_.isUndefined(csrfProtection)||null===csrfProtection||(i+="&csrf="+csrfProtection.getToken()),i+"&r="+Math.random()},runmethod:function(e,t){var i="/admin/"+this.config.get("module")+"/";return this.config.has(e)?i+=this.config.get(e):i+=e,_.isUndefined(t.id)||(i+="/"+t.id+"/"),i+="."+this.options.dataProtocol,_.isUndefined(t.data)?t.data={r:Math.random()}:(void 0!==csrfProtection&&(t.data.csrf=csrfProtection.getToken()),t.data.r=Math.random()),this.confirmeMethod(e).then(function(){return $.ajax({url:i,data:t.data,dataType:"json",method:"POST"})})},confirmeMethod:function(e){var t=$.Deferred(),i="",r="",n="",a=getLabel("js-cancel");switch(e){case"delete_method":null!=Control.HandleItem&&Control.HandleItem.control.flatMode?(i=getLabel("js-del-object-title-short"),r=getLabel("js-del-object-warning")):null!=Control.HandleItem&&Control.HandleItem.control.objectTypesMode?(i=getLabel("js-del-object-type-title-short"),r=getLabel("js-del-object-type-shured")):null==Control.HandleItem?(i=getLabel("js-del-object-title-short"),r=getLabel("js-del-object-warning")):(i=getLabel("js-del-object-title-short"),r=getLabel("js-del-page-warning")),n=getLabel("js-del-do");break;default:return t.resolve()}return r='<div class="confirm">'+r+"</div>",openDialog("",i,{html:r,confirmText:n,cancelButton:!0,cancelText:a,confirmCallback:function(e){return closeDialog(e),t.resolve()},cancelCallback:function(){return t.reject()}}),t.promise()},changeUsedColumns:function(e){for(var t=this.config.get("column_order_key"),i=this.usedColumns,r=[],n=0,a=i.length;n<a;n++)e.checked&&e.fieldName===i[n].field||r.push(i[n].field+"["+(_.isUndefined(i[n].size)?"170px":i[n].size)+"]");e.checked||r.push(e.fieldName+"[170px]"),SettingsStore.getInstance().set(t,r.join("|"),"used-columns"),this.getRegion("umiMain").reset(),this.start(),this.toolbar.bindAllButtonsClick()},showPreviewImage:function(e,t){if(e&&t){var i=e.target?e.target:e.toElement,r=e.pageX?e.pageX:e.clientX,n=e.pageY?e.pageY:e.clientY,a=document.createElement("img");a.setAttribute("src",t),a.src=t,a.className="img-fieled-preview",a.style.position="absolute",a.style.width="180px",a.style.height="120px",a.style.top=n+10+"px",a.style.left=r+10+"px",a.style.border="1px solid #666",document.body.appendChild(a),i.onmouseout=function(){a.parentNode.removeChild(a)}}},unPackId:function(e){if(_.isArray(e))for(var t=0,i=e.length;t<i;t++)e[t]=dc_application.unPackId(e[t]);else _.isString(e)?String(e).indexOf("_")>0&&(e=(e=String(e).split("_"))[e.length-1]):_.isUndefined(e.id)||String(e.id).indexOf("_")>0&&(e.id=String(e.id).split("_"),e.id=e.id[e.id.length-1]);return e},initDroppable:function(e){e=e||"child";var t=this.draggableItem[0],i=this.hView.$el,r=this.dropIndicator,n=this.hView.model.get("id").split("_").length-1,a=$("table.table",$(dc_application.options.container)).offset();if(t){if(t.cid==i.cid)return!1;if(null!==this.dropValidator&&!1===(e=this.dropValidator(this.hView,this.draggableItem,e)))return!1;"after"==e&&(r.style.top=i.position().top+i.height()+a.top+"px",r.style.left=i.position().left+a.left+40*(n-1)+"px",r.style.width=i.width()-40*(n-1)+"px"),"before"==e&&(r.style.top=i.position().top+a.top+r.offsetHeight+"px",r.style.left=i.position().left+a.left+40*(n-1)+"px",r.style.width=i.width()-40*(n-1)+"px"),"child"==e&&(r.style.top=i.position().top+i.height()+a.top+"px",r.style.left=i.position().left+a.left+40*n+"px",r.style.width=i.width()-40*n+"px"),r.style.display="block"}},tryToMove:function(e,t,i){var r=this;if(!t||!i||!r.hView)return!1;var n=t[0].parent;if(null!==this.dropValidator){if(!1===(e=this.dropValidator(this.hView,this.draggableItem,e)))return!1;for(var a=[],s=[],o=[],p=0,l=this.draggableItem.length;p<l;p++)a.push({id:this.unPackId(this.draggableItem[p].model.get("id")),type:this.draggableItem[p].model.get("__type")}),this.draggableItem[p].model.selected=!1,s.push(this.draggableItem[p].model.attributes),o.push(this.draggableItem[p].model);this.runmethod("move_method",{data:{rel:{id:this.unPackId(i.model.get("id")),type:i.model.get("__type")},selected_list:a,mode:e}}).done(function(t){if(!_.isUndefined(t.data)&&!_.isUndefined(t.data.error))return openDialog(t.data.error,getLabel("js-error-header"));var a=_.where(r.controlViews,{collection:i.model.attributes.children});if("child"===e&&a.length>0)(a=a[0]).collection.add(s),a.collection.sync(),a.render();else if("child"===e&&0===a.length)i.model.set("__children",s.length),i.render(),$(".catalog-toggle-wrapper",hi).trigger("click");else{var p=i._parent,l=p.parentView;_.isEmpty(l)?r.refresh():(_.each(p.collection.models,function(e){e&&e.clear()}),p.remove(),$("tr#"+l.model.cid).remove(),r.rowExpanded(l))}if(0!==n.collection.length&&(n.collection.remove(o),0===n.collection.length)){var c=n.$el.closest("tr.umiDC");n.parentView&&(n.parentView.model.set("__children",0),n.parentView.model.set("children",null),n.parentView.model.expanded=!1,n.parentView.render()),n.remove(),c.remove()}})}}}),a=Backbone.Model.extend({});window.umiDataController=n},function(e,t,i){var r;(function(e,n){!function(e){"use strict";e.Templates.registerLoader("ajax",function(t,i,r,n){var a,s,o=i.precompiled,p=this.parsers[i.parser]||this.parser.twig;if("undefined"==typeof XMLHttpRequest)throw new e.Error('Unsupported platform: Unable to do ajax requests because there is no "XMLHTTPRequest" implementation');return(s=new XMLHttpRequest).onreadystatechange=function(){var l=null;4===s.readyState&&(200===s.status||window.cordova&&0==s.status?(e.log.debug("Got template ",s.responseText),l=!0===o?JSON.parse(s.responseText):s.responseText,i.url=t,i.data=l,a=p.call(this,i),"function"==typeof r&&r(a)):"function"==typeof n&&n(s))},s.open("GET",t,!!i.async),s.send(),!!i.async||a})}(a=function(e){"use strict";return e.trace=!1,e.debug=!1,e.cache=!0,e.placeholders={parent:"{{|PARENT|}}"},e.indexOf=function(e,t){if(Array.prototype.hasOwnProperty("indexOf"))return e.indexOf(t);if(null==e)throw new TypeError;var i=Object(e),r=i.length>>>0;if(0===r)return-1;var n=0;if(arguments.length>0&&((n=Number(arguments[1]))!=n?n=0:0!==n&&n!==1/0&&n!==-1/0&&(n=(n>0||-1)*Math.floor(Math.abs(n)))),n>=r)return-1;for(var a=n>=0?n:Math.max(r-Math.abs(n),0);a<r;a++)if(a in i&&i[a]===t)return a;return e==t?0:-1},e.forEach=function(e,t,i){if(Array.prototype.forEach)return e.forEach(t,i);var r,n;if(null==e)throw new TypeError(" this is null or not defined");var a=Object(e),s=a.length>>>0;if("[object Function]"!={}.toString.call(t))throw new TypeError(t+" is not a function");for(i&&(r=i),n=0;n<s;){var o;n in a&&(o=a[n],t.call(r,o,n,a)),n++}},e.merge=function(t,i,r){return e.forEach(Object.keys(i),function(e){(!r||e in t)&&(t[e]=i[e])}),t},e.Error=function(e){this.message=e,this.name="TwigException",this.type="TwigException"},e.Error.prototype.toString=function(){return this.name+": "+this.message},e.log={trace:function(){e.trace&&console&&console.log(Array.prototype.slice.call(arguments))},debug:function(){e.debug&&console&&console.log(Array.prototype.slice.call(arguments))}},"undefined"!=typeof console?void 0!==console.error?e.log.error=function(){console.error.apply(console,arguments)}:void 0!==console.log&&(e.log.error=function(){console.log.apply(console,arguments)}):e.log.error=function(){},e.ChildContext=function(e){var t=function(){};return t.prototype=e,new t},e.token={},e.token.type={output:"output",logic:"logic",comment:"comment",raw:"raw",output_whitespace_pre:"output_whitespace_pre",output_whitespace_post:"output_whitespace_post",output_whitespace_both:"output_whitespace_both",logic_whitespace_pre:"logic_whitespace_pre",logic_whitespace_post:"logic_whitespace_post",logic_whitespace_both:"logic_whitespace_both"},e.token.definitions=[{type:e.token.type.raw,open:"{% raw %}",close:"{% endraw %}"},{type:e.token.type.raw,open:"{% verbatim %}",close:"{% endverbatim %}"},{type:e.token.type.output_whitespace_pre,open:"{{-",close:"}}"},{type:e.token.type.output_whitespace_post,open:"{{",close:"-}}"},{type:e.token.type.output_whitespace_both,open:"{{-",close:"-}}"},{type:e.token.type.logic_whitespace_pre,open:"{%-",close:"%}"},{type:e.token.type.logic_whitespace_post,open:"{%",close:"-%}"},{type:e.token.type.logic_whitespace_both,open:"{%-",close:"-%}"},{type:e.token.type.output,open:"{{",close:"}}"},{type:e.token.type.logic,open:"{%",close:"%}"},{type:e.token.type.comment,open:"{#",close:"#}"}],e.token.strings=['"',"'"],e.token.findStart=function(t){var i,r,n,a,s={position:null,close_position:null,def:null};for(i=0;i<e.token.definitions.length;i++)r=e.token.definitions[i],n=t.indexOf(r.open),a=t.indexOf(r.close),e.log.trace("Twig.token.findStart: ","Searching for ",r.open," found at ",n),n>=0&&r.open.length!==r.close.length&&a<0||(n>=0&&(null===s.position||n<s.position)?(s.position=n,s.def=r,s.close_position=a):n>=0&&null!==s.position&&n===s.position&&(r.open.length>s.def.open.length?(s.position=n,s.def=r,s.close_position=a):r.open.length===s.def.open.length&&(r.close.length,s.def.close.length,a>=0&&a<s.close_position&&(s.position=n,s.def=r,s.close_position=a))));return delete s.close_position,s},e.token.findEnd=function(t,i,r){for(var n,a,s=null,o=!1,p=0,l=null,c=null,u=null,y=null,d=null,h=null;!o;){if(l=null,c=null,!((u=t.indexOf(i.close,p))>=0))throw new e.Error("Unable to find closing bracket '"+i.close+"' opened near template position "+r);if(s=u,o=!0,i.type===e.token.type.comment)break;if(i.type===e.token.type.raw)break;for(a=e.token.strings.length,n=0;n<a;n+=1)(d=t.indexOf(e.token.strings[n],p))>0&&d<u&&(null===l||d<l)&&(l=d,c=e.token.strings[n]);if(null!==l)for(y=l+1,s=null,o=!1;;){if((h=t.indexOf(c,y))<0)throw"Unclosed string in template";if("\\"!==t.substr(h-1,1)){p=h+1;break}y=h+1}}return s},e.tokenize=function(t){for(var i=[],r=0,n=null,a=null;t.length>0;)if(n=e.token.findStart(t),e.log.trace("Twig.tokenize: ","Found token: ",n),null!==n.position){if(n.position>0&&i.push({type:e.token.type.raw,value:t.substring(0,n.position)}),t=t.substr(n.position+n.def.open.length),r+=n.position+n.def.open.length,a=e.token.findEnd(t,n.def,r),e.log.trace("Twig.tokenize: ","Token ends at ",a),i.push({type:n.def.type,value:t.substring(0,a).trim()}),"\n"===t.substr(a+n.def.close.length,1))switch(n.def.type){case"logic_whitespace_pre":case"logic_whitespace_post":case"logic_whitespace_both":case"logic":a+=1}t=t.substr(a+n.def.close.length),r+=a+n.def.close.length}else i.push({type:e.token.type.raw,value:t}),t="";return i},e.compile=function(t){try{for(var i=[],r=[],n=[],a=null,s=null,o=null,p=null,l=null,c=null,u=null,y=null,d=null,h=null,g=null,f=null,m=function(t){e.expression.compile.apply(this,[t]),r.length>0?n.push(t):i.push(t)},v=function(t){if(s=e.logic.compile.apply(this,[t]),h=s.type,g=e.logic.handler[h].open,f=e.logic.handler[h].next,e.log.trace("Twig.compile: ","Compiled logic token to ",s," next is: ",f," open is : ",g),void 0!==g&&!g){if(p=r.pop(),u=e.logic.handler[p.type],e.indexOf(u.next,h)<0)throw new Error(h+" not expected after a "+p.type);p.output=p.output||[],p.output=p.output.concat(n),n=[],d={type:e.token.type.logic,token:p},r.length>0?n.push(d):i.push(d)}void 0!==f&&f.length>0?(e.log.trace("Twig.compile: ","Pushing ",s," to logic stack."),r.length>0&&((p=r.pop()).output=p.output||[],p.output=p.output.concat(n),r.push(p),n=[]),r.push(s)):void 0!==g&&g&&(d={type:e.token.type.logic,token:s},r.length>0?n.push(d):i.push(d))};t.length>0;){switch(a=t.shift(),l=i[i.length-1],c=n[n.length-1],y=t[0],e.log.trace("Compiling token ",a),a.type){case e.token.type.raw:r.length>0?n.push(a):i.push(a);break;case e.token.type.logic:v.call(this,a);break;case e.token.type.comment:break;case e.token.type.output:m.call(this,a);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:switch(a.type!==e.token.type.output_whitespace_post&&a.type!==e.token.type.logic_whitespace_post&&(l&&l.type===e.token.type.raw&&(i.pop(),null===l.value.match(/^\s*$/)&&(l.value=l.value.trim(),i.push(l))),c&&c.type===e.token.type.raw&&(n.pop(),null===c.value.match(/^\s*$/)&&(c.value=c.value.trim(),n.push(c)))),a.type){case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:m.call(this,a);break;case e.token.type.logic_whitespace_pre:case e.token.type.logic_whitespace_post:case e.token.type.logic_whitespace_both:v.call(this,a)}a.type!==e.token.type.output_whitespace_pre&&a.type!==e.token.type.logic_whitespace_pre&&y&&y.type===e.token.type.raw&&(t.shift(),null===y.value.match(/^\s*$/)&&(y.value=y.value.trim(),t.unshift(y)))}e.log.trace("Twig.compile: "," Output: ",i," Logic Stack: ",r," Pending Output: ",n)}if(r.length>0)throw o=r.pop(),new Error("Unable to find an end tag for "+o.type+", expecting one of "+o.next);return i}catch(t){if(e.log.error("Error compiling twig template "+this.id+": "),t.stack?e.log.error(t.stack):e.log.error(t.toString()),this.options.rethrow)throw t}},e.parse=function(t,i){try{var r=[],n=!0,a=this;return e.forEach(t,function(t){switch(e.log.debug("Twig.parse: ","Parsing token: ",t),t.type){case e.token.type.raw:r.push(e.filters.raw(t.value));break;case e.token.type.logic:var s=t.token,o=e.logic.parse.apply(a,[s,i,n]);void 0!==o.chain&&(n=o.chain),void 0!==o.context&&(i=o.context),void 0!==o.output&&r.push(o.output);break;case e.token.type.comment:break;case e.token.type.output_whitespace_pre:case e.token.type.output_whitespace_post:case e.token.type.output_whitespace_both:case e.token.type.output:e.log.debug("Twig.parse: ","Output token: ",t.stack),r.push(e.expression.parse.apply(a,[t.stack,i]))}}),e.output.apply(this,[r])}catch(t){if(e.log.error("Error parsing twig template "+this.id+": "),t.stack?e.log.error(t.stack):e.log.error(t.toString()),this.options.rethrow)throw t;if(e.debug)return t.toString()}},e.prepare=function(t){var i,r;return e.log.debug("Twig.prepare: ","Tokenizing ",t),r=e.tokenize.apply(this,[t]),e.log.debug("Twig.prepare: ","Compiling ",r),i=e.compile.apply(this,[r]),e.log.debug("Twig.prepare: ","Compiled ",i),i},e.output=function(t){if(!this.options.autoescape)return t.join("");var i="html";"string"==typeof this.options.autoescape&&(i=this.options.autoescape);var r=[];return e.forEach(t,function(t){t&&!0!==t.twig_markup&&t.twig_markup!=i&&(t=e.filters.escape(t,[i])),r.push(t)}),e.Markup(r.join(""))},e.Templates={loaders:{},parsers:{},registry:{}},e.validateId=function(t){if("prototype"===t)throw new e.Error(t+" is not a valid twig identifier");if(e.cache&&e.Templates.registry.hasOwnProperty(t))throw new e.Error("There is already a template with the ID "+t);return!0},e.Templates.registerLoader=function(t,i,r){if("function"!=typeof i)throw new e.Error("Unable to add loader for "+t+": Invalid function reference given.");r&&(i=i.bind(r)),this.loaders[t]=i},e.Templates.unRegisterLoader=function(e){this.isRegisteredLoader(e)&&delete this.loaders[e]},e.Templates.isRegisteredLoader=function(e){return this.loaders.hasOwnProperty(e)},e.Templates.registerParser=function(t,i,r){if("function"!=typeof i)throw new e.Error("Unable to add parser for "+t+": Invalid function regerence given.");r&&(i=i.bind(r)),this.parsers[t]=i},e.Templates.unRegisterParser=function(e){this.isRegisteredParser(e)&&delete this.parsers[e]},e.Templates.isRegisteredParser=function(e){return this.parsers.hasOwnProperty(e)},e.Templates.save=function(t){if(void 0===t.id)throw new e.Error("Unable to save template with no id");e.Templates.registry[t.id]=t},e.Templates.load=function(t){return e.Templates.registry.hasOwnProperty(t)?e.Templates.registry[t]:null},e.Templates.loadRemote=function(t,i,r,n){return void 0===i.async&&(i.async=!0),void 0===i.id&&(i.id=t),e.cache&&e.Templates.registry.hasOwnProperty(i.id)?("function"==typeof r&&r(e.Templates.registry[i.id]),e.Templates.registry[i.id]):(i.parser=i.parser||"twig",(this.loaders[i.method]||this.loaders.fs).apply(this,arguments))},e.Template=function(t){var i,r,n,a=t.data,s=t.id,o=t.blocks,p=t.macros||{},l=t.base,c=t.path,u=t.url,y=t.name,d=t.method,h=t.options;this.id=s,this.method=d,this.base=l,this.path=c,this.url=u,this.name=y,this.macros=p,this.options=h,this.reset(o),i="String",r=a,n=Object.prototype.toString.call(r).slice(8,-1),this.tokens=null!=r&&n===i?e.prepare.apply(this,[a]):a,void 0!==s&&e.Templates.save(this)},e.Template.prototype.reset=function(t){e.log.debug("Twig.Template.reset","Reseting template "+this.id),this.blocks={},this.importedBlocks=[],this.originalBlockTokens={},this.child={blocks:t||{}},this.extend=null},e.Template.prototype.render=function(t,i){var r,n,a;return i=i||{},this.context=t||{},this.reset(),i.blocks&&(this.blocks=i.blocks),i.macros&&(this.macros=i.macros),r=e.parse.apply(this,[this.tokens,this.context]),this.extend?(this.options.allowInlineIncludes&&(a=e.Templates.load(this.extend))&&(a.options=this.options),a||(n=e.path.parsePath(this,this.extend),a=e.Templates.loadRemote(n,{method:this.getLoaderMethod(),base:this.base,async:!1,id:n,options:this.options})),this.parent=a,this.parent.render(this.context,{blocks:this.blocks})):"blocks"==i.output?this.blocks:"macros"==i.output?this.macros:r},e.Template.prototype.importFile=function(t){var i,r;if(!this.url&&this.options.allowInlineIncludes){if(t=this.path?this.path+"/"+t:t,!(r=e.Templates.load(t))&&!(r=e.Templates.loadRemote(i,{id:t,method:this.getLoaderMethod(),async:!1,options:this.options})))throw new e.Error("Unable to find the template "+t);return r.options=this.options,r}return i=e.path.parsePath(this,t),r=e.Templates.loadRemote(i,{method:this.getLoaderMethod(),base:this.base,async:!1,options:this.options,id:i})},e.Template.prototype.importBlocks=function(t,i){var r=this.importFile(t),n=this.context,a=this;i=i||!1,r.render(n),e.forEach(Object.keys(r.blocks),function(e){(i||void 0===a.blocks[e])&&(a.blocks[e]=r.blocks[e],a.importedBlocks.push(e))})},e.Template.prototype.importMacros=function(t){var i=e.path.parsePath(this,t);return e.Templates.loadRemote(i,{method:this.getLoaderMethod(),async:!1,id:i})},e.Template.prototype.getLoaderMethod=function(){return this.path?"fs":this.url?"ajax":this.method||"fs"},e.Template.prototype.compile=function(t){return e.compiler.compile(this,t)},e.Markup=function(e,t){return void 0===t&&(t=!0),"string"==typeof e&&e.length>0&&((e=new String(e)).twig_markup=t),e},e}((a=function(e){return e.VERSION="0.8.9",e}(a||{}))||{})),function(e){"use strict";var t,r;try{t=i(3),r=i(4)}catch(e){}e.Templates.registerLoader("fs",function(i,n,a,s){var o,p=null,l=n.precompiled,c=this.parsers[n.parser]||this.parser.twig;if(!t||!r)throw new e.Error('Unsupported platform: Unable to load from file because there is no "fs" or "path" implementation');var u=function(e,t){e?"function"==typeof s&&s(e):(!0===l&&(t=JSON.parse(t)),n.data=t,n.path=n.path||i,o=c.call(this,n),"function"==typeof a&&a(o))};if(n.path=n.path||i,n.async)return t.stat(n.path,function(r,a){if(r||!a.isFile())throw new e.Error("Unable to find template file "+i);t.readFile(n.path,"utf8",u)}),!0;if(!t.statSync(n.path).isFile())throw new e.Error("Unable to find template file "+i);return p=t.readFileSync(n.path,"utf8"),u(void 0,p),o})}(a),function(e){"use strict";e.Templates.registerParser("source",function(e){return e.data||""})}(a),function(e){"use strict";e.Templates.registerParser("twig",function(t){return new e.Template(t)})}(a),function(){"use strict";String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")}),Object.keys||(Object.keys=function(e){if(e!==Object(e))throw new TypeError("Object.keys called on non-object");var t,i=[];for(t in e)Object.prototype.hasOwnProperty.call(e,t)&&i.push(t);return i})}();var a=function(e){return e.compiler={module:{}},e.compiler.compile=function(t,i){var r,n=JSON.stringify(t.tokens),a=t.id;if(i.module){if(void 0===e.compiler.module[i.module])throw new e.Error("Unable to find module type "+i.module);r=e.compiler.module[i.module](a,n,i.twig)}else r=e.compiler.wrap(a,n);return r},e.compiler.module={amd:function(t,i,r){return'define(["'+r+'"], function (Twig) {\n\tvar twig, templates;\ntwig = Twig.twig;\ntemplates = '+e.compiler.wrap(t,i)+"\n\treturn templates;\n});"},node:function(t,i){return'var twig = require("twig").twig;\nexports.template = '+e.compiler.wrap(t,i)},cjs2:function(t,i,r){return'module.declare([{ twig: "'+r+'" }], function (require, exports, module) {\n\tvar twig = require("twig").twig;\n\texports.template = '+e.compiler.wrap(t,i)+"\n});"}},e.compiler.wrap=function(e,t){return'twig({id:"'+e.replace('"','\\"')+'", data:'+t+", precompiled: true});\n"},e}((a=function(e){"use strict";return e.exports={VERSION:e.VERSION},e.exports.twig=function(t){var i=t.id,r={strict_variables:t.strict_variables||!1,autoescape:null!=t.autoescape&&t.autoescape||!1,allowInlineIncludes:t.allowInlineIncludes||!1,rethrow:t.rethrow||!1,namespaces:t.namespaces};if(e.cache&&i&&e.validateId(i),void 0!==t.debug&&(e.debug=t.debug),void 0!==t.trace&&(e.trace=t.trace),void 0!==t.data)return e.Templates.parsers.twig({data:t.data,path:t.hasOwnProperty("path")?t.path:void 0,module:t.module,id:i,options:r});if(void 0!==t.ref){if(void 0!==t.id)throw new e.Error("Both ref and id cannot be set on a twig.js template.");return e.Templates.load(t.ref)}if(void 0!==t.method){if(!e.Templates.isRegisteredLoader(t.method))throw new e.Error('Loader for "'+t.method+'" is not defined.');return e.Templates.loadRemote(t.name||t.href||t.path||i||void 0,{id:i,method:t.method,parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:r},t.load,t.error)}return void 0!==t.href?e.Templates.loadRemote(t.href,{id:i,method:"ajax",parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:r},t.load,t.error):void 0!==t.path?e.Templates.loadRemote(t.path,{id:i,method:"fs",parser:t.parser||"twig",base:t.base,module:t.module,precompiled:t.precompiled,async:t.async,options:r},t.load,t.error):void 0},e.exports.extendFilter=function(t,i){e.filter.extend(t,i)},e.exports.extendFunction=function(t,i){e._function.extend(t,i)},e.exports.extendTest=function(t,i){e.test.extend(t,i)},e.exports.extendTag=function(t){e.logic.extend(t)},e.exports.extend=function(t){t(e)},e.exports.compile=function(t,i){var r,n=i.filename,a=i.filename;return r=new e.Template({data:t,path:a,id:n,options:i.settings["twig options"]}),function(e){return r.render(e)}},e.exports.renderFile=function(t,i,r){"function"==typeof i&&(r=i,i={});var n=(i=i||{}).settings||{},a={path:t,base:n.views,load:function(e){r(null,e.render(i))}},s=n["twig options"];if(s)for(var o in s)s.hasOwnProperty(o)&&(a[o]=s[o]);e.exports.twig(a)},e.exports.__express=e.exports.renderFile,e.exports.cache=function(t){e.cache=t},e.exports.path=e.path,e}((a=function(e){"use strict";return e.tests={empty:function(e){if(null==e)return!0;if("number"==typeof e)return!1;if(e.length&&e.length>0)return!1;for(var t in e)if(e.hasOwnProperty(t))return!1;return!0},odd:function(e){return e%2==1},even:function(e){return e%2==0},divisibleby:function(e,t){return e%t[0]==0},defined:function(e){return void 0!==e},none:function(e){return null===e},null:function(e){return this.none(e)},sameas:function(e,t){return e===t[0]},iterable:function(t){return t&&(e.lib.is("Array",t)||e.lib.is("Object",t))}},e.test=function(t,i,r){if(!e.tests[t])throw"Test "+t+" is not defined.";return e.tests[t](i,r)},e.test.extend=function(t,i){e.tests[t]=i},e}((a=function(e){"use strict";return e.path={},e.path.parsePath=function(t,i){var r=null;i=i||"";if("object"==typeof t&&"object"==typeof t.options&&(r=t.options.namespaces),"object"==typeof r&&i.indexOf("::")>0||i.indexOf("@")>=0){for(var n in r)r.hasOwnProperty(n)&&(i=(i=i.replace(n+"::",r[n])).replace("@"+n,r[n]));return i}return e.path.relativePath(t,i)},e.path.relativePath=function(t,r){var n,a,s,o="/",p=[];r=r||"";if(t.url)n=void 0!==t.base?t.base+("/"===t.base.charAt(t.base.length-1)?"":"/"):t.url;else if(t.path){var l=i(4),c=l.sep||o,u=new RegExp("^\\.{1,2}"+c.replace("\\","\\\\"));r=r.replace(/\//g,c),void 0!==t.base&&null==r.match(u)?(r=r.replace(t.base,""),n=t.base+c):n=l.normalize(t.path),n=n.replace(c+c,c),o=c}else{if(!t.name&&!t.id||!t.method||"fs"===t.method||"ajax"===t.method)throw new e.Error("Cannot extend an inline template.");n=t.base||t.name||t.id}for((a=n.split(o)).pop(),a=a.concat(r.split(o));a.length>0;)"."==(s=a.shift())||(".."==s&&p.length>0&&".."!=p[p.length-1]?p.pop():p.push(s));return p.join(o)},e}((a=function(t){return t.functions={range:function(e,t,i){var r,n,a=[],s=i||1,o=!1;if(isNaN(e)||isNaN(t)?isNaN(e)&&isNaN(t)?(o=!0,r=e.charCodeAt(0),n=t.charCodeAt(0)):(r=isNaN(e)?0:e,n=isNaN(t)?0:t):(r=parseInt(e,10),n=parseInt(t,10)),!(r>n))for(;r<=n;)a.push(o?String.fromCharCode(r):r),r+=s;else for(;r>=n;)a.push(o?String.fromCharCode(r):r),r-=s;return a},cycle:function(e,t){return e[t%e.length]},dump:function(){var e=0,i="",r=Array.prototype.slice.call(arguments),n=function(e){for(var t="";e>0;)e--,t+="  ";return t},a=function(t){i+=n(e),"object"==typeof t?s(t):"function"==typeof t?i+="function()\n":"string"==typeof t?i+="string("+t.length+') "'+t+'"\n':"number"==typeof t?i+="number("+t+")\n":"boolean"==typeof t&&(i+="bool("+t+")\n")},s=function(t){var r;if(null===t)i+="NULL\n";else if(void 0===t)i+="undefined\n";else if("object"==typeof t){for(r in i+=n(e)+typeof t,e++,i+="("+function(e){var t,i=0;for(t in e)e.hasOwnProperty(t)&&i++;return i}(t)+") {\n",t)i+=n(e)+"["+r+"]=> \n",a(t[r]);i+=n(--e)+"}\n"}else a(t)};return 0==r.length&&r.push(this.context),t.forEach(r,function(e){s(e)}),i},date:function(e,i){var r;if(void 0===e)r=new Date;else if(t.lib.is("Date",e))r=e;else if(t.lib.is("String",e))r=e.match(/^[0-9]+$/)?new Date(1e3*e):new Date(1e3*t.lib.strtotime(e));else{if(!t.lib.is("Number",e))throw new t.Error("Unable to parse date "+e);r=new Date(1e3*e)}return r},block:function(e){return this.originalBlockTokens[e]?t.logic.parse.apply(this,[this.originalBlockTokens[e],this.context]).output:this.blocks[e]},parent:function(){return t.placeholders.parent},attribute:function(e,i,r){return t.lib.is("Object",e)&&e.hasOwnProperty(i)?"function"==typeof e[i]?e[i].apply(void 0,r):e[i]:e[i]||void 0},max:function(e){return t.lib.is("Object",e)?(delete e._keys,t.lib.max(e)):t.lib.max.apply(null,arguments)},min:function(e){return t.lib.is("Object",e)?(delete e._keys,t.lib.min(e)):t.lib.min.apply(null,arguments)},template_from_string:function(e){return void 0===e&&(e=""),t.Templates.parsers.twig({options:this.options,data:e})},random:function(e){var i=2147483648;function r(e){var t=Math.floor(Math.random()*i),r=[0,e],n=Math.min.apply(null,r),a=Math.max.apply(null,r);return n+Math.floor((a-n+1)*t/i)}if(t.lib.is("Number",e))return r(e);if(t.lib.is("String",e))return e.charAt(r(e.length-1));if(t.lib.is("Array",e))return e[r(e.length-1)];if(t.lib.is("Object",e)){var n=Object.keys(e);return e[n[r(n.length-1)]]}return r(i-1)},source:function(i,r){var a,s,o,p=!1;void 0!==n&&void 0!==n.exports&&"undefined"==typeof window?(s="fs",o=e+"/"+i):(s="ajax",o=i);var l={id:i,path:o,method:s,parser:"source",async:!1,fetchTemplateSource:!0};void 0===r&&(r=!1);try{null==(a=t.Templates.loadRemote(i,l))?a="":p=!0}catch(e){t.log.debug("Twig.functions.source: ","Problem loading template  ",e)}return p||r?a:'Template "{name}" is not defined.'.replace("{name}",i)}},t._function=function(e,i,r){if(!t.functions[e])throw"Unable to find function "+e;return t.functions[e](i,r)},t._function.extend=function(e,i){t.functions[e]=i},t}((a=function(e){function t(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&i===e}return e.filters={upper:function(e){return"string"!=typeof e?e:e.toUpperCase()},lower:function(e){return"string"!=typeof e?e:e.toLowerCase()},capitalize:function(e){return"string"!=typeof e?e:e.substr(0,1).toUpperCase()+e.toLowerCase().substr(1)},title:function(e){return"string"!=typeof e?e:e.toLowerCase().replace(/(^|\s)([a-z])/g,function(e,t,i){return t+i.toUpperCase()})},length:function(t){return e.lib.is("Array",t)||"string"==typeof t?t.length:e.lib.is("Object",t)?void 0===t._keys?Object.keys(t).length:t._keys.length:0},reverse:function(e){if(t("Array",e))return e.reverse();if(t("String",e))return e.split("").reverse().join("");if(t("Object",e)){var i=e._keys||Object.keys(e).reverse();return e._keys=i,e}},sort:function(e){if(t("Array",e))return e.sort();if(t("Object",e)){delete e._keys;var i=Object.keys(e).sort(function(t,i){var r;return e[t]>e[i]==!(e[t]<=e[i])?e[t]>e[i]?1:e[t]<e[i]?-1:0:isNaN(r=parseFloat(e[t]))||isNaN(b1=parseFloat(e[i]))?"string"==typeof e[t]?e[t]>e[i].toString()?1:e[t]<e[i].toString()?-1:0:"string"==typeof e[i]?e[t].toString()>e[i]?1:e[t].toString()<e[i]?-1:0:null:r>b1?1:r<b1?-1:0});return e._keys=i,e}},keys:function(t){if(null!=t){var i=t._keys||Object.keys(t),r=[];return e.forEach(i,function(e){"_keys"!==e&&t.hasOwnProperty(e)&&r.push(e)}),r}},url_encode:function(e){if(null!=e){var t=encodeURIComponent(e);return t=t.replace("'","%27")}},join:function(i,r){if(null!=i){var n="",a=[],s=null;return r&&r[0]&&(n=r[0]),t("Array",i)?a=i:(s=i._keys||Object.keys(i),e.forEach(s,function(e){"_keys"!==e&&i.hasOwnProperty(e)&&a.push(i[e])})),a.join(n)}},default:function(t,i){if(void 0!==i&&i.length>1)throw new e.Error("default filter expects one argument");return null==t||""===t?void 0===i?"":i[0]:t},json_encode:function(i){if(null==i)return"null";if("object"==typeof i&&t("Array",i))return n=[],e.forEach(i,function(t){n.push(e.filters.json_encode(t))}),"["+n.join(",")+"]";if("object"==typeof i){var r=i._keys||Object.keys(i),n=[];return e.forEach(r,function(t){n.push(JSON.stringify(t)+":"+e.filters.json_encode(i[t]))}),"{"+n.join(",")+"}"}return JSON.stringify(i)},merge:function(i,r){var n=[],a=0,s=[];if(t("Array",i)?e.forEach(r,function(e){t("Array",e)||(n={})}):n={},t("Array",n)||(n._keys=[]),t("Array",i)?e.forEach(i,function(e){n._keys&&n._keys.push(a),n[a]=e,a++}):(s=i._keys||Object.keys(i),e.forEach(s,function(e){n[e]=i[e],n._keys.push(e);var t=parseInt(e,10);!isNaN(t)&&t>=a&&(a=t+1)})),e.forEach(r,function(i){t("Array",i)?e.forEach(i,function(e){n._keys&&n._keys.push(a),n[a]=e,a++}):(s=i._keys||Object.keys(i),e.forEach(s,function(e){n[e]||n._keys.push(e),n[e]=i[e];var t=parseInt(e,10);!isNaN(t)&&t>=a&&(a=t+1)}))}),0===r.length)throw new e.Error("Filter merge expects at least one parameter");return n},date:function(t,i){var r=e.functions.date(t),n=i&&i.length?i[0]:"F j, Y H:i";return e.lib.formatDate(r,n)},date_modify:function(t,i){if(null!=t){if(void 0===i||1!==i.length)throw new e.Error("date_modify filter expects 1 argument");var r,n=i[0];return e.lib.is("Date",t)&&(r=e.lib.strtotime(n,t.getTime()/1e3)),e.lib.is("String",t)&&(r=e.lib.strtotime(n,e.lib.strtotime(t))),e.lib.is("Number",t)&&(r=e.lib.strtotime(n,t)),new Date(1e3*r)}},replace:function(t,i){if(null!=t){var r,n=i[0];for(r in n)n.hasOwnProperty(r)&&"_keys"!==r&&(t=e.lib.replaceAll(t,r,n[r]));return t}},format:function(t,i){if(null!=t)return e.lib.vsprintf(t,i)},striptags:function(t){if(null!=t)return e.lib.strip_tags(t)},escape:function(t,i){if(null!=t){var r="html";if(i&&i.length&&!0!==i[0]&&(r=i[0]),"html"==r){var n=t.toString().replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#039;");return e.Markup(n,"html")}if("js"==r){n=t.toString();for(var a="",s=0;s<n.length;s++){if(n[s].match(/^[a-zA-Z0-9,\._]$/))a+=n[s];else a+=(o=n.charCodeAt(s))<128?"\\x"+o.toString(16).toUpperCase():e.lib.sprintf("\\u%04s",o.toString(16).toUpperCase())}return e.Markup(a,"js")}if("css"==r){for(n=t.toString(),a="",s=0;s<n.length;s++){if(n[s].match(/^[a-zA-Z0-9]$/))a+=n[s];else a+="\\"+(o=n.charCodeAt(s)).toString(16).toUpperCase()+" "}return e.Markup(a,"css")}if("url"==r){a=e.filters.url_encode(t);return e.Markup(a,"url")}if("html_attr"==r){for(n=t.toString(),a="",s=0;s<n.length;s++)if(n[s].match(/^[a-zA-Z0-9,\.\-_]$/))a+=n[s];else if(n[s].match(/^[&<>"]$/))a+=n[s].replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;");else{var o;a+=(o=n.charCodeAt(s))<=31&&9!=o&&10!=o&&13!=o?"&#xFFFD;":o<128?e.lib.sprintf("&#x%02s;",o.toString(16).toUpperCase()):e.lib.sprintf("&#x%04s;",o.toString(16).toUpperCase())}return e.Markup(a,"html_attr")}throw new e.Error("escape strategy unsupported")}},e:function(t,i){return e.filters.escape(t,i)},nl2br:function(t){if(null!=t){var i="<br />BACKSLASH_n_replace";return t=e.filters.escape(t).replace(/\r\n/g,i).replace(/\r/g,i).replace(/\n/g,i),t=e.lib.replaceAll(t,"BACKSLASH_n_replace","\n"),e.Markup(t)}},number_format:function(e,t){var i=e,r=t&&t[0]?t[0]:void 0,n=t&&void 0!==t[1]?t[1]:".",a=t&&void 0!==t[2]?t[2]:",";i=(i+"").replace(/[^0-9+\-Ee.]/g,"");var s=isFinite(+i)?+i:0,o=isFinite(+r)?Math.abs(r):0,p="";return(p=(o?function(e,t){var i=Math.pow(10,t);return""+Math.round(e*i)/i}(s,o):""+Math.round(s)).split("."))[0].length>3&&(p[0]=p[0].replace(/\B(?=(?:\d{3})+(?!\d))/g,a)),(p[1]||"").length<o&&(p[1]=p[1]||"",p[1]+=new Array(o-p[1].length+1).join("0")),p.join(n)},trim:function(t,i){if(null!=t){var r,n=e.filters.escape(""+t);r=i&&i[0]?""+i[0]:" \n\r\t\f\v            ​\u2028\u2029　";for(var a=0;a<n.length;a++)if(-1===r.indexOf(n.charAt(a))){n=n.substring(a);break}for(a=n.length-1;a>=0;a--)if(-1===r.indexOf(n.charAt(a))){n=n.substring(0,a+1);break}return-1===r.indexOf(n.charAt(0))?n:""}},truncate:function(e,t){var i=30,r=!1,n="...";if(e+="",t&&(t[0]&&(i=t[0]),t[1]&&(r=t[1]),t[2]&&(n=t[2])),e.length>i){if(r&&-1===(i=e.indexOf(" ",i)))return e;e=e.substr(0,i)+n}return e},slice:function(t,i){if(null!=t){if(void 0===i||i.length<1)throw new e.Error("slice filter expects at least 1 argument");var r=i[0]||0,n=i.length>1?i[1]:t.length,a=r>=0?r:Math.max(t.length+r,0);if(e.lib.is("Array",t)){for(var s=[],o=a;o<a+n&&o<t.length;o++)s.push(t[o]);return s}if(e.lib.is("String",t))return t.substr(a,n);throw new e.Error("slice filter expects value to be an array or string")}},abs:function(e){if(null!=e)return Math.abs(e)},first:function(e){if(t("Array",e))return e[0];if(t("Object",e)){if("_keys"in e)return e[e._keys[0]]}else if("string"==typeof e)return e.substr(0,1)},split:function(t,i){if(null!=t){if(void 0===i||i.length<1||i.length>2)throw new e.Error("split filter expects 1 or 2 argument");if(e.lib.is("String",t)){var r=i[0],n=i[1],a=t.split(r);if(void 0===n)return a;if(n<0)return t.split(r,a.length+n);var s=[];if(""==r)for(;a.length>0;){for(var o="",p=0;p<n&&a.length>0;p++)o+=a.shift();s.push(o)}else{for(p=0;p<n-1&&a.length>0;p++)s.push(a.shift());a.length>0&&s.push(a.join(r))}return s}throw new e.Error("split filter expects value to be a string")}},last:function(t){var i;return e.lib.is("Object",t)?t[(i=void 0===t._keys?Object.keys(t):t._keys)[i.length-1]]:t[t.length-1]},raw:function(t){return e.Markup(t)},batch:function(t,i){var r,n,a,s=i.shift(),o=i.shift();if(!e.lib.is("Array",t))throw new e.Error("batch filter expects items to be an array");if(!e.lib.is("Number",s))throw new e.Error("batch filter expects size to be a number");if(s=Math.ceil(s),r=e.lib.chunkArray(t,s),o&&t.length%s!=0){for(a=s-(n=r.pop()).length;a--;)n.push(o);r.push(n)}return r},round:function(t,i){var r=(i=i||[]).length>0?i[0]:0,n=i.length>1?i[1]:"common";if(t=parseFloat(t),r&&!e.lib.is("Number",r))throw new e.Error("round filter expects precision to be a number");if("common"===n)return e.lib.round(t,r);if(!e.lib.is("Function",Math[n]))throw new e.Error("round filter expects method to be 'floor', 'ceil', or 'common'");return Math[n](t*Math.pow(10,r))/Math.pow(10,r)}},e.filter=function(t,i,r){if(!e.filters[t])throw"Unable to find filter "+t;return e.filters[t].apply(this,[i,r])},e.filter.extend=function(t,i){e.filters[t]=i},e}((a=function(e){"use strict";e.expression.operator={leftToRight:"leftToRight",rightToLeft:"rightToLeft"};var t=function(e,t){if(null==t)return null;if(void 0!==t.indexOf)return e===t||""!==e&&t.indexOf(e)>-1;var i;for(i in t)if(t.hasOwnProperty(i)&&t[i]===e)return!0;return!1};return e.expression.operator.lookup=function(t,i){switch(t){case"..":case"not in":case"in":i.precidence=20,i.associativity=e.expression.operator.leftToRight;break;case",":i.precidence=18,i.associativity=e.expression.operator.leftToRight;break;case"?":case":":i.precidence=16,i.associativity=e.expression.operator.rightToLeft;break;case"or":i.precidence=14,i.associativity=e.expression.operator.leftToRight;break;case"and":i.precidence=13,i.associativity=e.expression.operator.leftToRight;break;case"==":case"!=":i.precidence=9,i.associativity=e.expression.operator.leftToRight;break;case"<":case"<=":case">":case">=":i.precidence=8,i.associativity=e.expression.operator.leftToRight;break;case"~":case"+":case"-":i.precidence=6,i.associativity=e.expression.operator.leftToRight;break;case"//":case"**":case"*":case"/":case"%":i.precidence=5,i.associativity=e.expression.operator.leftToRight;break;case"not":i.precidence=3,i.associativity=e.expression.operator.rightToLeft;break;default:throw new e.Error(t+" is an unknown operator.")}return i.operator=t,i},e.expression.operator.parse=function(i,r){var n,a,s;switch(e.log.trace("Twig.expression.operator.parse: ","Handling ",i),i){case":":break;case"?":s=r.pop(),a=r.pop(),(n=r.pop())?r.push(a):r.push(s);break;case"+":a=parseFloat(r.pop()),n=parseFloat(r.pop()),r.push(n+a);break;case"-":a=parseFloat(r.pop()),n=parseFloat(r.pop()),r.push(n-a);break;case"*":a=parseFloat(r.pop()),n=parseFloat(r.pop()),r.push(n*a);break;case"/":a=parseFloat(r.pop()),n=parseFloat(r.pop()),r.push(n/a);break;case"//":a=parseFloat(r.pop()),n=parseFloat(r.pop()),r.push(parseInt(n/a));break;case"%":a=parseFloat(r.pop()),n=parseFloat(r.pop()),r.push(n%a);break;case"~":a=r.pop(),n=r.pop(),r.push((null!=n?n.toString():"")+(null!=a?a.toString():""));break;case"not":case"!":r.push(!r.pop());break;case"<":a=r.pop(),n=r.pop(),r.push(n<a);break;case"<=":a=r.pop(),n=r.pop(),r.push(n<=a);break;case">":a=r.pop(),n=r.pop(),r.push(n>a);break;case">=":a=r.pop(),n=r.pop(),r.push(n>=a);break;case"===":a=r.pop(),n=r.pop(),r.push(n===a);break;case"==":a=r.pop(),n=r.pop(),r.push(n==a);break;case"!==":a=r.pop(),n=r.pop(),r.push(n!==a);break;case"!=":a=r.pop(),n=r.pop(),r.push(n!=a);break;case"or":a=r.pop(),n=r.pop(),r.push(n||a);break;case"and":a=r.pop(),n=r.pop(),r.push(n&&a);break;case"**":a=r.pop(),n=r.pop(),r.push(Math.pow(n,a));break;case"not in":a=r.pop(),n=r.pop(),r.push(!t(n,a));break;case"in":a=r.pop(),n=r.pop(),r.push(t(n,a));break;case"..":a=r.pop(),n=r.pop(),r.push(e.functions.range(n,a));break;default:throw new e.Error(i+" is an unknown operator.")}},e}((a=function(e){"use strict";for(e.expression={},e.expression.reservedWords=["true","false","null","TRUE","FALSE","NULL","_context"],e.expression.type={comma:"Twig.expression.type.comma",operator:{unary:"Twig.expression.type.operator.unary",binary:"Twig.expression.type.operator.binary"},string:"Twig.expression.type.string",bool:"Twig.expression.type.bool",array:{start:"Twig.expression.type.array.start",end:"Twig.expression.type.array.end"},object:{start:"Twig.expression.type.object.start",end:"Twig.expression.type.object.end"},parameter:{start:"Twig.expression.type.parameter.start",end:"Twig.expression.type.parameter.end"},key:{period:"Twig.expression.type.key.period",brackets:"Twig.expression.type.key.brackets"},filter:"Twig.expression.type.filter",_function:"Twig.expression.type._function",variable:"Twig.expression.type.variable",number:"Twig.expression.type.number",_null:"Twig.expression.type.null",context:"Twig.expression.type.context",test:"Twig.expression.type.test"},e.expression.set={operations:[e.expression.type.filter,e.expression.type.operator.unary,e.expression.type.operator.binary,e.expression.type.array.end,e.expression.type.object.end,e.expression.type.parameter.end,e.expression.type.comma,e.expression.type.test],expressions:[e.expression.type._function,e.expression.type.bool,e.expression.type.string,e.expression.type.variable,e.expression.type.number,e.expression.type._null,e.expression.type.context,e.expression.type.parameter.start,e.expression.type.array.start,e.expression.type.object.start]},e.expression.set.operations_extended=e.expression.set.operations.concat([e.expression.type.key.period,e.expression.type.key.brackets]),e.expression.fn={compile:{push:function(e,t,i){i.push(e)},push_both:function(e,t,i){i.push(e),t.push(e)}},parse:{push:function(e,t,i){t.push(e)},push_value:function(e,t,i){t.push(e.value)}}},e.expression.definitions=[{type:e.expression.type.test,regex:/^is\s+(not)?\s*([a-zA-Z_][a-zA-Z0-9_]*)/,next:e.expression.set.operations.concat([e.expression.type.parameter.start]),compile:function(e,t,i){e.filter=e.match[2],e.modifier=e.match[1],delete e.match,delete e.value,i.push(e)},parse:function(t,i,r){var n=i.pop(),a=t.params&&e.expression.parse.apply(this,[t.params,r]),s=e.test(t.filter,n,a);"not"==t.modifier?i.push(!s):i.push(s)}},{type:e.expression.type.comma,regex:/^,/,next:e.expression.set.expressions.concat([e.expression.type.array.end,e.expression.type.object.end]),compile:function(t,i,r){var n,a=i.length-1;for(delete t.match,delete t.value;a>=0;a--){if((n=i.pop()).type===e.expression.type.object.start||n.type===e.expression.type.parameter.start||n.type===e.expression.type.array.start){i.push(n);break}r.push(n)}r.push(t)}},{type:e.expression.type.operator.binary,regex:/(^[\+\-~%\?\:]|^[!=]==?|^[!<>]=?|^\*\*?|^\/\/?|^and\s+|^or\s+|^in\s+|^not in\s+|^\.\.)/,next:e.expression.set.expressions.concat([e.expression.type.operator.unary]),compile:function(t,i,r){delete t.match,t.value=t.value.trim();var n=t.value,a=e.expression.operator.lookup(n,t);for(e.log.trace("Twig.expression.compile: ","Operator: ",a," from ",n);i.length>0&&(i[i.length-1].type==e.expression.type.operator.unary||i[i.length-1].type==e.expression.type.operator.binary)&&(a.associativity===e.expression.operator.leftToRight&&a.precidence>=i[i.length-1].precidence||a.associativity===e.expression.operator.rightToLeft&&a.precidence>i[i.length-1].precidence);){var s=i.pop();r.push(s)}if(":"===n){if(!i[i.length-1]||"?"!==i[i.length-1].value){var o=r.pop();if(o.type===e.expression.type.string||o.type===e.expression.type.variable)t.key=o.value;else if(o.type===e.expression.type.number)t.key=o.value.toString();else{if(o.type!==e.expression.type.parameter.end||!o.expression)throw new e.Error("Unexpected value before ':' of "+o.type+" = "+o.value);t.params=o.params}return void r.push(t)}}else i.push(a)},parse:function(t,i,r){t.key?i.push(t):t.params?(t.key=e.expression.parse.apply(this,[t.params,r]),i.push(t),delete t.params):e.expression.operator.parse(t.value,i)}},{type:e.expression.type.operator.unary,regex:/(^not\s+)/,next:e.expression.set.expressions,compile:function(t,i,r){delete t.match,t.value=t.value.trim();var n=t.value,a=e.expression.operator.lookup(n,t);for(e.log.trace("Twig.expression.compile: ","Operator: ",a," from ",n);i.length>0&&(i[i.length-1].type==e.expression.type.operator.unary||i[i.length-1].type==e.expression.type.operator.binary)&&(a.associativity===e.expression.operator.leftToRight&&a.precidence>=i[i.length-1].precidence||a.associativity===e.expression.operator.rightToLeft&&a.precidence>i[i.length-1].precidence);){var s=i.pop();r.push(s)}i.push(a)},parse:function(t,i,r){e.expression.operator.parse(t.value,i)}},{type:e.expression.type.string,regex:/^(["'])(?:(?=(\\?))\2[\s\S])*?\1/,next:e.expression.set.operations,compile:function(t,i,r){var n=t.value;delete t.match,n='"'===n.substring(0,1)?n.replace('\\"','"'):n.replace("\\'","'"),t.value=n.substring(1,n.length-1).replace(/\\n/g,"\n").replace(/\\r/g,"\r"),e.log.trace("Twig.expression.compile: ","String value: ",t.value),r.push(t)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.parameter.start,regex:/^\(/,next:e.expression.set.expressions.concat([e.expression.type.parameter.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.parameter.end,regex:/^\)/,next:e.expression.set.operations_extended,compile:function(t,i,r){var n,a=t;for(n=i.pop();i.length>0&&n.type!=e.expression.type.parameter.start;)r.push(n),n=i.pop();for(var s=[];t.type!==e.expression.type.parameter.start;)s.unshift(t),t=r.pop();s.unshift(t);void 0===(t=r[r.length-1])||t.type!==e.expression.type._function&&t.type!==e.expression.type.filter&&t.type!==e.expression.type.test&&t.type!==e.expression.type.key.brackets&&t.type!==e.expression.type.key.period?(a.expression=!0,s.pop(),s.shift(),a.params=s,r.push(a)):(a.expression=!1,t.params=s)},parse:function(t,i,r){var n=[],a=!1,s=null;if(t.expression)s=e.expression.parse.apply(this,[t.params,r]),i.push(s);else{for(;i.length>0;){if((s=i.pop())&&s.type&&s.type==e.expression.type.parameter.start){a=!0;break}n.unshift(s)}if(!a)throw new e.Error("Expected end of parameter set.");i.push(n)}}},{type:e.expression.type.array.start,regex:/^\[/,next:e.expression.set.expressions.concat([e.expression.type.array.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.array.end,regex:/^\]/,next:e.expression.set.operations_extended,compile:function(t,i,r){for(var n,a=i.length-1;a>=0&&(n=i.pop()).type!==e.expression.type.array.start;a--)r.push(n);r.push(t)},parse:function(t,i,r){for(var n=[],a=!1,s=null;i.length>0;){if((s=i.pop()).type&&s.type==e.expression.type.array.start){a=!0;break}n.unshift(s)}if(!a)throw new e.Error("Expected end of array.");i.push(n)}},{type:e.expression.type.object.start,regex:/^\{/,next:e.expression.set.expressions.concat([e.expression.type.object.end]),compile:e.expression.fn.compile.push_both,parse:e.expression.fn.parse.push},{type:e.expression.type.object.end,regex:/^\}/,next:e.expression.set.operations_extended,compile:function(t,i,r){for(var n,a=i.length-1;a>=0&&(!(n=i.pop())||n.type!==e.expression.type.object.start);a--)r.push(n);r.push(t)},parse:function(t,i,r){for(var n={},a=!1,s=null,o=!1,p=null;i.length>0;){if((s=i.pop())&&s.type&&s.type===e.expression.type.object.start){a=!0;break}if(s&&s.type&&(s.type===e.expression.type.operator.binary||s.type===e.expression.type.operator.unary)&&s.key){if(!o)throw new e.Error("Missing value for key '"+s.key+"' in object definition.");n[s.key]=p,void 0===n._keys&&(n._keys=[]),n._keys.unshift(s.key),p=null,o=!1}else o=!0,p=s}if(!a)throw new e.Error("Unexpected end of object.");i.push(n)}},{type:e.expression.type.filter,regex:/^\|\s?([a-zA-Z_][a-zA-Z0-9_\-]*)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,i){e.value=e.match[1],i.push(e)},parse:function(t,i,r){var n=i.pop(),a=t.params&&e.expression.parse.apply(this,[t.params,r]);i.push(e.filter.apply(this,[t.value,n,a]))}},{type:e.expression.type._function,regex:/^([a-zA-Z_][a-zA-Z0-9_]*)\s*\(/,next:e.expression.type.parameter.start,transform:function(e,t){return"("},compile:function(e,t,i){var r=e.match[1];e.fn=r,delete e.match,delete e.value,i.push(e)},parse:function(t,i,r){var n,a=t.params&&e.expression.parse.apply(this,[t.params,r]),s=t.fn;if(e.functions[s])n=e.functions[s].apply(this,a);else{if("function"!=typeof r[s])throw new e.Error(s+" function does not exist and is not defined in the context");n=r[s].apply(r,a)}i.push(n)}},{type:e.expression.type.variable,regex:/^[a-zA-Z_][a-zA-Z0-9_]*/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,validate:function(t,i){return e.indexOf(e.expression.reservedWords,t[0])<0},parse:function(t,i,r){var n=e.expression.resolve(r[t.value],r);i.push(n)}},{type:e.expression.type.key.period,regex:/^\.([a-zA-Z0-9_]+)/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(e,t,i){e.key=e.match[1],delete e.match,delete e.value,i.push(e)},parse:function(t,i,r){var n,a=t.params&&e.expression.parse.apply(this,[t.params,r]),s=t.key,o=i.pop();if(null==o){if(this.options.strict_variables)throw new e.Error("Can't access a key "+s+" on an null or undefined object.");return null}var p=function(e){return e.substr(0,1).toUpperCase()+e.substr(1)};n="object"==typeof o&&s in o?o[s]:void 0!==o["get"+p(s)]?o["get"+p(s)]:void 0!==o["is"+p(s)]?o["is"+p(s)]:void 0,i.push(e.expression.resolve(n,o,a))}},{type:e.expression.type.key.brackets,regex:/^\[([^\]]*)\]/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:function(t,i,r){var n=t.match[1];delete t.value,delete t.match,t.stack=e.expression.compile({value:n}).stack,r.push(t)},parse:function(t,i,r){var n,a=t.params&&e.expression.parse.apply(this,[t.params,r]),s=e.expression.parse.apply(this,[t.stack,r]),o=i.pop();if(null==o){if(this.options.strict_variables)throw new e.Error("Can't access a key "+s+" on an null or undefined object.");return null}n="object"==typeof o&&s in o?o[s]:null,i.push(e.expression.resolve(n,o,a))}},{type:e.expression.type._null,regex:/^(null|NULL|none|NONE)/,next:e.expression.set.operations,compile:function(e,t,i){delete e.match,e.value=null,i.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.context,regex:/^_context/,next:e.expression.set.operations_extended.concat([e.expression.type.parameter.start]),compile:e.expression.fn.compile.push,parse:function(e,t,i){t.push(i)}},{type:e.expression.type.number,regex:/^\-?\d+(\.\d+)?/,next:e.expression.set.operations,compile:function(e,t,i){e.value=Number(e.value),i.push(e)},parse:e.expression.fn.parse.push_value},{type:e.expression.type.bool,regex:/^(true|TRUE|false|FALSE)/,next:e.expression.set.operations,compile:function(e,t,i){e.value="true"===e.match[0].toLowerCase(),delete e.match,i.push(e)},parse:e.expression.fn.parse.push_value}],e.expression.resolve=function(e,t,i){return"function"==typeof e?e.apply(t,i||[]):e},e.expression.handler={},e.expression.extendType=function(t){e.expression.type[t]="Twig.expression.type."+t},e.expression.extend=function(t){if(!t.type)throw new e.Error("Unable to extend logic definition. No type provided for "+t);e.expression.handler[t.type]=t};e.expression.definitions.length>0;)e.expression.extend(e.expression.definitions.shift());return e.expression.tokenize=function(t){var i,r,n,a,s,o,p=[],l=0,c=null,u=[];for(o=function(){var t=Array.prototype.slice.apply(arguments);t.pop(),t.pop();return e.log.trace("Twig.expression.tokenize","Matched a ",i," regular expression of ",t),c&&e.indexOf(c,i)<0?(u.push(i+" cannot follow a "+p[p.length-1].type+" at template:"+l+" near '"+t[0].substring(0,20)+"...'"),t[0]):e.expression.handler[i].validate&&!e.expression.handler[i].validate(t,p)?t[0]:(u=[],p.push({type:i,value:t[0],match:t}),s=!0,c=a,l+=t[0].length,e.expression.handler[i].transform?e.expression.handler[i].transform(t,p):"")},e.log.debug("Twig.expression.tokenize","Tokenizing expression ",t);t.length>0;){for(i in t=t.trim(),e.expression.handler)if(e.expression.handler.hasOwnProperty(i)){for(a=e.expression.handler[i].next,n=(r=e.expression.handler[i].regex)instanceof Array?r:[r],s=!1;n.length>0;)r=n.pop(),t=t.replace(r,o);if(s)break}if(!s)throw u.length>0?new e.Error(u.join(" OR ")):new e.Error("Unable to parse '"+t+"' at template position"+l)}return e.log.trace("Twig.expression.tokenize","Tokenized to ",p),p},e.expression.compile=function(t){var i=t.value,r=e.expression.tokenize(i),n=null,a=[],s=[],o=null;for(e.log.trace("Twig.expression.compile: ","Compiling ",i);r.length>0;)n=r.shift(),o=e.expression.handler[n.type],e.log.trace("Twig.expression.compile: ","Compiling ",n),o.compile&&o.compile(n,s,a),e.log.trace("Twig.expression.compile: ","Stack is",s),e.log.trace("Twig.expression.compile: ","Output is",a);for(;s.length>0;)a.push(s.pop());return e.log.trace("Twig.expression.compile: ","Final output is",a),t.stack=a,delete t.value,t},e.expression.parse=function(t,i){var r=this;t instanceof Array||(t=[t]);var n=[],a=null;return e.forEach(t,function(t){(a=e.expression.handler[t.type]).parse&&a.parse.apply(r,[t,n,i])}),n.pop()},e}((a=function(e){"use strict";for(e.logic={},e.logic.type={if_:"Twig.logic.type.if",endif:"Twig.logic.type.endif",for_:"Twig.logic.type.for",endfor:"Twig.logic.type.endfor",else_:"Twig.logic.type.else",elseif:"Twig.logic.type.elseif",set:"Twig.logic.type.set",setcapture:"Twig.logic.type.setcapture",endset:"Twig.logic.type.endset",filter:"Twig.logic.type.filter",endfilter:"Twig.logic.type.endfilter",shortblock:"Twig.logic.type.shortblock",block:"Twig.logic.type.block",endblock:"Twig.logic.type.endblock",extends_:"Twig.logic.type.extends",use:"Twig.logic.type.use",include:"Twig.logic.type.include",spaceless:"Twig.logic.type.spaceless",endspaceless:"Twig.logic.type.endspaceless",macro:"Twig.logic.type.macro",endmacro:"Twig.logic.type.endmacro",import_:"Twig.logic.type.import",from:"Twig.logic.type.from",embed:"Twig.logic.type.embed",endembed:"Twig.logic.type.endembed"},e.logic.definitions=[{type:e.logic.type.if_,regex:/^if\s+([\s\S]+)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!0,compile:function(t){var i=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,delete t.match,t},parse:function(t,i,r){var n="";return r=!0,e.expression.parse.apply(this,[t.stack,i])&&(r=!1,n=e.parse.apply(this,[t.output,i])),{chain:r,output:n}}},{type:e.logic.type.elseif,regex:/^elseif\s+([^\s].*)$/,next:[e.logic.type.else_,e.logic.type.elseif,e.logic.type.endif],open:!1,compile:function(t){var i=t.match[1];return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,delete t.match,t},parse:function(t,i,r){var n="";return r&&!0===e.expression.parse.apply(this,[t.stack,i])&&(r=!1,n=e.parse.apply(this,[t.output,i])),{chain:r,output:n}}},{type:e.logic.type.else_,regex:/^else$/,next:[e.logic.type.endif,e.logic.type.endfor],open:!1,parse:function(t,i,r){var n="";return r&&(n=e.parse.apply(this,[t.output,i])),{chain:r,output:n}}},{type:e.logic.type.endif,regex:/^endif$/,next:[],open:!1},{type:e.logic.type.for_,regex:/^for\s+([a-zA-Z0-9_,\s]+)\s+in\s+([^\s].*?)(?:\s+if\s+([^\s].*))?$/,next:[e.logic.type.else_,e.logic.type.endfor],open:!0,compile:function(t){var i=t.match[1],r=t.match[2],n=t.match[3],a=null;if(t.key_var=null,t.value_var=null,i.indexOf(",")>=0){if(2!==(a=i.split(",")).length)throw new e.Error("Invalid expression in for loop: "+i);t.key_var=a[0].trim(),t.value_var=a[1].trim()}else t.value_var=i;return t.expression=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r}]).stack,n&&(t.conditional=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack),delete t.match,t},parse:function(t,i,r){var n,a,s=e.expression.parse.apply(this,[t.expression,i]),o=[],p=0,l=this,c=t.conditional,u=function(r,a){var s=e.ChildContext(i);s[t.value_var]=a,t.key_var&&(s[t.key_var]=r),s.loop=function(e,t){var r=void 0!==c;return{index:e+1,index0:e,revindex:r?void 0:t-e,revindex0:r?void 0:t-e-1,first:0===e,last:r?void 0:e===t-1,length:r?void 0:t,parent:i}}(p,n),(void 0===c||e.expression.parse.apply(l,[c,s]))&&(o.push(e.parse.apply(l,[t.output,s])),p+=1),delete s.loop,delete s[t.value_var],delete s[t.key_var],e.merge(i,s,!0)};return e.lib.is("Array",s)?(n=s.length,e.forEach(s,function(e){u(p,e)})):e.lib.is("Object",s)&&(a=void 0!==s._keys?s._keys:Object.keys(s),n=a.length,e.forEach(a,function(e){"_keys"!==e&&u(e,s[e])})),{chain:0===o.length,output:e.output.apply(this,[o])}}},{type:e.logic.type.endfor,regex:/^endfor$/,next:[],open:!1},{type:e.logic.type.set,regex:/^set\s+([a-zA-Z0-9_,\s]+)\s*=\s*([\s\S]+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim(),r=t.match[2],n=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:r}]).stack;return t.key=i,t.expression=n,delete t.match,t},parse:function(t,i,r){var n=e.expression.parse.apply(this,[t.expression,i]);return i[t.key]=n,{chain:r,context:i}}},{type:e.logic.type.setcapture,regex:/^set\s+([a-zA-Z0-9_,\s]+)$/,next:[e.logic.type.endset],open:!0,compile:function(e){var t=e.match[1].trim();return e.key=t,delete e.match,e},parse:function(t,i,r){var n=e.parse.apply(this,[t.output,i]),a=t.key;return this.context[a]=n,i[a]=n,{chain:r,context:i}}},{type:e.logic.type.endset,regex:/^endset$/,next:[],open:!1},{type:e.logic.type.filter,regex:/^filter\s+(.+)$/,next:[e.logic.type.endfilter],open:!0,compile:function(t){var i="|"+t.match[1].trim();return t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,delete t.match,t},parse:function(t,i,r){var n=e.parse.apply(this,[t.output,i]),a=[{type:e.expression.type.string,value:n}].concat(t.stack);return{chain:r,output:e.expression.parse.apply(this,[a,i])}}},{type:e.logic.type.endfilter,regex:/^endfilter$/,next:[],open:!1},{type:e.logic.type.block,regex:/^block\s+([a-zA-Z0-9_]+)$/,next:[e.logic.type.endblock],open:!0,compile:function(e){return e.block=e.match[1].trim(),delete e.match,e},parse:function(t,i,r){var n,a=e.indexOf(this.importedBlocks,t.block)>-1,s=this.blocks[t.block]&&e.indexOf(this.blocks[t.block],e.placeholders.parent)>-1;return(void 0===this.blocks[t.block]||a||s||i.loop||t.overwrite)&&(n=t.expression?e.expression.parse.apply(this,[{type:e.expression.type.string,value:e.expression.parse.apply(this,[t.output,i])},i]):e.expression.parse.apply(this,[{type:e.expression.type.string,value:e.parse.apply(this,[t.output,i])},i]),a&&this.importedBlocks.splice(this.importedBlocks.indexOf(t.block),1),this.blocks[t.block]=s?e.Markup(this.blocks[t.block].replace(e.placeholders.parent,n)):n,this.originalBlockTokens[t.block]={type:t.type,block:t.block,output:t.output,overwrite:!0}),{chain:r,output:this.child.blocks[t.block]?this.child.blocks[t.block]:this.blocks[t.block]}}},{type:e.logic.type.shortblock,regex:/^block\s+([a-zA-Z0-9_]+)\s+(.+)$/,next:[],open:!0,compile:function(t){return t.expression=t.match[2].trim(),t.output=e.expression.compile({type:e.expression.type.expression,value:t.expression}).stack,t.block=t.match[1].trim(),delete t.match,t},parse:function(t,i,r){return e.logic.handler[e.logic.type.block].parse.apply(this,arguments)}},{type:e.logic.type.endblock,regex:/^endblock(?:\s+([a-zA-Z0-9_]+))?$/,next:[],open:!1},{type:e.logic.type.extends_,regex:/^extends\s+(.+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,r){var n=e.expression.parse.apply(this,[t.stack,i]);return this.extend=n,{chain:r,output:""}}},{type:e.logic.type.use,regex:/^use\s+(.+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim();return delete t.match,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,r){var n=e.expression.parse.apply(this,[t.stack,i]);return this.importBlocks(n),{chain:r,output:""}}},{type:e.logic.type.include,regex:/^include\s+(ignore missing\s+)?(.+?)\s*(?:with\s+([\S\s]+?))?\s*(only)?$/,next:[],open:!0,compile:function(t){var i=t.match,r=void 0!==i[1],n=i[2].trim(),a=i[3],s=void 0!==i[4]&&i[4].length;return delete t.match,t.only=s,t.includeMissing=r,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,void 0!==a&&(t.withStack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:a.trim()}]).stack),t},parse:function(t,i,r){var n,a,s={};if(t.only||(s=e.ChildContext(i)),void 0!==t.withStack)for(a in n=e.expression.parse.apply(this,[t.withStack,i]))n.hasOwnProperty(a)&&(s[a]=n[a]);var o=e.expression.parse.apply(this,[t.stack,s]);return{chain:r,output:(o instanceof e.Template?o:this.importFile(o)).render(s)}}},{type:e.logic.type.spaceless,regex:/^spaceless$/,next:[e.logic.type.endspaceless],open:!0,parse:function(t,i,r){return{chain:r,output:e.parse.apply(this,[t.output,i]).replace(/>\s+</g,"><").trim()}}},{type:e.logic.type.endspaceless,regex:/^endspaceless$/,next:[],open:!1},{type:e.logic.type.macro,regex:/^macro\s+([a-zA-Z0-9_]+)\s*\(\s*((?:[a-zA-Z0-9_]+(?:,\s*)?)*)\s*\)$/,next:[e.logic.type.endmacro],open:!0,compile:function(t){for(var i=t.match[1],r=t.match[2].split(/[\s,]+/),n=0;n<r.length;n++)for(var a=0;a<r.length;a++)if(r[n]===r[a]&&n!==a)throw new e.Error("Duplicate arguments for parameter: "+r[n]);return t.macroName=i,t.parameters=r,delete t.match,t},parse:function(t,i,r){var n=this;return this.macros[t.macroName]=function(){for(var i={_self:n.macros},r=0;r<t.parameters.length;r++){var a=t.parameters[r];void 0!==arguments[r]?i[a]=arguments[r]:i[a]=void 0}return e.parse.apply(n,[t.output,i])},{chain:r,output:""}}},{type:e.logic.type.endmacro,regex:/^endmacro$/,next:[],open:!1},{type:e.logic.type.import_,regex:/^import\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/,next:[],open:!0,compile:function(t){var i=t.match[1].trim(),r=t.match[2].trim();return delete t.match,t.expression=i,t.contextName=r,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,r){if("_self"!==t.expression){var n=e.expression.parse.apply(this,[t.stack,i]),a=this.importFile(n||t.expression);i[t.contextName]=a.render({},{output:"macros"})}else i[t.contextName]=this.macros;return{chain:r,output:""}}},{type:e.logic.type.from,regex:/^from\s+(.+)\s+import\s+([a-zA-Z0-9_, ]+)$/,next:[],open:!0,compile:function(t){for(var i=t.match[1].trim(),r=t.match[2].trim().split(/[ ,]+/),n={},a=0;a<r.length;a++){var s=r[a],o=s.match(/^([a-zA-Z0-9_]+)\s+(.+)\s+as\s+([a-zA-Z0-9_]+)$/);o?n[o[1].trim()]=o[2].trim():s.match(/^([a-zA-Z0-9_]+)$/)&&(n[s]=s)}return delete t.match,t.expression=i,t.macroNames=n,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:i}]).stack,t},parse:function(t,i,r){var n;if("_self"!==t.expression){var a=e.expression.parse.apply(this,[t.stack,i]);n=this.importFile(a||t.expression).render({},{output:"macros"})}else n=this.macros;for(var s in t.macroNames)n.hasOwnProperty(s)&&(i[t.macroNames[s]]=n[s]);return{chain:r,output:""}}},{type:e.logic.type.embed,regex:/^embed\s+(ignore missing\s+)?(.+?)\s*(?:with\s+(.+?))?\s*(only)?$/,next:[e.logic.type.endembed],open:!0,compile:function(t){var i=t.match,r=void 0!==i[1],n=i[2].trim(),a=i[3],s=void 0!==i[4]&&i[4].length;return delete t.match,t.only=s,t.includeMissing=r,t.stack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:n}]).stack,void 0!==a&&(t.withStack=e.expression.compile.apply(this,[{type:e.expression.type.expression,value:a.trim()}]).stack),t},parse:function(t,i,r){var n,a,s,o={};if(!t.only)for(a in i)i.hasOwnProperty(a)&&(o[a]=i[a]);if(void 0!==t.withStack)for(a in n=e.expression.parse.apply(this,[t.withStack,i]))n.hasOwnProperty(a)&&(o[a]=n[a]);var p=e.expression.parse.apply(this,[t.stack,o]);s=p instanceof e.Template?p:this.importFile(p),this.blocks={};e.parse.apply(this,[t.output,o]);return{chain:r,output:s.render(o,{blocks:this.blocks})}}},{type:e.logic.type.endembed,regex:/^endembed$/,next:[],open:!1}],e.logic.handler={},e.logic.extendType=function(t,i){i=i||"Twig.logic.type"+t,e.logic.type[t]=i},e.logic.extend=function(t){if(!t.type)throw new e.Error("Unable to extend logic definition. No type provided for "+t);e.logic.extendType(t.type),e.logic.handler[t.type]=t};e.logic.definitions.length>0;)e.logic.extend(e.logic.definitions.shift());return e.logic.compile=function(t){var i=t.value.trim(),r=e.logic.tokenize.apply(this,[i]),n=e.logic.handler[r.type];return n.compile&&(r=n.compile.apply(this,[r]),e.log.trace("Twig.logic.compile: ","Compiled logic token to ",r)),r},e.logic.tokenize=function(t){var i={},r=null,n=null,a=null,s=null,o=null;for(r in t=t.trim(),e.logic.handler)if(e.logic.handler.hasOwnProperty(r))for(n=e.logic.handler[r].type,s=[],(a=e.logic.handler[r].regex)instanceof Array?s=a:s.push(a);s.length>0;)if(null!==(o=s.shift().exec(t.trim())))return i.type=n,i.match=o,e.log.trace("Twig.logic.tokenize: ","Matched a ",n," regular expression of ",o),i;throw new e.Error("Unable to parse '"+t.trim()+"'")},e.logic.parse=function(t,i,r){var n,a="";return i=i||{},e.log.debug("Twig.logic.parse: ","Parsing logic token ",t),(n=e.logic.handler[t.type]).parse&&(a=n.parse.apply(this,[t,i,r])),a},e}((a=function(e){e.lib={};var t=function(){var e={not_string:/[^s]/,number:/[diefg]/,json:/[j]/,not_json:/[^j]/,text:/^[^\x25]+/,modulo:/^\x25{2}/,placeholder:/^\x25(?:([1-9]\d*)\$|\(([^\)]+)\))?(\+)?(0|'[^$])?(-)?(\d+)?(?:\.(\d+))?([b-gijosuxX])/,key:/^([a-z_][a-z_\d]*)/i,key_access:/^\.([a-z_][a-z_\d]*)/i,index_access:/^\[(\d+)\]/,sign:/^[\+\-]/};function t(){var e=arguments[0],i=t.cache;return i[e]&&i.hasOwnProperty(e)||(i[e]=t.parse(e)),t.format.call(null,i[e],arguments)}t.format=function(r,n){var a,s,o,p,l,c,u,y,d=1,h=r.length,g="",f=[],m=!0,v="";for(s=0;s<h;s++)if("string"===(g=i(r[s])))f[f.length]=r[s];else if("array"===g){if((p=r[s])[2])for(a=n[d],o=0;o<p[2].length;o++){if(!a.hasOwnProperty(p[2][o]))throw new Error(t("[sprintf] property '%s' does not exist",p[2][o]));a=a[p[2][o]]}else a=p[1]?n[p[1]]:n[d++];if("function"==i(a)&&(a=a()),e.not_string.test(p[8])&&e.not_json.test(p[8])&&"number"!=i(a)&&isNaN(a))throw new TypeError(t("[sprintf] expecting number but found %s",i(a)));switch(e.number.test(p[8])&&(m=a>=0),p[8]){case"b":a=a.toString(2);break;case"c":a=String.fromCharCode(a);break;case"d":case"i":a=parseInt(a,10);break;case"j":a=JSON.stringify(a,null,p[6]?parseInt(p[6]):0);break;case"e":a=p[7]?a.toExponential(p[7]):a.toExponential();break;case"f":a=p[7]?parseFloat(a).toFixed(p[7]):parseFloat(a);break;case"g":a=p[7]?parseFloat(a).toPrecision(p[7]):parseFloat(a);break;case"o":a=a.toString(8);break;case"s":a=(a=String(a))&&p[7]?a.substring(0,p[7]):a;break;case"u":a>>>=0;break;case"x":a=a.toString(16);break;case"X":a=a.toString(16).toUpperCase()}e.json.test(p[8])?f[f.length]=a:(!e.number.test(p[8])||m&&!p[3]?v="":(v=m?"+":"-",a=a.toString().replace(e.sign,"")),c=p[4]?"0"===p[4]?"0":p[4].charAt(1):" ",u=p[6]-(v+a).length,l=p[6]&&u>0?(y=c,Array(u+1).join(y)):"",f[f.length]=p[5]?v+a+l:"0"===c?v+l+a:l+v+a)}return f.join("")},t.cache={},t.parse=function(t){for(var i=t,r=[],n=[],a=0;i;){if(null!==(r=e.text.exec(i)))n[n.length]=r[0];else if(null!==(r=e.modulo.exec(i)))n[n.length]="%";else{if(null===(r=e.placeholder.exec(i)))throw new SyntaxError("[sprintf] unexpected placeholder");if(r[2]){a|=1;var s=[],o=r[2],p=[];if(null===(p=e.key.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");for(s[s.length]=p[1];""!==(o=o.substring(p[0].length));)if(null!==(p=e.key_access.exec(o)))s[s.length]=p[1];else{if(null===(p=e.index_access.exec(o)))throw new SyntaxError("[sprintf] failed to parse named argument key");s[s.length]=p[1]}r[2]=s}else a|=2;if(3===a)throw new Error("[sprintf] mixing positional and named placeholders is not (yet) supported");n[n.length]=r}i=i.substring(r[0].length)}return n};function i(e){return Object.prototype.toString.call(e).slice(8,-1).toLowerCase()}return{sprintf:t,vsprintf:function(e,i,r){return(r=(i||[]).slice(0)).splice(0,0,e),t.apply(null,r)}}}(),i=t.sprintf,r=t.vsprintf;return e.lib.sprintf=i,e.lib.vsprintf=r,function(){var t="Sun,Mon,Tue,Wed,Thu,Fri,Sat".split(","),i="Sunday,Monday,Tuesday,Wednesday,Thursday,Friday,Saturday".split(","),r="Jan,Feb,Mar,Apr,May,Jun,Jul,Aug,Sep,Oct,Nov,Dec".split(","),n="January,February,March,April,May,June,July,August,September,October,November,December".split(",");function a(e){var t=new Date(e.getFullYear()+1,0,4);return(t-e)/864e5<7&&(e.getDay()+6)%7<(t.getDay()+6)%7?t.getFullYear():e.getMonth()>0||e.getDate()>=4?e.getFullYear():e.getFullYear()-((e.getDay()+6)%7-e.getDate()>2?1:0)}e.lib.formatDate=function(e,s){if("string"!=typeof s||/^\s*$/.test(s))return e+"";var o=new Date(e.getFullYear(),0,1),p=e;return s.replace(/[dDjlNSwzWFmMntLoYyaABgGhHisuU]/g,function(e){switch(e){case"d":return("0"+p.getDate()).replace(/^.+(..)$/,"$1");case"D":return t[p.getDay()];case"j":return p.getDate();case"l":return i[p.getDay()];case"N":return(p.getDay()+6)%7+1;case"S":return c=p.getDate(),(c=Math.abs(c)%100)%10==1&&11!=c?"st":c%10==2&&12!=c?"nd":c%10==3&&13!=c?"rd":"th";case"w":return p.getDay();case"z":return Math.ceil((o-p)/864e5);case"W":return("0"+(s=p,l=new Date(a(s),0,4),l.setDate(l.getDate()-(l.getDay()+6)%7),parseInt((s-l)/6048e5)+1)).replace(/^.(..)$/,"$1");case"F":return n[p.getMonth()];case"m":return("0"+(p.getMonth()+1)).replace(/^.+(..)$/,"$1");case"M":return r[p.getMonth()];case"n":return p.getMonth()+1;case"t":return new Date(p.getFullYear(),p.getMonth()+1,-1).getDate();case"L":return 29==new Date(p.getFullYear(),1,29).getDate()?1:0;case"o":return a(p);case"Y":return p.getFullYear();case"y":return(p.getFullYear()+"").replace(/^.+(..)$/,"$1");case"a":return p.getHours()<12?"am":"pm";case"A":return p.getHours()<12?"AM":"PM";case"B":return Math.floor(1e3*((p.getUTCHours()+1)%24+p.getUTCMinutes()/60+p.getUTCSeconds()/3600)/24);case"g":return p.getHours()%12!=0?p.getHours()%12:12;case"G":return p.getHours();case"h":return("0"+(p.getHours()%12!=0?p.getHours()%12:12)).replace(/^.+(..)$/,"$1");case"H":return("0"+p.getHours()).replace(/^.+(..)$/,"$1");case"i":return("0"+p.getMinutes()).replace(/^.+(..)$/,"$1");case"s":return("0"+p.getSeconds()).replace(/^.+(..)$/,"$1");case"u":return p.getMilliseconds();case"U":return p.getTime()/1e3}var s,l,c})}}(),e.lib.strip_tags=function(e,t){t=(((t||"")+"").toLowerCase().match(/<[a-z][a-z0-9]*>/g)||[]).join("");return e.replace(/<!--[\s\S]*?-->|<\?(?:php)?[\s\S]*?\?>/gi,"").replace(/<\/?([a-z][a-z0-9]*)\b[^>]*>/gi,function(e,i){return t.indexOf("<"+i.toLowerCase()+">")>-1?e:""})},e.lib.parseISO8601Date=function(e){var t=[];if(!(t=e.match(/(\d{4})-(\d\d)-(\d\d)T(\d\d):(\d\d):(\d\d)(\.\d+)?(Z|([+-])(\d\d):(\d\d))/)))throw"Couldn't parse ISO 8601 date string '"+e+"'";var i=[1,2,3,4,5,6,10,11];for(var r in i)t[i[r]]=parseInt(t[i[r]],10);t[7]=parseFloat(t[7]);var n=Date.UTC(t[1],t[2]-1,t[3],t[4],t[5],t[6]);if(t[7]>0&&(n+=Math.round(1e3*t[7])),"Z"!=t[8]&&t[10]){var a=60*t[10]*60*1e3;t[11]&&(a+=60*t[11]*1e3),"-"==t[9]?n-=a:n+=a}return new Date(n)},e.lib.strtotime=function(e,t){var i,r,n,a,s,o,p,l,c,u;if(!e)return!1;if((r=(e=e.replace(/^\s+|\s+$/g,"").replace(/\s{2,}/g," ").replace(/[\t\r\n]/g,"").toLowerCase()).match(/^(\d{1,4})([\-\.\/\:])(\d{1,2})([\-\.\/\:])(\d{1,4})(?:\s(\d{1,2}):(\d{2})?:?(\d{2})?)?(?:\s([A-Z]+)?)?$/))&&r[2]===r[4])if(r[1]>1901)switch(r[2]){case"-":return!(r[3]>12||r[5]>31)&&new Date(r[1],parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3;case".":return!1;case"/":return!(r[3]>12||r[5]>31)&&new Date(r[1],parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}else if(r[5]>1901)switch(r[2]){case"-":case".":return!(r[3]>12||r[1]>31)&&new Date(r[5],parseInt(r[3],10)-1,r[1],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3;case"/":return!(r[1]>12||r[3]>31)&&new Date(r[5],parseInt(r[1],10)-1,r[3],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3}else switch(r[2]){case"-":return!(r[3]>12||r[5]>31||r[1]<70&&r[1]>38)&&(a=r[1]>=0&&r[1]<=38?+r[1]+2e3:r[1],new Date(a,parseInt(r[3],10)-1,r[5],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3);case".":return r[5]>=70?!(r[3]>12||r[1]>31)&&new Date(r[5],parseInt(r[3],10)-1,r[1],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3:r[5]<60&&!r[6]&&(!(r[1]>23||r[3]>59)&&(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),r[1]||0,r[3]||0,r[5]||0,r[9]||0)/1e3));case"/":return!(r[1]>12||r[3]>31||r[5]<70&&r[5]>38)&&(a=r[5]>=0&&r[5]<=38?+r[5]+2e3:r[5],new Date(a,parseInt(r[1],10)-1,r[3],r[6]||0,r[7]||0,r[8]||0,r[9]||0)/1e3);case":":return!(r[1]>23||r[3]>59||r[5]>59)&&(n=new Date,new Date(n.getFullYear(),n.getMonth(),n.getDate(),r[1]||0,r[3]||0,r[5]||0)/1e3)}if("now"===e)return null===t||isNaN(t)?(new Date).getTime()/1e3|0:0|t;if(!isNaN(i=Date.parse(e)))return i/1e3|0;if((r=e.match(/^([0-9]{4}-[0-9]{2}-[0-9]{2})[ t]([0-9]{2}:[0-9]{2}:[0-9]{2}(\.[0-9]+)?)([\+-][0-9]{2}(:[0-9]{2})?|z)/))&&("z"==r[4]?r[4]="Z":r[4].match(/^([\+-][0-9]{2})$/)&&(r[4]=r[4]+":00"),!isNaN(i=Date.parse(r[1]+"T"+r[2]+r[4]))))return i/1e3|0;function y(e){var t=e.split(" "),i=t[0],r=t[1].substring(0,3),n=/\d+/.test(i),a=("last"===i?-1:1)*("ago"===t[2]?-1:1);if(n&&(a*=parseInt(i,10)),p.hasOwnProperty(r)&&!t[1].match(/^mon(day|\.)?$/i))return s["set"+p[r]](s["get"+p[r]]()+a);if("wee"===r)return s.setDate(s.getDate()+7*a);if("next"===i||"last"===i)!function(e,t,i){var r,n=o[t];void 0!==n&&(0==(r=n-s.getDay())?r=7*i:r>0&&"last"===e?r-=7:r<0&&"next"===e&&(r+=7),s.setDate(s.getDate()+r))}(i,r,a);else if(!n)return!1;return!0}if(s=t?new Date(1e3*t):new Date,o={sun:0,mon:1,tue:2,wed:3,thu:4,fri:5,sat:6},p={yea:"FullYear",mon:"Month",day:"Date",hou:"Hours",min:"Minutes",sec:"Seconds"},"([+-]?\\d+\\s"+(c="(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)")+"|(last|next)\\s"+c+")(\\sago)?",!(r=e.match(new RegExp("([+-]?\\d+\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?)|(last|next)\\s(years?|months?|weeks?|days?|hours?|minutes?|min|seconds?|sec|sunday|sun\\.?|monday|mon\\.?|tuesday|tue\\.?|wednesday|wed\\.?|thursday|thu\\.?|friday|fri\\.?|saturday|sat\\.?))(\\sago)?","gi"))))return!1;for(u=0,l=r.length;u<l;u++)if(!y(r[u]))return!1;return s.getTime()/1e3},e.lib.is=function(e,t){var i=Object.prototype.toString.call(t).slice(8,-1);return null!=t&&i===e},e.lib.copy=function(e){var t,i={};for(t in e)i[t]=e[t];return i},e.lib.replaceAll=function(e,t,i){return e.split(t).join(i)},e.lib.chunkArray=function(t,i){var r=[],n=0,a=t.length;if(i<1||!e.lib.is("Array",t))return[];for(;n<a;)r.push(t.slice(n,n+=i));return r},e.lib.round=function(e,t,i){var r,n,a,s;if(t|=0,a=(e*=r=Math.pow(10,t))%1==.5*(s=e>0|-(e<0)),n=Math.floor(e),a)switch(i){case"PHP_ROUND_HALF_DOWN":e=n+(s<0);break;case"PHP_ROUND_HALF_EVEN":e=n+n%2*s;break;case"PHP_ROUND_HALF_ODD":e=n+!(n%2);break;default:e=n+(s>0)}return(a?e:Math.round(e))/r},e.lib.max=function(){var e,t,i,r=0,n=arguments,a=n.length,s=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},o=function(e,t){var i=0,r=0,n=0,a=0,p=0;if(e===t)return 0;if("object"==typeof e){if("object"==typeof t){if(e=s(e),t=s(t),p=e.length,(a=t.length)>p)return 1;if(a<p)return-1;for(i=0,r=p;i<r;++i){if(1==(n=o(e[i],t[i])))return 1;if(-1==n)return-1}return 0}return-1}return"object"==typeof t?1:isNaN(t)&&!isNaN(e)?0==e?0:e<0?1:-1:isNaN(e)&&!isNaN(t)?0==t?0:t>0?1:-1:t==e?0:t>e?1:-1};if(0===a)throw new Error("At least one value should be passed to max()");if(1===a){if("object"!=typeof n[0])throw new Error("Wrong parameter count for max()");if(0===(e=s(n[0])).length)throw new Error("Array must contain at least one element for max()")}else e=n;for(t=e[0],r=1,i=e.length;r<i;++r)1==o(t,e[r])&&(t=e[r]);return t},e.lib.min=function(){var e,t,i,r=0,n=arguments,a=n.length,s=function(e){if("[object Array]"===Object.prototype.toString.call(e))return e;var t=[];for(var i in e)e.hasOwnProperty(i)&&t.push(e[i]);return t},o=function(e,t){var i=0,r=0,n=0,a=0,p=0;if(e===t)return 0;if("object"==typeof e){if("object"==typeof t){if(e=s(e),t=s(t),p=e.length,(a=t.length)>p)return 1;if(a<p)return-1;for(i=0,r=p;i<r;++i){if(1==(n=o(e[i],t[i])))return 1;if(-1==n)return-1}return 0}return-1}return"object"==typeof t?1:isNaN(t)&&!isNaN(e)?0==e?0:e<0?1:-1:isNaN(e)&&!isNaN(t)?0==t?0:t>0?1:-1:t==e?0:t>e?1:-1};if(0===a)throw new Error("At least one value should be passed to min()");if(1===a){if("object"!=typeof n[0])throw new Error("Wrong parameter count for min()");if(0===(e=s(n[0])).length)throw new Error("Array must contain at least one element for min()")}else e=n;for(t=e[0],r=1,i=e.length;r<i;++r)-1==o(t,e[r])&&(t=e[r]);return t},e}(a||{}))||{}))||{}))||{}))||{}))||{}))||{}))||{}))||{}))||{});void 0!==n&&n.declare?n.declare([],function(e,t,i){for(key in a.exports)a.exports.hasOwnProperty(key)&&(t[key]=a.exports[key])}):void 0===(r=function(){return a.exports}.call(t,i,t,n))||(n.exports=r)}).call(t,"/",i(2)(e))},function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children=[],e.webpackPolyfill=1),e}},function(e,t){},function(e,t,i){(function(e){function i(e,t){for(var i=0,r=e.length-1;r>=0;r--){var n=e[r];"."===n?e.splice(r,1):".."===n?(e.splice(r,1),i++):i&&(e.splice(r,1),i--)}if(t)for(;i--;i)e.unshift("..");return e}var r=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,n=function(e){return r.exec(e).slice(1)};function a(e,t){if(e.filter)return e.filter(t);for(var i=[],r=0;r<e.length;r++)t(e[r],r,e)&&i.push(e[r]);return i}t.resolve=function(){for(var t="",r=!1,n=arguments.length-1;n>=-1&&!r;n--){var s=n>=0?arguments[n]:e.cwd();if("string"!=typeof s)throw new TypeError("Arguments to path.resolve must be strings");s&&(t=s+"/"+t,r="/"===s.charAt(0))}return(r?"/":"")+(t=i(a(t.split("/"),function(e){return!!e}),!r).join("/"))||"."},t.normalize=function(e){var r=t.isAbsolute(e),n="/"===s(e,-1);return(e=i(a(e.split("/"),function(e){return!!e}),!r).join("/"))||r||(e="."),e&&n&&(e+="/"),(r?"/":"")+e},t.isAbsolute=function(e){return"/"===e.charAt(0)},t.join=function(){var e=Array.prototype.slice.call(arguments,0);return t.normalize(a(e,function(e,t){if("string"!=typeof e)throw new TypeError("Arguments to path.join must be strings");return e}).join("/"))},t.relative=function(e,i){function r(e){for(var t=0;t<e.length&&""===e[t];t++);for(var i=e.length-1;i>=0&&""===e[i];i--);return t>i?[]:e.slice(t,i-t+1)}e=t.resolve(e).substr(1),i=t.resolve(i).substr(1);for(var n=r(e.split("/")),a=r(i.split("/")),s=Math.min(n.length,a.length),o=s,p=0;p<s;p++)if(n[p]!==a[p]){o=p;break}var l=[];for(p=o;p<n.length;p++)l.push("..");return(l=l.concat(a.slice(o))).join("/")},t.sep="/",t.delimiter=":",t.dirname=function(e){var t=n(e),i=t[0],r=t[1];return i||r?(r&&(r=r.substr(0,r.length-1)),i+r):"."},t.basename=function(e,t){var i=n(e)[2];return t&&i.substr(-1*t.length)===t&&(i=i.substr(0,i.length-t.length)),i},t.extname=function(e){return n(e)[3]};var s="b"==="ab".substr(-1)?function(e,t,i){return e.substr(t,i)}:function(e,t,i){return t<0&&(t=e.length+t),e.substr(t,i)}}).call(t,i(5))},function(e,t){var i,r,n=e.exports={};function a(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function o(e){if(i===setTimeout)return setTimeout(e,0);if((i===a||!i)&&setTimeout)return i=setTimeout,setTimeout(e,0);try{return i(e,0)}catch(t){try{return i.call(null,e,0)}catch(t){return i.call(this,e,0)}}}!function(){try{i="function"==typeof setTimeout?setTimeout:a}catch(e){i=a}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var p,l=[],c=!1,u=-1;function y(){c&&p&&(c=!1,p.length?l=p.concat(l):u=-1,l.length&&d())}function d(){if(!c){var e=o(y);c=!0;for(var t=l.length;t;){for(p=l,l=[];++u<t;)p&&p[u].run();u=-1,t=l.length}p=null,c=!1,function(e){if(r===clearTimeout)return clearTimeout(e);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(e);try{r(e)}catch(t){try{return r.call(null,e)}catch(t){return r.call(this,e)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}n.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var i=1;i<arguments.length;i++)t[i-1]=arguments[i];l.push(new h(e,t)),1!==l.length||c||o(d)},h.prototype.run=function(){this.fun.apply(null,this.array)},n.title="browser",n.browser=!0,n.env={},n.argv=[],n.version="",n.versions={},n.on=g,n.addListener=g,n.once=g,n.off=g,n.removeListener=g,n.removeAllListeners=g,n.emit=g,n.prependListener=g,n.prependOnceListener=g,n.listeners=function(e){return[]},n.binding=function(e){throw new Error("process.binding is not supported")},n.cwd=function(){return"/"},n.chdir=function(e){throw new Error("process.chdir is not supported")},n.umask=function(){return 0}},function(e,t,i){var r={"./editLink.twig":7,"./umiAppView.twig":8,"./umiDataTableRow.twig":9,"./umiInLineControl.twig":10,"./umiTableChildWrapper.twig":11,"./umiTableEmpty.twig":12,"./umiTableHeader.twig":13,"./umiTablePageNavigationBar.twig":14,"./umiToolbarTemplate.twig":15};function n(e){return i(a(e))}function a(e){return r[e]||function(){throw new Error("Cannot find module '"+e+"'.")}()}n.keys=function(){return Object.keys(r)},n.resolve=a,e.exports=n,n.id=6},function(e,t,i){var r=(0,i(1).twig)({id:"89e5e26e493a81833c0109cc2813e4e0598b8c8610b2b864673a00cc4df4d3b1f2d50b84686525e81caf723e84f29b04cd0568c93d3fb64391801d1cdd645a23",data:[{type:"output",stack:[{type:"Twig.expression.type.variable",value:"pre_lang",match:["pre_lang"]}]},{type:"raw",value:"/admin/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"module",match:["module"]}]},{type:"raw",value:"/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"method",match:["method"]}]},{type:"raw",value:"/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:"/"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"params",match:["params"]},{type:"Twig.expression.type.string",value:"?type="},{type:"Twig.expression.type.variable",value:"params",match:["params"]},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:"\n"}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return r.render(e)}},function(e,t,i){var r=(0,i(1).twig)({id:"381b6b71ba8d25ed6c8fe49cb6347ccd2fed352d3786ede4463f0acd3d2f16b8bb5f852131eac14fd214f404e5a46b27f0b8c0b420cffdb8d5ea4943a9918c3a",data:[{type:"raw",value:'<div class="location" style="position: static !important;">\n    <div class="row" id="udcToolbar"> </div>\n    <div class="save_size"> </div>\n    <div class="loc-right">\n        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"domainsList",match:["domainsList"]}],output:[{type:"raw",value:'            <div class="domains_selector">\n                <select class="default newselect">\n                    '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"domain",expression:[{type:"Twig.expression.type.variable",value:"domainsList",match:["domainsList"]}],output:[{type:"raw",value:'                        <option value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"domain",match:["domain"]},{type:"Twig.expression.type.key.period",key:"id"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"domain",match:["domain"]},{type:"Twig.expression.type.key.period",key:"host"}]},{type:"raw",value:"</option>\n                    "}]}},{type:"raw",value:"                </select>\n            </div>\n        "}]}},{type:"raw",value:'    </div>\n</div>\n<div style="width: 100%;" class="tableItemContainer location" >\n    <div class="overflow overflow-block">\n        <table id="udcControl" class="table allowContextMenu notextselect" style="table-layout: fixed; position: relative;">\n            <thead id="udcControlHeader"></thead>\n            <tbody id="udcControlBody"></tbody>\n        </table>\n    </div>\n</div>\n'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"limits",match:["limits"]}],output:[{type:"raw",value:'    <div class="location">\n        <div id="udcConfigBar" class="paging panel-sorting loc-right">\n            <span>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-label-elements-per-page"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>\n            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"limit",expression:[{type:"Twig.expression.type.variable",value:"limits",match:["limits"]}],output:[{type:"raw",value:'                <a class="per_page_limit '},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"limit",match:["limit"]},{type:"Twig.expression.type.variable",value:"current",match:["current"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:"current"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"limit",match:["limit"]}]},{type:"raw",value:"</a>\n            "}]}},{type:"raw",value:"        </div>\n    </div>\n"}]}}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return r.render(e)}},function(e,t,i){var r=(0,i(1).twig)({id:"ae3c49fde43934d02b79e21964ab1e2f833e2fcc12b186cc95eac62dae61149c9c6e78d444f9e6e40a3200b30d42d105b74b9b1c320669e4d79d2b7ec89330b6",data:[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"    "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"item",expression:[{type:"Twig.expression.type.variable",value:"used_fields",match:["used_fields"]}],output:[{type:"raw",value:'        <td style="width:'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"size"},{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"size"},{type:"Twig.expression.type.string",value:"auto"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:';"  class="table-cell td_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'" >\n            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"editable"},{type:"Twig.expression.type.string",value:"false"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type._function",fn:"isDefined",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}],output:[{type:"raw",value:'                        <i class="small-ico i-change editable" title="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-table-control-fast-edit"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'"></i>\n                '}]}},{type:"raw",value:"\n            "}]}},{type:"raw",value:'            <div class="cell-item">\n                '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"index0"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.period",key:"__children"},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'                        <span class="catalog-toggle-wrapper ex_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"cid",match:["cid"]}]},{type:"raw",value:'"><span class="catalog-toggle"></span></span>\n                    '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                        <span class="catalog-toggle-off ndc"></span>\n                    '}]}},{type:"raw",value:"                    "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"selectable"},{type:"Twig.expression.type.string",value:"false"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:'                        <div class="checkbox"><input type="checkbox" class="row_selector"></div>\n                    '}]}},{type:"raw",value:"                "}]}},{type:"raw",value:"\t\t\t\t"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"multiple_image"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'\t\t\t\t\t<span class="item" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:'">\n\t\t\t\t\t\t'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"multipleImageField",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"\n\t\t\t\t"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"multiple_file"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'\t\t\t\t\t<span class="item" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:'">\n\t\t\t\t\t\t'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"multipleFileField",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"\n\t\t\t\t"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"wysiwyg"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'\t\t\t\t\t<span class="item" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:'">\n\t\t\t\t\t\t'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"textWysiwygField",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"\n\t\t\t\t"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"symlink"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'\t\t\t\t\t<span class="item" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:'">\n\t\t\t\t\t\t'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"textSymlinkField",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"\n\t\t\t\t"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"relation"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'\t\t\t\t\t<span class="item" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:'">\n\t\t\t\t\t\t'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"relationField",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"\n\t\t\t\t"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'\t\t\t\t\t<span class="item" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]}]},{type:"raw",value:'">\n\t\t\t\t\t'},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"bool"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:"\t\t\t\t\t\t"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'\t\t\t\t\t\t\t<img src="/styles/skins/modern/design/img/tree/checked.png" style="width:13px;height:13px;" alt="">\n\t\t\t\t\t\t'}]}},{type:"raw",value:"\t\t\t\t\t"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.string",value:"image"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"photo"},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:"\t\t\t\t\t\t"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"imageField",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"\n\t\t\t\t\t"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.string",value:"file"},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:"\t\t\t\t\t\t"},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"fileField",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"\n\t\t\t\t\t"}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"\t\t\t\t\t\t"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"fields",match:["fields"]},{type:"Twig.expression.type.key.brackets",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"field"}]}]},{type:"raw",value:"\n\t\t\t\t\t"}]}},{type:"raw",value:"                "}]}},{type:"raw",value:"\t\t\t\t</span>\n\t\t\t\t"},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"loop",match:["loop"]},{type:"Twig.expression.type.key.period",key:"first"},{type:"Twig.expression.type.variable",value:"item",match:["item"]},{type:"Twig.expression.type.key.period",key:"show_edit_page_link"},{type:"Twig.expression.type.string",value:"false"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'\t\t\t\t\t<a class="small-ico i-edit editable stucktotext" title="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-goto-edit-page"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" href="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"editLink",match:["editLink"]}]},{type:"raw",value:'"></a>\n\t\t\t\t'}]}},{type:"raw",value:"            </div>\n\n        </td>\n    "}]}},{type:"raw",value:'    <td class="table-cell empty">\n        <div class="cell-item">&nbsp;</div>\n    </td>\n'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'    <td class="table-cell" style="height: 100px; vertical-align: middle;" colspan="'},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"used_fields",match:["used_fields"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]}]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"+",precidence:6,associativity:"leftToRight",operator:"+"}]},{type:"raw",value:'">\n        <div class="cell-item" style="text-align: center;">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-table-control-nodata"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</div>\n    </td>\n"}]}}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return r.render(e)}},function(e,t,i){var r=(0,i(1).twig)({id:"28d35ac922bdcbee80d3dfbb8fb3e20ebcde20cb6ae787bd023a8357afb511793b5899e4679cd3bd077dc8c6fda9414ab7e2bbfacd7a63d8e7356eb3a2090f9f",data:[{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"bool"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <input type="checkbox" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.string",value:'checked="checked"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:" />\n"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"relation"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <div class="layout-col-control quick selectize-container">\n        <select '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"multiple"},{type:"Twig.expression.type.bool",value:!0},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:'multiple="multiple" style="height: 62px;"'},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:">\n            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"option",expression:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"options"}],output:[{type:"raw",value:'                <option value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.filter",value:"escape",match:["|escape","escape"]}]},{type:"raw",value:'" '},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.variable",value:"option",match:["option"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.string",value:' selected="selected" '},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:">"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"option",match:["option"]}]},{type:"raw",value:"</option>\n            "}]}},{type:"raw",value:"        </select>\n    </div>\n"}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.string",value:"image"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"file"},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:'    <div class="layout-row-icon">\n        <div class="layout-col-control">\n            <input type="text" class="default" value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.filter",value:"escape",match:["|escape","escape"]}]},{type:"raw",value:'"  id="inline_edit_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n        </div>\n        <div class="layout-col-icon">\n            <a class="icon-action"><i class="small-ico i-choose"></i></a>\n        </div>\n    </div>\n'}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"date"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <input type="text" class="default" value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.filter",value:"escape",match:["|escape","escape"]}]},{type:"raw",value:'" placeholder="dd.mm.yyyy" id="inline_edit_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n'}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"time"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <input type="text" class="default" value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.filter",value:"escape",match:["|escape","escape"]}]},{type:"raw",value:'" placeholder="hh:mm" id="inline_edit_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n'}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"datetime"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'    <input type="text" class="default" value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.filter",value:"escape",match:["|escape","escape"]}]},{type:"raw",value:'" placeholder="dd.mm.yyyy hh:mm" id="inline_edit_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n'}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.string",value:"multiple_image"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"multiple_file"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"text"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"wysiwyg"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"symlink"},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:'    <input type="text" class="default hide" value="" id="inline_edit_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'"/>\n'}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'    <input type="text" class="default" value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"val",match:["val"]},{type:"Twig.expression.type.filter",value:"escape",match:["|escape","escape"]}]},{type:"raw",value:'" id="inline_edit_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"conf",match:["conf"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n'}]}}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return r.render(e)}},function(e,t,i){var r=(0,i(1).twig)({id:"58fe59b5ea220de7642c9638e9fae767e553ab21f8670241c8f30928b91ab41fbd59cfa7bba878f3d9fdb47d1c2c8d16b41aa374057ba567d9751135e9c00311",data:[{type:"raw",value:'<tr id="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'" class="umiDC"><td colspan="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"col_count",match:["col_count"]}]},{type:"raw",value:'" class="ch_wrapper"><table class="table table-bordered"><tbody id="ch_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"id",match:["id"]}]},{type:"raw",value:'"></tbody></table></td></tr>'}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return r.render(e)}},function(e,t,i){var r=(0,i(1).twig)({id:"2c64c87263a7cceecf10fc0ab7a45368c723449d6e8cf5f3e1ade8943d4b7ef4c41c808e859a3f953fb8011667135813f129ed2e155e142fd37a1633af93202d",data:[{type:"raw",value:'<td class="table-cell" colspan="'},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"used_fields",match:["used_fields"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]}]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"+",precidence:6,associativity:"leftToRight",operator:"+"}]},{type:"raw",value:'">\n    <div class="cell-item">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-table-control-nodata"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</div>\n</td>"}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return r.render(e)}},function(e,t,i){var r=(0,i(1).twig)({id:"9ee3bce4b42308bb0f27434fb1d0045d25e7ae10306864bdc39f80c2f67f6f4a254068cdf9440b67c0896ded3c537ef7b29bbafa8e78ac2d016ead7ef0c3d51a",data:[{type:"raw",value:'<tr class="table-row title">\n    '},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"field",expression:[{type:"Twig.expression.type.variable",value:"fields",match:["fields"]}],output:[{type:"raw",value:"        <th "},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"size"},{type:"Twig.expression.type.string",value:'style="width:'},{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"size"},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:';"'},{type:"Twig.expression.type.operator.binary",value:"~",precidence:6,associativity:"leftToRight",operator:"~"},{type:"Twig.expression.type.string",value:""},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:' class="table-cell" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'">\n            <span></span>\n            '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"sortable"},{type:"Twig.expression.type.string",value:"false"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:'                <div class="table-title disabled" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</div>\n            "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                <div class="table-title-no-order disabled" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'" title="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"title"}]},{type:"raw",value:"</div>\n            "}]}},{type:"raw",value:"            "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"filterable"},{type:"Twig.expression.type.string",value:"false"},{type:"Twig.expression.type.operator.binary",value:"!=",precidence:9,associativity:"leftToRight",operator:"!="}],output:[{type:"raw",value:'                <div class="input-search" style="overflow: visible;">\n                    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"bool"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                        <select class="default t-filter-select" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'">\n                            <option value="-1">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-all"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</option>\n                            <option value="1">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-value-yes"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</option>\n                            <option value="0">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-value-no"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</option>\n                        </select>\n                    "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.array.start",value:"[",match:["["]},{type:"Twig.expression.type.string",value:"image"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"photo"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"file"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"multiple_image"},{type:"Twig.expression.type.comma"},{type:"Twig.expression.type.string",value:"multiple_file"},{type:"Twig.expression.type.array.end",value:"]",match:["]"]},{type:"Twig.expression.type.operator.binary",value:"in",precidence:20,associativity:"leftToRight",operator:"in"}],output:[{type:"raw",value:'                        <select class="default t-filter-select" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'">\n                            <option value="-1">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-all"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</option>\n                            <option value="1">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-value-file-yes"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'</option>\n                            <option value="0">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-value-no"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</option>\n                        </select>\n                    "}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"date"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                        <input type="text" class="fcStringInput default" placeholder="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-date-placeholder"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n                    '}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"time"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                        <input type="text" class="fcStringInput default" placeholder="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-time-placeholder"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n                    '}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"datetime"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                        <input type="text" class="fcStringInput default" placeholder="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-date-time-placeholder"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'" umi-type="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"}]},{type:"raw",value:'"/>\n                    '}]}},{type:"logic",token:{type:"Twig.logic.type.elseif",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"type"},{type:"Twig.expression.type.string",value:"relation"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="},{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"options"},{type:"Twig.expression.type.operator.binary",value:"and",precidence:13,associativity:"leftToRight",operator:"and"}],output:[{type:"raw",value:'                        <select class="default t-filter-select" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'">\n                            <option value="-1" selected>'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-all"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</option>\n                            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"item",expression:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"options"}],output:[{type:"raw",value:'                                <option value="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]}]},{type:"raw",value:'">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"item",match:["item"]}]},{type:"raw",value:"</option>\n                            "}]}},{type:"raw",value:"                        </select>\n                    "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'                    <input type="text" placeholder="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-field-search"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'" class="fcStringInput default" umi-field="'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'"/>\n                    '}]}},{type:"raw",value:"                </div>\n            "}]}},{type:"raw",value:"        </th>\n    "}]}},{type:"raw",value:'    <th class="table-cell plus" style="width: 100%; text-align: left; vertical-align: middle;" title="'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-add-column"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:'">\n        '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"countFields",match:["countFields"]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:'            <i class="small-ico i-add pointer cols_controler" ></i>\n        '}]}},{type:"raw",value:"    </th>\n</tr>\n"}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return r.render(e)}},function(e,t,i){var r=(0,i(1).twig)({id:"10a8998beb17999aa942ece4b95fe5d5d6a7814b92eb5b0034cc2964216aea69a75a1a5083256db908ca335352fee9a57c47c601e5dfd65a3640d4187bd33b78",data:[{type:"raw",value:'<tr class="table-row">\n    '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"fieldList",match:["fieldList"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]},{type:"Twig.expression.type.number",value:0,match:["0",null]},{type:"Twig.expression.type.operator.binary",value:">",precidence:8,associativity:"leftToRight",operator:">"}],output:[{type:"raw",value:"        "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"field",expression:[{type:"Twig.expression.type.variable",value:"fieldList",match:["fieldList"]}],output:[{type:"raw",value:'            <td style="width:'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"size"},{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"size"},{type:"Twig.expression.type.string",value:"auto"},{type:"Twig.expression.type.operator.binary",value:"?",precidence:16,associativity:"rightToLeft",operator:"?"}]},{type:"raw",value:';" class="pages-bar table-cell panel-sorting td_'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"}]},{type:"raw",value:'">\n                '},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"firstField",match:["firstField"]},{type:"Twig.expression.type.key.period",key:"field"},{type:"Twig.expression.type.variable",value:"field",match:["field"]},{type:"Twig.expression.type.key.period",key:"field"},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                    <span class="pagesLabel">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-pages-label"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>\n                    "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"page",expression:[{type:"Twig.expression.type.variable",value:"pageList",match:["pageList"]}],output:[{type:"raw",value:"                        "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"page",match:["page"]},{type:"Twig.expression.type.variable",value:"current",match:["current"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                            <a class="current">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"page",match:["page"]}]},{type:"raw",value:"</a>\n                        "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                            <a>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"page",match:["page"]}]},{type:"raw",value:"</a>\n                        "}]}},{type:"raw",value:"                    "}]}},{type:"raw",value:"                "}]}},{type:"raw",value:"            </td>\n        "}]}},{type:"raw",value:'        <td class="table-cell empty">\n            <div class="cell-item">&nbsp;</div>\n        </td>\n    '}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:'        <td class="pages-bar table-cell" colspan="'},{type:"output",stack:[{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!0,params:[{type:"Twig.expression.type.variable",value:"fieldList",match:["fieldList"]},{type:"Twig.expression.type.filter",value:"length",match:["|length","length"]}]},{type:"Twig.expression.type.number",value:1,match:["1",null]},{type:"Twig.expression.type.operator.binary",value:"+",precidence:6,associativity:"leftToRight",operator:"+"}]},{type:"raw",value:'">\n            <span class="pagesLabel">'},{type:"output",stack:[{type:"Twig.expression.type._function",fn:"trans",params:[{type:"Twig.expression.type.parameter.start",value:"(",match:["("]},{type:"Twig.expression.type.string",value:"js-pages-label"},{type:"Twig.expression.type.parameter.end",value:")",match:[")"],expression:!1}]}]},{type:"raw",value:"</span>\n            "},{type:"logic",token:{type:"Twig.logic.type.for",key_var:null,value_var:"page",expression:[{type:"Twig.expression.type.variable",value:"pageList",match:["pageList"]}],output:[{type:"raw",value:"                "},{type:"logic",token:{type:"Twig.logic.type.if",stack:[{type:"Twig.expression.type.variable",value:"page",match:["page"]},{type:"Twig.expression.type.variable",value:"current",match:["current"]},{type:"Twig.expression.type.operator.binary",value:"==",precidence:9,associativity:"leftToRight",operator:"=="}],output:[{type:"raw",value:'                    <a class="current">'},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"page",match:["page"]}]},{type:"raw",value:"</a>\n                "}]}},{type:"logic",token:{type:"Twig.logic.type.else",match:["else"],output:[{type:"raw",value:"                    <a>"},{type:"output",stack:[{type:"Twig.expression.type.variable",value:"page",match:["page"]}]},{type:"raw",value:"</a>\n                "}]}},{type:"raw",value:"            "}]}},{type:"raw",value:"        </td>\n    "}]}},{type:"raw",value:"</tr>"}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return r.render(e)}},function(e,t,i){var r=(0,i(1).twig)({id:"6ffd7115393f5536da3f9d3170d1993f0020344def89fd6361ff917a83392cb69b6a85f08c880009eeb51f34706f46981dff205c8d3b802f9fe3fd7510f73ca2",data:[{type:"raw",value:'<div class="toolbar pull-left" style="min-height:18px;"></div>'}],allowInlineIncludes:!0,rethrow:!0});e.exports=function(e){return r.render(e)}},function(e,t){var i=Backbone.Marionette.LayoutView.extend({template:"umiAppView.twig",regions:{control:"#udcControlBody",toolbar:"#udcToolbar",controlHeader:"#udcControlHeader"},events:{"click #udcConfigBar a.per_page_limit":"limitChangeHandler","change select":"changeDomainHandler"},onBeforeRender:function(){this.templateHelpers={limits:this.options.pageLimits.length>0&&this.options.pageLimits,current:this.options.perPageLimit,domainsList:this.options.domainsList}},limitChangeHandler:function(e){$("#udcConfigBar a.per_page_limit.current").removeClass("current"),$(e.target).addClass("current"),dc_application.vent.trigger("b:limitchange",$(e.target).text())},changeDomainHandler:function(e){var t=$(e.currentTarget);void 0===t.attr("umi-field")&&dc_application.vent.trigger("domainchange",t.val())}});e.exports=i},function(e,t){var i=Backbone.Model.extend({configUrl:"",initialize:function(e){this.configUrl=e.configUrl},fetch:function(){var e=this;return $.ajax(this.configUrl,{dataType:"json"}).then(function(t){if(!_.isEmpty(t)){var i=t.default,r=[];i.length>0&&(i=i.split("|"),_.each(i,function(e){e=e.split("["),r.push({field:e[0],size:e[1].split("]")[0]})}),e.set({def:r}));var n=t.methods;n.length>0&&_.each(n,function(t){e.set(t.type+"_method",t.name),e.set(t.type+"_module",t.module)}),_.isUndefined(e.get("saveField_method"))||e.set({save_field_method:e.get("saveField_method")}),r=[];var a=t.excludes;_.isEmpty(a)||(_.each(a,function(e){r.push(e.name)}),e.set({fields_excluded:r})),r={};var s=t.fields;s.length>0&&(_.each(s,function(e){_.isUndefined(e.options)||(e.options=e.options.split(",")),r[e.name]=e}),e.set({fields:r}));var o="tree-"+e.get("load_module")+"-"+e.get("load_method");t["column-order-key"]&&(o=t["column-order-key"]),e.set("column_order_key",o)}},function(e,t,i){console.error(e,t,i)})}});e.exports=i},function(e,t){var i=Backbone.Model.extend({user_setings_url:"/udata/users/loadUserSettings/?r="+Math.random(),fetch:function(){var e=this;return $.ajax(e.user_setings_url).then(function(t){var i={};if((t=$(t).find("item")).length>0)for(var r=0,n=t.length;r<n;r++){var a=$(t[r]),s={},o=a.find("value");i={};for(var p=0,l=o.length;p<l;p++){var c=$(o[p]),u=c.attr("tag");if("used-columns"==u){s=[];var y=c.text().split("|");if(y.length>0)for(var d=0,h=y.length;d<h;d++){var g=y[d].split("[");s.push({field:g[0],size:g[1].split("]")[0]})}i[u]=s}else if("expanded"==u){var f=c.text();f=(f=f.substr(1)).substr(0,f.length-1),i[u]=f.split("}{")}else i[u]=c.text()}e.set(a.attr("key"),i)}})},sync:function(){console.log(arguments)},save:function(e,t,i){var r="/admin/users/saveUserSettings/?key="+e+"&value="+t;return i&&(r+="&tags[]="+i),this.set(e,t),$.ajax(r)}});e.exports=i},function(e,t){e.exports=function(e){var t=e||{};this.AllText=[],this.Props={},this.EntIDs=[],this.Parents=t.parent||[],this.Langs=t.lang||[],this.Domains=t.domain||[],this.Orders={},this.Perms=!0,this.Full=!0,this.FldsOr=!1,this.Depth=null,this.Page=t.page||0,this.Limit=t.limit,this.hTypes=[],this.oTypes=[],this.setAllTextSearch=function(e){if(e instanceof Array){if(this.AllText.join()==e.join())return;this.AllText.length?this.AllText=this.AllText.concat(e):this.AllText=e}else this.AllText.push(e)},this.setHTypes=function(e){e instanceof Array?this.hTypes=e:this.hTypes.push(e)},this.setPropertyEqual=function(e,t){null==this.Props[e]&&(this.Props[e]={}),this.Props[e].eq=t},this.setPropertyNotEqual=function(e,t){null==this.Props[e]&&(this.Props[e]={}),this.Props[e].ne=t},this.setPropertyLike=function(e,t){null==this.Props[e]&&(this.Props[e]={}),this.Props[e].like=t},this.setPropertyLess=function(e,t){null==this.Props[e]&&(this.Props[e]={}),this.Props[e].lt=t},this.setPropertyGreater=function(e,t){null==this.Props[e]&&(this.Props[e]={}),this.Props[e].gt=t},this.setPropertyBetween=function(e,t,i){null==this.Props[e]&&(this.Props[e]={}),this.Props[e].gt=t,this.Props[e].lt=i},this.removeProperty=function(e){this.Props[e]=void 0},this.hasPropertyFilter=function(){return Object.keys(this.Props).length>0},this.resetPropertyFilter=function(){this.Props={}},this.addOrder=function(e,t){var i=!0;null==t||!1!==t&&"DESC"!=t.toUpperCase()&&"BACKWARD"!=t.toUpperCase()||(i=!1),this.Orders[e]=i},this.setOrder=function(e,t){var i=!0;null==t||!1!==t&&"DESC"!=t.toUpperCase()&&"BACKWARD"!=t.toUpperCase()||(i=!1),this.Orders={},this.Orders[e]=i},this.hasPropertyOrder=function(){return Object.keys(this.Orders).length>0},this.resetPropertyOrder=function(){this.Orders={}},this.setPermissions=function(e){this.Perms=null==e||!!e},this.setParentElements=function(e){_.isArray(e)?this.Parents=e:this.Parents=[e]},this.setDepth=function(e){void 0!==e&&(this.Depth=parseInt(e))},this.setEntityIDs=function(e){e instanceof Array?this.EntIDs=e:this.EntIDs.push(e)},this.setDomain=function(e){e=_.isArray(e)?e:[e],this.Domains=e},this.setLang=function(e){e instanceof Array?this.Langs=e:this.Langs.push(e)},this.setHtypes=function(e){e instanceof Array?this.hTypes=e:this.hTypes.push(e)},this.setOtypes=function(e){e instanceof Array?this.oTypes=e:this.oTypes.push(e)},this.setVirtualCopyChecking=function(e){this.CheckVirtual=void 0===e||!!e},this.setViewMode=function(e){this.Full=void 0===e||!!e},this.setConditionModeOr=function(e){this.FldsOr=void 0===e||!!e},this.getParents=function(){return this.Parents},this.setPage=function(e){this.Page=parseInt(e)},this.getPage=function(){return this.Page},this.setLimit=function(e){this.Limit=parseInt(e)},this.getLimit=function(){return this.Limit},this.getQueryString=function(e){var t=[],i=0;if(e instanceof Object){var r={};for(i in e.Props)r[i]=e.Props[i];for(i in this.Props)r[i]=this.Props[i];for(i in r)for(var n in r[i])if(r[i][n]instanceof Array)for(var a=0;a<r[i][n].length;a++)t.push("fields_filter["+i+"]["+n+"][]="+encodeURIComponent(r[i][n][a]));else t.push("fields_filter["+i+"]["+n+"]="+encodeURIComponent(r[i][n]));for(i=0;i<this.AllText.length;i++)t.push("search-all-text[]="+encodeURIComponent(this.AllText[i]));for(i=0;i<e.AllText.length;i++)t.push("search-all-text[]="+encodeURIComponent(e.AllText[i]));for(t.length?(jQuery("#search_result").addClass("active"),jQuery("#search_result").html(getLabel("js-search-result"))):this.Parents.length||e.Parents.length||(jQuery("#search_result").html(""),jQuery("#search_result").removeClass("active")),i=0;i<this.EntIDs.length;i++)t.push("id[]="+this.EntIDs[i]);for(i=0;i<e.EntIDs.length;i++)t.push("id[]="+e.EntIDs[i]);for(i=0;i<this.Parents.length;i++)t.push("rel[]="+this.Parents[i]);for(i=0;i<e.Parents.length;i++)t.push("rel[]="+e.Parents[i]);for(i=0;i<this.hTypes.length;i++)t.push("hierarchy_types[]="+this.hTypes[i]);for(i=0;i<this.Domains.length;i++)t.push("domain_id[]="+this.Domains[i]);for(i=0;i<e.Domains.length;i++)t.push("domain_id[]="+e.Domains[i]);for(i=0;i<this.Langs.length;i++)t.push("lang_id[]="+this.Langs[i]);for(i=0;i<e.Langs.length;i++)t.push("lang_id[]="+e.Langs[i]);for(i=0;i<e.oTypes.length;i++)t.push("object_type[]="+e.oTypes[i]);for(i in r={},e.Orders)r[i]=e.Orders[i];for(i in this.Orders)r[i]=this.Orders[i];for(i in r)t.push("order_filter["+i+"]="+(r[i]?"asc":"desc"));null!==this.Perms&&(this.Perms?t.push("permissions"):e.Perms&&t.push("permissions")),null!==this.CheckVirtual&&(this.CheckVirtual?t.push("virtuals"):e.CheckVirtual&&t.push("virtuals")),null!==this.Depth?t.push("depth="+this.Depth):null!==e.Depth&&t.push("depth="+e.Depth),null!==this.Page?t.push("p="+this.Page):null!==e.Page&&t.push("p="+e.Page),null!==this.Limit?t.push("per_page_limit="+this.Limit):null!==e.Limit&&t.push("per_page_limit="+e.Limit),(this.FldsOr||e.FldsOd)&&t.push("or-mode"),(this.Full||e.Full)&&t.push("viewMode=full")}else{for(i in this.Props)for(var n in this.Props[i])if(this.Props[i][n]instanceof Array)for(a=0;a<this.Props[i][n].length;a++)t.push("fields_filter["+i+"]["+n+"][]="+encodeURIComponent(this.Props[i][n][a]));else t.push("fields_filter["+i+"]["+n+"]="+encodeURIComponent(this.Props[i][n]));for(i=0;i<this.AllText.length;i++)t.push("search-all-text[]="+encodeURIComponent(this.AllText[i]));for(i=0;i<this.EntIDs.length;i++)t.push("id[]="+this.EntIDs[i]);for(i=0;i<this.Parents.length;i++)t.push("rel[]="+this.Parents[i]);for(i=0;i<this.Domains.length;i++)t.push("domain_id[]="+this.Domains[i]);for(i=0;i<this.Langs.length;i++)t.push("lang_id[]="+this.Langs[i]);for(i in this.Orders)t.push("order_filter["+i+"]="+(this.Orders[i]?"asc":"desc"));this.Perms&&t.push("permissions"),this.CheckVirtual&&t.push("virtuals"),null!==this.Depth&&t.push("depth="+this.Depth),null!==this.Page&&t.push("p="+this.Page),null!==this.Limit&&t.push("per_page_limit="+this.Limit),this.FldsOr&&t.push("or-mode"),this.Full&&t.push("viewMode=full")}return t.push("childs"),t.push("links"),t.push("templates"),"?"+t.join("&")},this.clear=function(){this.AllText=[],this.Props={},this.EntIDs=[],this.Parents=[],this.Langs=[],this.Domains=[],this.Orders={},this.Perms=!0,this.Depth=null,this.Page=null,this.Limit=null,this.Full=!0,this.FldsOr=!1,this.CheckVirtual=null},this.empty=function(){var e=0,t=0;for(var i in this.Props)if(++e)break;for(var i in this.Orders)if(++t)break;return!this.AllText.length&&!this.EntIDs.length&&!this.Parents.length&&!this.Langs.length&&!this.Domains.length&&!e&&!t&&this.Perms&&this.Full&&!this.Depth&&!this.Page&&!this.FldsOr&&!this.CheckVirtual},this.clone=function(){return _.clone(this)}}},function(e,t){var i=Backbone.RelationalModel.extend({relations:[{type:Backbone.HasMany,key:"children",relatedModel:i,collectionType:r,reverseRelation:{key:"group_parent",includeInJSON:"_id"}}],defaults:{__children:0},selected:!1,expanded:!1,select:function(e){var t=!_.isUndefined(e)&&e;this.selected=!this.selected,this.trigger("d:select:change",t)}}),r=Backbone.Collection.extend({model:i,loadMethod:"",prefix:"",dataProtocol:"json",qb:null,offset:0,limit:0,total:0,sync:function(){},initialize:function(e){this.loadMethod=e.loadMethod||"",this.prefix=e.prefix||"",this.dataProtocol=e.dataProtocol||"json",this.qb=e.qb||null},loadData:function(e){var t=this;return $.getJSON(this.queryBuilder(e)).then(function(i){var r=[];if(t.offset=parseInt(i.data.offset)||0,t.limit=parseInt(i.data.per_page_limit)||0,t.total=parseInt(i.data.total)||0,null==i.error&&null==i.data.error)for(var n=0,a=(r=_.toArray(_.omit(i.data,["total","type","action","offset","per_page_limit"]))).length;n<a;n++)r[n].id=e+"_"+r[n].id;else{var s=i.error||i.data.error;openDialog(s,getLabel("js-error-header")),r=[]}return r})},fetch:function(e){var t=this;return e=e||0,this.loadData(e).then(function(e){t.reset(e)})},filter:function(e){for(var t=[],i=0,r=this.length;i<r;i++){for(var n=this.models[i],a=n.get(e[0].field),s=!!(void 0!==a&&a.indexOf(e[0].value)>-1),o=1,p=e.length;o<p;o++)a=n.get(e[o].field),s=s&&!!(void 0!==a&&a.indexOf(e[o].value)>-1);s&&t.push(_.omit(n.toJSON(),"ch","level"));var l=n.get("children");if(void 0!==l&&void 0!==l.length&&l.length>0){var c=l.filter(e);t=t.concat(c)}}return t},getSelected:function(){for(var e=[],t=0,i=this.length;t<i;t++){var r=this.models[t];if(r.selected&&e.push(r),r.expanded){var n=r.get("children");if(void 0!==n&&void 0!==n.length&&n.length>0){var a=n.getSelected();a.length>0&&(e=e.concat(a))}}}return e},processModel:function(e){if(_.isUndefined(e))return!1;for(var t=[],i=0,r=this.length;i<r;i++){var n=this.models[i];if(e.call(n)&&t.push(n),n.expanded){var a=n.get("children");if(void 0!==a&&void 0!==a.length&&a.length>0){var s=a.processModel(e);s.length>0&&(t=t.concat(s))}}}return t},queryBuilder:function(e){return this.qb.setParentElements([]),_.isUndefined(e)||this.qb.setParentElements(dc_application.unPackId(e)),this.prefix+"/"+this.loadMethod+"."+this.dataProtocol+dc_application.assembleQueryString(this.qb)}});e.exports=r},function(e,t,i){var r=Backbone.Marionette.LayoutView.extend({tagName:"thead",events:{"keyup input":"onKeyPressHandler","click .table-title":"orderChange","change select":"filterSelectChange","mousedown span":"resizeHandler","click .cols_controler":"showMenu","mouseout .cols_controler":"hideMenu"},menu:null,onBeforeRender:function(){this.templateHelpers={},this.templateHelpers=this.model.attributes},onRender:function(){_.each($("select",this.$el),function(e){new ControlComboBox({el:$(e)})}),$('input[umi-type="date"]').datepicker({dateFormat:"dd.mm.yy",onSelect:function(){var e=$(this).val(),t=$(this).attr("umi-field"),r=$(this).attr("umi-type"),n=i(22);$(this).removeClass("_error"),e.length>0&&(n.test(r,e)?dc_application.vent.trigger("data:filter",[{field:t,value:e}]):$(this).addClass("_error"))}}),$('input[umi-type="datetime"]').datepicker({dateFormat:"dd.mm.yy 00:00",onSelect:function(){var e=$(this).val(),t=$(this).attr("umi-field"),r=$(this).attr("umi-type"),n=i(22);$(this).removeClass("_error"),e.length>0&&(n.test(r,e)?dc_application.vent.trigger("data:filter",[{field:t,value:e}]):$(this).addClass("_error"))}})},onKeyPressHandler:function(e){var t=$(e.target).val(),r=$(e.target).attr("umi-field"),n=$(this).attr("umi-type"),a=i(22);13==e.keyCode&&t.length>0?a.test(n,t)?dc_application.vent.trigger("data:filter",[{field:r,value:t}]):$(e.target).addClass("_error"):13==e.keyCode&&0==t.length&&($(e.target).removeClass("_error"),dc_application.vent.trigger("data:filter",[{field:r,value:""}]))},resetFilter:function(){var e=$("div.input-search");$("input",e).val(""),$("select option",e).remove(),$("select",e).append('<option value="-1" selected="selected">'+getLabel("js-all")+"</option>"),$("div.select div.selected",e).text(getLabel("js-all"))},orderChange:function(e){var t=$(e.target),i=t.attr("umi-field"),r="asc";t.hasClass("disabled")?($(".table-title:not(.disabled)").removeClass("switch").addClass("disabled"),t.removeClass("disabled")):t.hasClass("switch")?t.removeClass("switch"):(r="desc",t.addClass("switch")),dc_application.vent.trigger("b:orderhange",i,r)},resetOrder:function(){$(".table-title").removeClass("switch").addClass("disabled")},resizeHandler:function(e){var t=this,i=$("<div></div>"),r=this.$el.parent(),n=r.offset(),a=$(e.target).parent();i.addClass("resizer"),i.css({top:n.top,left:e.clientX,height:r.outerHeight()+"px"}),$(document).on("mouseup",function(e){t.resizerMouseUp(i,a)}),$(document).on("mousemove",function(e){t.resizerMouseMove(i,e.clientX)}),$("body").append(i)},resizerMouseUp:function(e,t){$(document).off("mouseup"),$(document).off("mousemove");var i=$(t),r=e.position().left-i.offset().left,n=t.attr("umi-field");if(r=Math.min(r,800),(r=Math.max(r,150))!==i.outerWidth()){i.css({width:r+"px",maxWidth:r+"px"});var a=$("td.td_"+n);a.css({width:r+"px",maxWidth:r+"px"}),this.recalculateValueCellWidth(a)}e.detach(),dc_application.vent.trigger("data:saveusercolls")},recalculateAllValueCellsWidth:function(){var e=this;$("#udcControlBody td.table-cell").each(function(){var t=$(this);e.recalculateValueCellWidth(t)})},recalculateValueCellWidth:function(e){var t=$("span.item",e);t.length&&t.css({width:this.calculateValueCellContainerWidth(e)})},calculateValueCellContainerWidth:function(e){var t=parseInt(e.css("width")),i=$("i.i-change",e),r=i.length?parseInt(i.outerWidth(!0)):18,n=$("span.catalog-toggle-wrapper",e),a=n.length?parseInt(n.outerWidth(!0)):0,s=$("span.catalog-toggle-off",e),o=s.length?parseInt(s.outerWidth(!0)):0,p=$("div.checkbox",e);return t-a-r-o-(p.length?parseInt(p.outerWidth(!0)):0)-parseInt(e.css("padding-left"))-parseInt(e.css("padding-right"))},resizerMouseMove:function(e,t){e.css("left",t)},filterSelectChange:function(e){var t=$(e.target).val();t=-1==t?"":t,dc_application.vent.trigger("data:filter",[{field:$(e.target).attr("umi-field"),value:t}])},showMenu:function(e){null===this.menu&&(this.menu=$.cmenu.getMenu(dc_application.columnsMenu)),$.cmenu.lockHiding=!0,$.cmenu.show(this.menu,$("div.container").get(0),e)},hideMenu:function(){$.cmenu.lockHiding=!1}});e.exports=r},function(e,t){e.exports=new function(){var e={date:/^([0-9]{2}).([0-9]{2}).([0-9]{4})$/,datetime:/^([0-9]{2}).([0-9]{2}).([0-9]{4}) ([0-9]){2}:([0-9]){2}$/,time:/^([0-9]){2}:([0-9]){2}$/,number:/^[0-9eE.,]+$/,integer:/^[0-9eE]+$/};return{test:function(t,i){return!e.hasOwnProperty(t)||e[t].test(i)}}}},function(e,t,i){var r=Marionette.ItemView.extend({tagName:"tr",className:"table-row",template:"umiTableEmpty.twig",dragAllowed:!1,initialize:function(e){this.template=e.template,this.fields=e.fields},onBeforeRender:function(){this.templateHelpers={},this.templateHelpers={name:this.model.get("name"),fields:[],used_fields:this.fields}}}),n=Backbone.Marionette.ItemView.extend({tagName:"tr",className:"table-row",shiftMode:!1,dragAllowed:!1,parent:null,parentView:null,events:{"click .catalog-toggle-wrapper":"expandHandler",click:"clickHandler","click .small-ico.i-change.editable":"enableInLineEdit",mouseover:"mouseMoveHandler"},initialize:function(e){this.template=e.template,this.fields=e.fields,this.dragAllowed=e.dragAllowed,this.parent=e.parent||!1},onBeforeRender:function(){var e=this,t=i(7);this.templateHelpers={},this.templateHelpers={name:!1,fields:this.model.attributes,used_fields:this.fields,cid:this.model.get("id"),editLink:t({pre_lang:window.pre_lang,module:dc_application.config.get("module"),method:dc_application.config.get("edit_method"),id:dc_application.unPackId(this.model.get("id")),params:this.model.get("__type")})},this.model.on("d:select:change",function(t){e.selectChangeHandler.call(e,t)})},onRender:function(){var e,t=this,i="child";this.model.selected=!1,this.dragAllowed&&$("td:first-child",this.$el).draggable({appendTo:"body",distance:7,handle:"span.item",cursorAt:{right:-2},helper:function(){t.model.selected||t.model.select(!0),e=document.createElement("div");var i=[];t.parent.children.each(function(e){e.model.selected&&i.push(e.model)}),e.innerHTML="";for(var r=0,n=i.length;r<n;r++)e.innerHTML+="<div>"+i[r].get(t.fields[0].name)+"</div>";return e.className="ti-draggable",jQuery(e).css({position:"absolute","padding-left":"20px"}),e},start:function(){dc_application.drugMode=!0,dc_application.draggableItem=[],t.parent.children.each(function(e){e.model.selected&&dc_application.draggableItem.push(e)})},drag:function(e){if(dc_application.hView&&dc_application.hView.cid!==dc_application.draggableItem[0].cid){var t=e.pageY,r=dc_application.hView,n=$("table.table",$(dc_application.options.container)).offset(),a=r.$el.height(),s=t-n.top-r.$el.position().top;s<a/3&&(i="before"),s>a/3&&s<2*a/3&&(i="child"),s>2*a/3&&(i="after"),r.isRoot()&&r.hasChildren()&&(i="child"),dc_application.initDroppable(i)}},stop:function(){dc_application.tryToMove(i,dc_application.draggableItem,dc_application.hView),dc_application.drugMode=!1,dc_application.hView=null,dc_application.draggableItem=null,dc_application.dropIndicator.style.display="none",$(e).remove()}})},mouseMoveHandler:function(){this.dragAllowed&&dc_application.drugMode&&(null!==dc_application.hView&&dc_application.hView.cid===this.cid||(dc_application.hView=this))},selectChangeHandler:function(e){this.model.selected?(this.$el.addClass("selected"),$(".checkbox",this.$el).addClass("checked")):(this.$el.removeClass("selected"),$(".checkbox",this.$el).removeClass("checked")),e||dc_application.vent.trigger("item:selected",this)},expandHandler:function(e){$(".catalog-toggle",this.$el).hasClass("switch")?this.model.expanded=!0:this.model.expanded=!1,this.model.expanded=!this.model.expanded,$(".catalog-toggle",this.$el).toggleClass("switch"),e.stopPropagation(),this.trigger("expand")},clickHandler:function(e){"button"!==String(e.target.tagName).toLowerCase()&&(this.shiftMode=e.shiftKey,this.model.select())},enableInLineEdit:function(e){var t=i(24),r=this,n=$(e.target).attr("umi-field");null!==this.parent.inline&&(this.parent.inline.row.model.selected=!1,this.parent.inline.row.selectChangeHandler(),this.parent.inline.off("il:editcomplite"),this.parent.inline.removeSilent()),this.parent.inline=new t({model:this.model,_target:e.target,row:r}),this.parent.inline.once("il:editcomplite",function(e){var t={};t[n]=e,r.parent.inline=null,dc_application.runmethod("save_field_method",{id:dc_application.unPackId(r.model.get("id")),data:{field:n,value:e,type:r.model.get("__type")}}).done(function(e){_.isUndefined(e.data)||_.isUndefined(e.data.error)?r.model.set(t):openDialog(e.data.error,getLabel("js-error-header")),r.render(),r.selectChangeHandler(),_.isUndefined(e.data)||_.isUndefined(e.data.refresh)||dc_application.refresh()}).fail(function(){r.render()})})},isRoot:function(){var e=this.model.get("id").split("_");return 2==e.length&&0==e[0]},hasChildren:function(){return this.model.attributes.children.length>0}}),a=Backbone.Marionette.CollectionView.extend({childView:n,emptyView:r,tagName:"tbody",childViewEventPrefix:"udcrow",it:"111",fields:null,inline:null,dragAllowed:!1,parentView:null,events:{"click .pages-bar a":"pageNavigationClick"},initialize:function(e){this.template=e.template,this.fields=e.fields,this.dragAllowed=e.dragAllowed,this.parentView=e.parentView||null},childViewOptions:function(){return{template:this.template,fields:this.fields,dragAllowed:this.dragAllowed,parent:this}},pageNavigationClick:function(e){dc_application.vent.trigger("b:pagechange",$(e.target).text(),this)},onBeforeRenderCollection:function(){if(this.$el.find("tr.table-row td.pages-bar").length>0)return!0;var e=this.collection;if(e.limit>=e.total)return!0;var t=Math.ceil(e.offset/e.limit)+1;t=0===t?1:t;for(var r=Math.ceil(e.total/e.limit),n=[],a=-3;a<4;a++){var s=t+a;s>0&&s<=r&&n.push(t+a)}var o=0;if(r-n[n.length-1]<=3)for(a=n[0]-1,o=r-7;a>o&&a>1;a--)n.unshift(a);else if(n[0]<=3)for(a=n[n.length-1]+1,o=7;a<=o&&a<=r;a++)n.push(a);if(1!==n[0])if(n[0]-1<=3)for(a=n[0]-1;a>0;a--)n.unshift(a);else n.unshift(1,"...");if(n[n.length-1]!==r)if(r-n[n.length-1]<=3)for(a=n[n.length-1]+1;a<=r;a++)n.push(a);else n.push("...",r);var p=i(14);this.$el.append(p({firstField:this.fields.length>0?this.fields[0]:null,fieldList:this.fields,pageList:n,current:t}))}});e.exports=a},function(e,t,i){let r=Backbone.Marionette.ItemView.extend({container:null,_target:null,tagName:"span",template:"umiInLineControl.twig",oldValue:null,field:null,conf:{},events:{"keyup input":"keyUpHandler"},row:null,initialize:function(){let e=this,t=$(this.options._target);this.row=this.options.row,this.container=t.closest("td"),this.field=t.attr("umi-field"),this.oldValue=this.container.html(),this.container.html(""),this.$el=$("<span></span>"),this.el=this.$el[0],this.container.append(this.$el),this.conf=dc_application.config.get("fields")[this.field],this.render(),$("input",this.$el).on("keyup",function(t){e.keyUpHandler.call(e,t)}),this.isDialogEditField()||e.registerOutsideClick()},registerOutsideClick:function(){let e=this;$(window).on("click",function(t){e.outSideClick(t,e)})},unregisterOutsideClick:function(){let e=this;$(window).off("click",function(t){e.outSideClick(t,e)})},outSideClick:function(e,t){let i=$(e.target);$("input",this.$el).attr("id")!==i.attr("id")&&(i.hasClass("small-ico")||t.keyUpHandler({target:$("input",this.$el)[0],keyCode:13}))},onBeforeRender:function(){this.templateHelpers={type:"",field:this.field,conf:this.conf,id:this.model.get("id"),val:this.model.get(this.field)}},onRender:function(){let e=this,t=this.conf.type;"relation"==t?e.makeEditableRelationField():"bool"==t?$("input",this.$el).on("change",function(t){let i=$(t.target).is(":checked");e.beforeRemove(i?1:0)}):"image"==t||"file"==t?($("a.icon-action",this.$el).on("click",function(t){let i=$("input",e.$el);e.showelfinderFileBrowser(i,i.val())}),$("input",this.$el).on("change",function(t){let i=$(t.target);e.beforeRemove(i.val())})):"date"==t?$('input[umi-type="date"]',this.$el).datepicker({dateFormat:"dd.mm.yy"}):"datetime"==t?$('input[umi-type="datetime"]',this.$el).datepicker({dateFormat:"dd.mm.yy 00:00"}):e.isDialogEditField()&&e.makeDialogEditableField(this.templateHelpers)},beforeRemove:function(e){this.trigger("il:editcomplite",e),this.remove(),this.$el.closest("div.overflow").css("overflow","auto")},removeSilent:function(){this.model=null,this.container.html(""),this.container.append(this.oldValue),Backbone.Marionette.ItemView.prototype.remove.call(this)},keyUpHandler:function(e){let t=$(e.target),r=t.val(),n=t.attr("umi-type"),a=i(22);$(e.target).removeClass("_error"),13==e.keyCode?a.test(n,r)||""==r?this.beforeRemove.call(this,r):t.addClass("_error"):27==e.keyCode&&this.beforeRemove.call(this,"")},showelfinderFileBrowser:function(e,t,i){let r="id="+e.attr("id"),n=e.val().lastIndexOf("/");r=r+"&file="+(".".replace(/^\.\//,"/")+(-1!=n?e.val().substr(n):e.val())),t&&(r=r+"&folder="+t),r+="&image=1",i&&(r=r+"&lang="+i),$.openPopupLayer({name:"Filemanager",title:getLabel("js-file-manager"),width:1200,height:600,url:"/styles/common/other/elfinder/umifilebrowser.html?"+r});let a=$("div#popupLayer_Filemanager div.popupBody");a.length||(a=$(window.parent.document.getElementById("popupLayer_Filemanager")).find("div.popupBody"));let s='<div id="watermark_wrapper"><label for="add_watermark">';s+=getLabel("js-water-mark"),s+='</label><input type="checkbox" name="add_watermark" id="add_watermark"/>',s+='<label for="remember_last_folder">',s+=getLabel("js-remember-last-dir"),s+='</label><input type="checkbox" name="remember_last_folder" id="remember_last_folder"',getCookie("remember_last_folder",!0)&&(s+='checked="checked"'),s+="/></div>",a.append(s)},isDialogEditField:function(){let e=this.conf.type;return!(!~e.indexOf("multiple")&&"wysiwyg"!=e&&"text"!=e&&"symlink"!=e&&"relation"!=e)},makeEditableRelationField:function(){let e=this,t=$("select",this.$el);if(this.conf.guide_id&&!this.conf.options){t.attr("umi-field",e.conf.name);let i=this.templateHelpers.val;return i&&(Array.isArray(i)||(i=i.split(", ")),$.each(i,function(i,r){t.append($("<option>",{text:r,selected:!0,"umi-field":e.conf.name}))})),void new ControlRelation({container:this.$el,type:this.conf.guide_id,preload:!1,sourceUri:"/admin/data/guide_items_all/"+this.conf.guide_id+"/1000/"}).loadItemsAll(function(){t.on("change",function(){let i=t.val();if(Array.isArray(i)){let e=[];for(let r in i)e.push($('option[value="'+i[r]+'"]',t).text());i=e}else i=$('option[value="'+i+'"]',t).text();e.beforeRemove(i)})})}new ControlComboBox({el:t}),t.on("change",function(){let i=$('option[value="'+t.val()+'"]',t).text();e.beforeRemove(i)})},makeDialogEditableField:function(e){let t=this;$.ajax({url:"/styles/skins/modern/design/js/common/dialog_edit_field_template.html",dataType:"html",success:function(i){let r,n,a=e.conf.name,s=e.conf.type,o="idm"+e.conf.name,p=e.id.split("_")[1];"multiple_file"==s||"multiple_image"==s?r=t.templateDialogFileField(i,e):"text"==s||"wysiwyg"==s?r=t.templateDialogTextField(i,e):"symlink"==s&&(r=t.templateDialogSymlinkField(i,e)),n=getLabel("js-editable-"+s+"-field"),openDialog("",n,{width:800,html:r,cancelButton:!0,confirmText:getLabel("js-save"),cancelText:getLabel("js-new_guide_item_cancel"),openCallback:function(){t.initDialogFields(s,o)},confirmCallback:function(e){let i=$("#optionedFieldForm"),r={};r[a]=t.getValueFormField(s,i);let n="/admin/"+dc_application.config.get("module")+"/"+dc_application.config.get("saveField_method")+"/"+p+"/."+dc_application.options.dataProtocol,o=i.serialize();o+="&field="+a,o+="&csrf="+csrfProtection.getToken(),$.ajax({type:"POST",url:n,dataType:"json",data:o,success:function(){t.row.model.set(r),t.row.render(),$.jGrowl(getLabel("js-property-saved-success"))},error:function(e,t,i){onError(i,"save")},complete:function(){closeDialog(e)}})},cancelCallback:function(e){t.row.render(),closeDialog(e)},closeCallback:function(){t.row.render()}})}})},initDialogFields:function(e,t){if("multiple_file"==e)$("div.multifile").each(function(){new ControlMultiFile({container:$(this)})});else if("multiple_image"==e)$("div.multiimage").each(function(){new ControlMultiImage({container:$(this)})});else if("wysiwyg"==e){if(void 0!==uAdmin.wysiwyg){let e=tinyMCE.get(t);e&&e.remove(),uAdmin.wysiwyg.init({selector:"textarea#"+t})}}else"symlink"==e&&jQuery("div.symlink#"+t).each(function(){let e=$(this),t=$("ul",e),i=$(e).find("div.title-edit").prop("className").split(" "),r=[];for(let e=0;e<i.length;e++)"title-edit"!=i[e]&&r.push(i[e]);let n=e.hasClass("onlyOne"),a=new symlinkControl(e.attr("id"),"content",[],{inputName:e.attr("name"),fadeColorStart:[255,255,225],fadeColorEnd:[255,255,255]},r,n),s=$("li",e);0===s.length&&a.appendStub(),s.each(function(){let e=$(this);a.addItem(e.attr("umi:id"),e.text(),[e.attr("umi:module"),e.attr("umi:method")],e.attr("umi:href"))}),t.remove()})},getValueFormField:function(e,t){let i;if("multiple_file"==e||"multiple_image"==e)return i=[],t.find(".multi_image, .multi_file").each(function(e,t){let r=$(t),n=r.find('input[name$="alt]"]').val(),a={id:r.attr("id").split("_")[1],src:r.find('input[name$="src]"]').val(),alt:n||"",title:r.find('input[name$="title]"]').val(),ord:r.find('input[name$="order]"]').val(),folder_hash:r.attr("umi:folder-hash"),file_hash:r.attr("umi:file-hash")};i.push(a)}),i;if("text"==e||"wysiwyg"==e){let e="",i=t.find("iframe");return e=i.length?$(i.get(0).contentDocument).find("body").html():t.find("textarea").val(),t.find("textarea").val(e),[e]}return"symlink"==e?(i=[],t.find("input[name]").each(function(e,t){let r=$(t),n=$(r.parent().find("li")[e]),a=n.find("span");if(!a.length)return;let s=a.data("basetype").split(" "),o=s[0],p=s.length>1?s[1]:"",l={id:r.val(),name:a.html(),link:n.find("a:not(.button)").attr("href"),basetype:{module:o,method:p}};i.push(l)}),i):void 0},templateDialogSymlinkField:function(e,t){let i=$($.parseHTML(e)),r=i.find("#field_template_symlink").html(),n=i.find("#value_template_symlink").html(),a=[];$.each(t.val,function(e,t){a.push({id:t.id,link:t.link,title:t.name,basetype:t.basetype})});let s="";$.each(a,function(e,t){s+=$.tmpl(n,t)[0].outerHTML});let o={title:t.conf.title,elemId:"idm"+t.conf.name,valuesHtml:s,inputName:"value[]"};return $.tmpl(r,o)},templateDialogTextField:function(e,t){let i=$($.parseHTML(e)).find("#field_template_wysiwyg_text").html(),r={title:t.conf.title,elemId:"idm"+t.conf.name,inputName:"value",value:t.val,type:t.conf.type};return $.tmpl(i,r)},templateDialogFileField:function(e,t){let i,r,n=$($.parseHTML(e)),a=t.conf.type;"multiple_file"==a?(i=n.find("#field_template_files").html(),r=n.find("#value_template_file").html()):"multiple_image"==a&&(i=n.find("#field_template_images").html(),r=n.find("#value_template_image").html());let s=[];$.each(t.val,function(e,t){s.push({id:t.id,path:t.src,alt:t.alt,title:t.title,order:t.ord,name:t.name,folderHash:t.folder_hash,fileHash:t.file_hash,inputName:"value"})});let o="";$.each(s,function(e,t){o+=$.tmpl(r,t)[0].outerHTML});let p={title:t.conf.title,elemId:"idm"+t.conf.name,inputName:"value",valuesHtml:o};return $.tmpl(i,p)}});e.exports=r},function(e,t,i){var r=Backbone.Marionette.ItemView.extend({options:{},template:"umiToolbarTemplate.twig",buttonTemplate:_.template('<a class="icon-action" href="<%= url %>" title="<%= title %>" name="<%= name %>"><i class="small-ico <%= ico %>"></i></a>'),TableToolbarFunctions:i(26),selectedItemsCount:0,selectedItems:[],buttons:[],menu:[],selectButtons:[],resetButtons:[],singleActionButtons:[],exchangeButtons:[],initialize:function(e){this.options=_.extend(this.options,e),void 0===this.options.showSelectButtons&&(this.options.showSelectButtons=!0),void 0===this.options.showResetButtons&&(this.options.showResetButtons=!0),this.menu=[this.TableToolbarFunctions.addButton,this.TableToolbarFunctions.editButton,this.TableToolbarFunctions.delButton],this.options.showResetButtons&&(this.resetButtons=[this.TableToolbarFunctions.refresh,this.TableToolbarFunctions.resetFilterAndSortButton]),this.options.showSelectButtons&&(this.selectButtons=[this.TableToolbarFunctions.selectAllButton,this.TableToolbarFunctions.unSelectAllButton,this.TableToolbarFunctions.invertAllButton]),this.singleActionButtons=[this.TableToolbarFunctions.editButton,this.TableToolbarFunctions.addButton]},onRender:function(){if(!_.isUndefined(this.options.toolbarFunctions))for(var e=Object.keys(this.options.toolbarFunctions),t=0,i=e.length;t<i;t++)this.TableToolbarFunctions[e[t]]=this.options.toolbarFunctions[e[t]];if(!_.isUndefined(this.options.toolbarMenu)){this.menu=[];for(var r=0,n=this.options.toolbarMenu.length;r<n;r++)this.menu.push(this.TableToolbarFunctions[this.options.toolbarMenu[r]])}var a=0;for(i=this.menu.length;a<i;a++)"ico_add"===this.menu[a].name?this.options.disableAddButton&&this.appendButton(this.menu[a]):this.appendButton(this.menu[a]);if(this.disableButtons(this.menu),this.options.showResetButtons)for(a=0,i=this.resetButtons.length;a<i;a++)this.appendButton(this.resetButtons[a]);if(this.options.showSelectButtons){for(a=0,i=this.selectButtons.length;a<i;a++)this.appendButton(this.selectButtons[a]);this.disableButtons(this.selectButtons[2])}this.initButtons(dc_application.data.models[0])},appendButton:function(e){var t=this.renderButton(e);this.buttons.push(e),this.$el.find(".toolbar").append(t)},renderButton:function(e){var t=this.buttonTemplate({url:e.href||"#",name:e.name||"toolbtn",ico:e.className||"",title:e.hint||""});if(e.el){var i=$(t),r=$(e.el);return r.attr("class",i.attr("class")),r.attr("href",i.attr("href")),r.attr("title",i.attr("title")),r.attr("name",i.attr("name")),r.html($("i",i)),e.el}var n=$(t);return e.el=n,this.bindButtonClick(e),n},bindButtonClick:function(e){if(e.el){var t=$(e.el);"function"==typeof e.release?t.on("click",function(){return!$(this).hasClass("disabled")&&e.release(e)}):t.on("click",function(){return!$(this).hasClass("disabled")})}},bindAllButtonsClick:function(){for(var e=0;e<this.buttons.length;e++)this.bindButtonClick(this.buttons[e])},disableButtons:function(e){_.isArray(e)||(e=[e]);for(var t=0,i=e.length;t<i;t++)this.$el.find('a[name="'+e[t].name+'"]').addClass("disabled")},enableButtons:function(e){_.isArray(e)||(e=[e]);for(var t=0,i=e.length;t<i;t++)this.$el.find('a[name="'+e[t].name+'"]').removeClass("disabled")},initButtons:function(e){for(var t=0;t<this.buttons.length;t++)this.buttons[t].init(this.buttons[t],e)},redraw:function(){if(this.selectedItems=dc_application.data.getSelected(),this.selectedItemsCount=this.selectedItems.length,this.selectedItemsCount>0?(this.enableButtons(this.menu),this.options.showSelectButtons&&this.enableButtons(this.selectButtons[2]),this.selectedItemsCount>1&&this.disableButtons(this.singleActionButtons)):(this.disableButtons(this.menu),this.options.showSelectButtons&&this.disableButtons(this.selectButtons[2])),this.options.showResetButtons)for(var e=0,t=this.resetButtons.length;e<t;e++)this.enableButtons(this.resetButtons[e]);this.initButtons()}});e.exports=r},function(e,t,i){var r={delButton:{name:"ico_del",className:"i-remove",hint:getLabel("js-delete"),init:function(e,t){var i=dc_application.getToolBar(),r=e.el,n=_.isUndefined(t)?i.selectedItems:[t];null!==n&&n.length>0?i.enableButtons(r):i.disableButtons(r)},release:function(e,t){var i=dc_application.getToolBar(),r=[],n=i.selectedItems;return n.length>0&&(r=[],_.each(n,function(e){r.push(e.pick("id","__type"))}),r=dc_application.unPackId(r)),i.selectedItems.length>0&&dc_application.runmethod("delete_method",{data:{element:r}}).done(function(e){if(!_.isUndefined(e.data)&&!_.isUndefined(e.data.error))return openDialog(e.data.error,getLabel("js-error-header"));_.isUndefined(e.data.data.success)&&_.isUndefined(e.data.success)||_.each(n,function(e){e.collection.remove(e)})}).fail(function(e){var t=getLabel("js-server_error");403===e.status&&e.responseJSON&&e.responseJSON.data&&e.responseJSON.data.error&&(t=e.responseJSON.data.error),alert(t)}),!1}},editButton:{name:"ico_edit",className:"i-edit",hint:getLabel("js-edit-item"),init:function(e,t){var r=dc_application.getToolBar(),n=e.el,a=_.isUndefined(t)?r.selectedItems:[t];if(null!==a&&1==a.length){var s=i(7);s=s({module:dc_application.config.get("module"),method:dc_application.config.get("edit_method"),id:dc_application.unPackId(a[0].get("id")),params:a[0].get("__type")}),n.prop("href",s)}},release:function(e){return!0}},addButton:{name:"ico_add",className:"i-add",hint:getLabel("js-add-page"),init:function(e,t){var i=dc_application.getToolBar(),r=e.el,n=_.isUndefined(t)?i.selectedItems:[t];null===n||1!=n.length||_.isUndefined(n[0].createLink)?i.disableButtons(r):i.enableButtons(r)},release:function(e){return!0}},selectAllButton:{name:"selectAll",hint:getLabel("js-select-all"),className:"i-select",alwaysActive:!0,init:function(e){},release:function(){return dc_application.data.processModel(function(){this.selected||this.select(!0)}),dc_application.getToolBar().redraw(),!1}},unSelectAllButton:{name:"unSelectAll",hint:getLabel("js-un-select-all"),className:"i-unselect",alwaysActive:!0,init:function(e){},release:function(){return dc_application.data.processModel(function(){this.selected&&this.select(!0)}),dc_application.getToolBar().redraw(),!1}},invertAllButton:{name:"invertAll",hint:getLabel("js-invert-all"),className:"i-invertselect",init:function(e){var t=dc_application.getToolBar();t.selectedItemsCount>0?t.enableButtons(e):t.disableButtons(e)},release:function(){return dc_application.data.processModel(function(){this.select(!0)}),dc_application.getToolBar().redraw(),!1}},resetFilterAndSortButton:{name:"resetFilterAndSort",hint:getLabel("js-reset-filter-and-sort"),className:"i-reset-filter-and-sort",init:function(e){dc_application.getToolBar().enableButtons(e)},release:function(){var e=dc_application,t=e.getQueryBuilder();return(t.hasPropertyFilter()||t.hasPropertyOrder())&&e.resetFilterAndSort(),!1}},refresh:{name:"refresh",className:"i-refresh",hint:getLabel("js-refresh"),init:function(e){dc_application.getToolBar().enableButtons(e)},release:function(){return dc_application.refresh(),!1}}};e.exports=r}]);