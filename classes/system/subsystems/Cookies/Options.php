<?php
 namespace UmiCms\System\Cookies;use UmiCms\System\Session\iSession;use UmiCms\System\Hierarchy\Domain\iDetector;class Options implements iOptions {private $domainDetector;public function __construct(iDetector $v45651ec82e45766b3d707ee33df1a61a) {$this->domainDetector = $v45651ec82e45766b3d707ee33df1a61a;}public function getCustom(iCookie $v2dccd1ab3e03990aea77359831c85ca2) : array {return $this->fixSameSite([    'expires' => $v2dccd1ab3e03990aea77359831c85ca2->getExpirationTime(),    'path' => $v2dccd1ab3e03990aea77359831c85ca2->getPath(),    'domain' => $v2dccd1ab3e03990aea77359831c85ca2->getDomain(),    'secure' => $v2dccd1ab3e03990aea77359831c85ca2->isSecure(),    'httponly' => $v2dccd1ab3e03990aea77359831c85ca2->isForHttpOnly(),    'samesite' => $v2dccd1ab3e03990aea77359831c85ca2->getSameSite()   ]);}public function getDefault(iSession $v21d6f40cfb511982e4424e0e250a9557) : array {return $this->fixSameSite([    'lifetime' => $v21d6f40cfb511982e4424e0e250a9557->getCookieLifeTime(),    'path' => $v21d6f40cfb511982e4424e0e250a9557->getCookiePath(),    'domain' => $v21d6f40cfb511982e4424e0e250a9557->getCookieDomain(),    'secure' => $v21d6f40cfb511982e4424e0e250a9557->getCookieSecureFlag(),    'httponly' => $v21d6f40cfb511982e4424e0e250a9557->getCookieHttpOnly(),    'samesite' => $v21d6f40cfb511982e4424e0e250a9557->getCookieSameSite()   ]);}private function fixSameSite(array $v93da65a9fd0004d9477aeac024e08e15) : array {if ($v93da65a9fd0004d9477aeac024e08e15['secure'] === false || $this->domainDetector->detect()->isUsingSsl() === false) {unset($v93da65a9fd0004d9477aeac024e08e15['samesite']);}elseif (PHP_VERSION_ID < 70300) {$v93da65a9fd0004d9477aeac024e08e15['path'] = $v93da65a9fd0004d9477aeac024e08e15['path'] . '; samesite=' . $v93da65a9fd0004d9477aeac024e08e15['samesite'];unset($v93da65a9fd0004d9477aeac024e08e15['samesite']);}return $v93da65a9fd0004d9477aeac024e08e15;}}