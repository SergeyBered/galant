<?php
 class umiFieldTypesCollection extends singleton implements iUmiFieldTypesCollection {private $idMap = [];protected function __construct() {$this->loadFieldTypes();}public static function getInstance($v4a8a08f09d37b73795649038408b5f33 = null) {return parent::getInstance(__CLASS__);}public function addFieldType($vb068931cc450442b63f5b3d276ea4297, $v870b60148237c1452dfb337fdd19c314 = 'string', $v09ec737a9ab66d1d796304239d3f8a86 = false, $va4e397efa082dcccc62563f1f2d9513b = false) {if (!umiFieldType::isValidDataType($v870b60148237c1452dfb337fdd19c314)) {throw new coreException('Not valid data type given');}$v4717d53ebfdfea8477f780ec66151dcb = ConnectionPool::getInstance()->getConnection();$vac5c74b64b4b8352ef2f181affb5ac2a = "INSERT INTO cms3_object_field_types (data_type) VALUES('{$v870b60148237c1452dfb337fdd19c314}')";$v4717d53ebfdfea8477f780ec66151dcb->query($vac5c74b64b4b8352ef2f181affb5ac2a);$ve2aeb4e882d60b1eb4b7c8cd97986a28 = $v4717d53ebfdfea8477f780ec66151dcb->insertId();try {$v833750ac635fcc57dc33ecafe365f9a7 = new umiFieldType($ve2aeb4e882d60b1eb4b7c8cd97986a28);$v833750ac635fcc57dc33ecafe365f9a7->setName($vb068931cc450442b63f5b3d276ea4297);$v833750ac635fcc57dc33ecafe365f9a7->setDataType($v870b60148237c1452dfb337fdd19c314);$v833750ac635fcc57dc33ecafe365f9a7->setIsMultiple($v09ec737a9ab66d1d796304239d3f8a86);$v833750ac635fcc57dc33ecafe365f9a7->setIsUnsigned($va4e397efa082dcccc62563f1f2d9513b);$v833750ac635fcc57dc33ecafe365f9a7->commit();}catch (Exception $v42552b1f133f9f8eb406d4f306ea9fd1) {$this->delFieldType($ve2aeb4e882d60b1eb4b7c8cd97986a28);throw $v42552b1f133f9f8eb406d4f306ea9fd1;}$this->idMap[$ve2aeb4e882d60b1eb4b7c8cd97986a28] = $v833750ac635fcc57dc33ecafe365f9a7;return $ve2aeb4e882d60b1eb4b7c8cd97986a28;}public function delFieldType($vb80bb7740288fda1f201890375a60c8f) {if (!$this->isExists($vb80bb7740288fda1f201890375a60c8f)) {return false;}$vb80bb7740288fda1f201890375a60c8f = (int) $vb80bb7740288fda1f201890375a60c8f;$v4717d53ebfdfea8477f780ec66151dcb = ConnectionPool::getInstance()->getConnection();$vac5c74b64b4b8352ef2f181affb5ac2a = "DELETE FROM cms3_object_field_types WHERE id = '{$vb80bb7740288fda1f201890375a60c8f}'";$v4717d53ebfdfea8477f780ec66151dcb->query($vac5c74b64b4b8352ef2f181affb5ac2a);unset($this->idMap[$vb80bb7740288fda1f201890375a60c8f]);return true;}public function getFieldType($vb80bb7740288fda1f201890375a60c8f) {if ($this->isExists($vb80bb7740288fda1f201890375a60c8f)) {return $this->idMap[$vb80bb7740288fda1f201890375a60c8f];}return false;}public function getFieldTypeByDataType($v870b60148237c1452dfb337fdd19c314, $v09ec737a9ab66d1d796304239d3f8a86 = false) {$v870b60148237c1452dfb337fdd19c314 = (string) $v870b60148237c1452dfb337fdd19c314;if ($v870b60148237c1452dfb337fdd19c314 === '') {return false;}$v69552af3a03df9391f70eb1851f817c5 = $this->getFieldTypesList();$v833750ac635fcc57dc33ecafe365f9a7 = false;foreach ($v69552af3a03df9391f70eb1851f817c5 as $v39bb421562d6f6128a957f3d162538d2) {if ($v39bb421562d6f6128a957f3d162538d2->getDataType() == $v870b60148237c1452dfb337fdd19c314 && $v39bb421562d6f6128a957f3d162538d2->getIsMultiple() == $v09ec737a9ab66d1d796304239d3f8a86) {$v833750ac635fcc57dc33ecafe365f9a7 = $v39bb421562d6f6128a957f3d162538d2;break;}}return $v833750ac635fcc57dc33ecafe365f9a7;}public function isExists($vb80bb7740288fda1f201890375a60c8f) {return array_key_exists($vb80bb7740288fda1f201890375a60c8f, $this->idMap);}public function getFieldTypeByDataTypeStrict($v870b60148237c1452dfb337fdd19c314, $vce495ab8d79db0d37413d8e95b54e606) {try {$v599dcce2998a6b40b1e38e8c6006cb0a = $this->getFieldTypeByDataType($v870b60148237c1452dfb337fdd19c314, $vce495ab8d79db0d37413d8e95b54e606);}catch (databaseException $v42552b1f133f9f8eb406d4f306ea9fd1) {umiExceptionHandler::report($v42552b1f133f9f8eb406d4f306ea9fd1);$v599dcce2998a6b40b1e38e8c6006cb0a = null;}if (!$v599dcce2998a6b40b1e38e8c6006cb0a instanceof iUmiFieldType) {$vccb24100eca5e8f0c129ebfaafeef778 = $vce495ab8d79db0d37413d8e95b54e606 ? getLabel('label-multiple-field-type') : getLabel('label-not-multiple-field-type');throw new ExpectFieldTypeException(getLabel('label-errors-cannot-get-field-type', false, $vccb24100eca5e8f0c129ebfaafeef778, $v870b60148237c1452dfb337fdd19c314));}return $v599dcce2998a6b40b1e38e8c6006cb0a;}public function getBooleanType() {return $this->getFieldTypeByDataTypeStrict('boolean', false);}public function getBooleanTypeId() {return $this->getBooleanType()->getId();}public function getColorType() {return $this->getFieldTypeByDataTypeStrict('color', false);}public function getColorTypeId() {return $this->getColorType()->getId();}public function getCounterType() {return $this->getFieldTypeByDataTypeStrict('counter', false);}public function getCounterTypeId() {return $this->getCounterType()->getId();}public function getDateType() {return $this->getFieldTypeByDataTypeStrict('date', false);}public function getDateTypeId() {return $this->getDateType()->getId();}public function getDomainIdType() {return $this->getFieldTypeByDataTypeStrict('domain_id', false);}public function getDomainIdTypeId() {return $this->getDomainIdType()->getId();}public function getMultipleDomainIdType() {return $this->getFieldTypeByDataTypeStrict('domain_id_list', true);}public function getMultipleDomainIdTypeId() {return $this->getMultipleDomainIdType()->getId();}public function getFileType() {return $this->getFieldTypeByDataTypeStrict('file', false);}public function getFileTypeId() {return $this->getFileType()->getId();}public function getFloatType() {return $this->getFieldTypeByDataTypeStrict('float', false);}public function getFloatTypeId() {return $this->getFloatType()->getId();}public function getImageType() {return $this->getFieldTypeByDataTypeStrict('img_file', false);}public function getImageTypeId() {return $this->getImageType()->getId();}public function getIntType() {return $this->getFieldTypeByDataTypeStrict('int', false);}public function getIntTypeId() {return $this->getIntType()->getId();}public function getObjectTypeIdType() {return $this->getFieldTypeByDataTypeStrict('link_to_object_type', false);}public function getObjectTypeIdTypeId() {return $this->getObjectTypeIdType()->getId();}public function getMultipleFileType() {return $this->getFieldTypeByDataTypeStrict('multiple_file', true);}public function getMultipleFileTypeId() {return $this->getMultipleFileType()->getId();}public function getMultipleImageType() {return $this->getFieldTypeByDataTypeStrict('multiple_image', true);}public function getMultipleImageTypeId() {return $this->getMultipleImageType()->getId();}public function getOfferIdType() {return $this->getFieldTypeByDataTypeStrict('offer_id', false);}public function getOfferIdTypeId() {return $this->getOfferIdType()->getId();}public function getMultipleOfferIdType() {return $this->getFieldTypeByDataTypeStrict('offer_id_list', true);}public function getMultipleOfferIdTypeId() {return $this->getMultipleOfferIdType()->getId();}public function getMultipleOptionType() {return $this->getFieldTypeByDataTypeStrict('optioned', true);}public function getMultipleOptionTypeId() {return $this->getMultipleOptionType()->getId();}public function getPasswordType() {return $this->getFieldTypeByDataTypeStrict('password', false);}public function getPasswordTypeId() {return $this->getPasswordType()->getId();}public function getPriceType() {return $this->getFieldTypeByDataTypeStrict('price', false);}public function getPriceTypeId() {return $this->getPriceType()->getId();}public function getObjectIdType() {return $this->getFieldTypeByDataTypeStrict('relation', false);}public function getObjectIdTypeId() {return $this->getObjectIdType()->getId();}public function getMultipleObjectIdType() {return $this->getFieldTypeByDataTypeStrict('relation', true);}public function getMultipleObjectIdTypeId() {return $this->getMultipleObjectIdType()->getId();}public function getStringType() {return $this->getFieldTypeByDataTypeStrict('string', false);}public function getStringTypeId() {return $this->getStringType()->getId();}public function getSwfFieldType() {return $this->getFieldTypeByDataTypeStrict('swf_file', false);}public function getSwfFieldTypeId() {return $this->getSwfFieldType()->getId();}public function getMultiplePageType() {return $this->getFieldTypeByDataTypeStrict('symlink', true);}public function getMultiplePageTypeId() {return $this->getMultiplePageType()->getId();}public function getMultipleTagType() {return $this->getFieldTypeByDataTypeStrict('tags', true);}public function getMultipleTagTypeId() {return $this->getMultipleTagType()->getId();}public function getSimpleTextType() {return $this->getFieldTypeByDataTypeStrict('text', false);}public function getSimpleTextTypeId() {return $this->getSimpleTextType()->getId();}public function getVideoType() {return $this->getFieldTypeByDataTypeStrict('video_file', false);}public function getVideoTypeId() {return $this->getVideoType()->getId();}public function getHtmlTextType() {return $this->getFieldTypeByDataTypeStrict('wysiwyg', false);}public function getHtmlTextTypeId() {return $this->getHtmlTextType()->getId();}public function getDomainIdListType() {return $this->getMultipleDomainIdType();}public function getDomainIdListTypeId() {return $this->getMultipleDomainIdTypeId();}public function getLinkToObjectTypeType() {return $this->getObjectTypeIdType();}public function getLinkToObjectTypeTypeId() {return $this->getObjectTypeIdTypeId();}public function getOfferIdListType() {return $this->getMultipleOfferIdType();}public function getOfferIdListTypeId() {return $this->getMultipleOfferIdTypeId();}public function getOptionedType() {return $this->getMultipleOptionType();}public function getOptionedTypeId() {return $this->getMultipleOptionTypeId();}public function getRelationType() {return $this->getObjectIdType();}public function getRelationTypeId() {return $this->getObjectIdTypeId();}public function getMultipleRelationType() {return $this->getMultipleObjectIdType();}public function getMultipleRelationTypeId() {return $this->getMultipleObjectIdTypeId();}public function getSymlinkType() {return $this->getMultiplePageType();}public function getSymlinkTypeId() {return $this->getMultiplePageTypeId();}public function getTagsType() {return $this->getMultipleTagType();}public function getTagsTypeId() {return $this->getMultipleTagTypeId();}public function getFieldTypesList() {if (!is_array($this->idMap) || umiCount($this->idMap) == 0) {$this->loadFieldTypes();}return $this->idMap;}public function clearCache() {$v14f802e1fba977727845e8872c1743a7 = array_keys($this->idMap);foreach ($v14f802e1fba977727845e8872c1743a7 as $v3c6e0b8a9c15224a8228b9a98ca1531d) {unset($this->idMap[$v3c6e0b8a9c15224a8228b9a98ca1531d]);}$this->idMap = [];$this->loadFieldTypes();}private function loadFieldTypes() {$v4717d53ebfdfea8477f780ec66151dcb = ConnectionPool::getInstance()->getConnection();$vac5c74b64b4b8352ef2f181affb5ac2a = 'SELECT id, name, data_type, is_multiple, is_unsigned FROM cms3_object_field_types';$result = $v4717d53ebfdfea8477f780ec66151dcb->queryResult($vac5c74b64b4b8352ef2f181affb5ac2a);$result->setFetchType(IQueryResult::FETCH_ROW);foreach ($result as $vf1965a857bc285d26fe22023aa5ab50d) {$ve2aeb4e882d60b1eb4b7c8cd97986a28 = $vf1965a857bc285d26fe22023aa5ab50d[0];try {$v833750ac635fcc57dc33ecafe365f9a7 = new umiFieldType($ve2aeb4e882d60b1eb4b7c8cd97986a28, $vf1965a857bc285d26fe22023aa5ab50d);}catch (privateException $ve1671797c52e15f763380b45e841ec32) {$ve1671797c52e15f763380b45e841ec32->unregister();continue;}$this->idMap[$ve2aeb4e882d60b1eb4b7c8cd97986a28] = $v833750ac635fcc57dc33ecafe365f9a7;}return true;}}