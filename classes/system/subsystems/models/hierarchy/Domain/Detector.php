<?php
 namespace UmiCms\System\Hierarchy\Domain;use UmiCms\System\Request\Http\iRequest;class Detector implements iDetector {private $domainCollection;private $httpRequest;public function __construct(\iDomainsCollection $v0d771fa031fb27561ed207afa6cf9983, iRequest $v6077efae9efff6a52314c120a5048f03) {$this->domainCollection = $v0d771fa031fb27561ed207afa6cf9983;$this->httpRequest = $v6077efae9efff6a52314c120a5048f03;}public function detect() {$v577e4cbed0f715952cd3a7f893f65608 = $this->getRequestDomain();$v9d6e24ec78d309695833f4c9f8310d7a = $this->getDefaultDomain();switch (true) {case ($v577e4cbed0f715952cd3a7f893f65608 instanceof \iDomain) : {return $v577e4cbed0f715952cd3a7f893f65608;}case ($v9d6e24ec78d309695833f4c9f8310d7a instanceof \iDomain) : {return $v9d6e24ec78d309695833f4c9f8310d7a;}default : {throw new \coreException('Cannot detect current domain');}}}public function detectId() {return $this->detect()    ->getId();}public function detectHost() {return $this->detect()    ->getHost();}public function detectUrl() {return $this->detect()    ->getUrl();}public function detectMirrorUrl() : string {return $this->detect()    ->getCurrentUrl();}private function getRequestDomain() {$v10573b873d2fa5a365d558a45e328e47 = $this->getHttpRequest();$v0093d01f722d72f92a2f51227e27c6d9 = $v10573b873d2fa5a365d558a45e328e47->Get();$v1b987e6bb3a569cf9391396c32c5b2c3 = $v10573b873d2fa5a365d558a45e328e47->Post();$v0d771fa031fb27561ed207afa6cf9983 = $this->getDomainCollection();if ($v0093d01f722d72f92a2f51227e27c6d9->isExist('domain_id') || $v1b987e6bb3a569cf9391396c32c5b2c3->isExist('domain_id')) {$v72ee76c5c29383b7c9f9225c1fa4d10b = $v0093d01f722d72f92a2f51227e27c6d9->get('domain_id') ?: $v1b987e6bb3a569cf9391396c32c5b2c3->get('domain_id');$v72ee76c5c29383b7c9f9225c1fa4d10b = is_array($v72ee76c5c29383b7c9f9225c1fa4d10b) ? getFirstValue($v72ee76c5c29383b7c9f9225c1fa4d10b) : $v72ee76c5c29383b7c9f9225c1fa4d10b;return $v0d771fa031fb27561ed207afa6cf9983->getDomain($v72ee76c5c29383b7c9f9225c1fa4d10b);}$v67b3dba8bc6778101892eb77249db32e = $v10573b873d2fa5a365d558a45e328e47->host();return $v0d771fa031fb27561ed207afa6cf9983->getDomainByHost($v67b3dba8bc6778101892eb77249db32e);}private function getDefaultDomain() {return $this->getDomainCollection()    ->getDefaultDomain();}private function getDomainCollection() {return $this->domainCollection;}private function getHttpRequest() {return $this->httpRequest;}}