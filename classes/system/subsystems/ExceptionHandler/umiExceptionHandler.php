<?php
 use UmiCms\Service;use UmiCms\Classes\System\Exception\Handler\iExceptionHandler;class umiExceptionHandler {const DEFAULT_TEMPLATE = 'default.html';private static $handler;private static $config;public static function set($vab8c9e32f5757d87122d20d002fc1749 = 'base', $v66f6181bcb4cff4cd38fbc804a036db6 = '') {$vab8c9e32f5757d87122d20d002fc1749 = $vab8c9e32f5757d87122d20d002fc1749 . 'Handler';self::$config = mainConfiguration::getInstance();self::$handler = Service::get('ExceptionHandlerFactory')->create();if (isEmptyString($v66f6181bcb4cff4cd38fbc804a036db6)) {$v66f6181bcb4cff4cd38fbc804a036db6 = self::$config->includeParam('system.error') . self::DEFAULT_TEMPLATE;}try {self::$handler->setExceptionTemplate($v66f6181bcb4cff4cd38fbc804a036db6);}catch (\Exception $v42552b1f133f9f8eb406d4f306ea9fd1) {trigger_error($v42552b1f133f9f8eb406d4f306ea9fd1->getMessage(), E_USER_WARNING);}return set_exception_handler([    __CLASS__,    $vab8c9e32f5757d87122d20d002fc1749   ]);}public static function restore() {return restore_exception_handler();}public static function createCrashReport($v78e731027d8fd50ed642340b7c9a63b3, $v04a75036e9d520bb983c5ed03b8d0182) {return self::$handler->createCrashReport($v78e731027d8fd50ed642340b7c9a63b3, $v04a75036e9d520bb983c5ed03b8d0182);}public static function report(Exception $v42552b1f133f9f8eb406d4f306ea9fd1) {if (self::$handler !== null) {return self::$handler->report($v42552b1f133f9f8eb406d4f306ea9fd1);}if (!defined('INSTALLER_DEBUG')) {self::set();return self::$handler->report($v42552b1f133f9f8eb406d4f306ea9fd1);}if (INSTALLER_DEBUG === false) {return false;}throw $v42552b1f133f9f8eb406d4f306ea9fd1;}public static function baseHandler($ve1671797c52e15f763380b45e841ec32) {self::$handler->handler($ve1671797c52e15f763380b45e841ec32);}public static function handleShutdown() {if (!self::$config->get('debug', 'handle-shutdown')) {return false;}register_shutdown_function(function() {$vd563bde5c68f99a2a9074cebaef84d43 = self::$config->includeParam('errors-logs-path');$v63a04a2f17915ed7c241c38ff2a29f4d = $vd563bde5c68f99a2a9074cebaef84d43 . '/shutdown/';if (!is_dir($v63a04a2f17915ed7c241c38ff2a29f4d) && !defined('INSTALLER_DEBUG')) {mkdir($v63a04a2f17915ed7c241c38ff2a29f4d, 0777, true);}$vec228b97c97d55a0ff1de131f1b9d220 = $v63a04a2f17915ed7c241c38ff2a29f4d . date('Y-m-d H:i:s');$vbf6a60f985ad5c964ccd5790759655b7 = (libxml_get_last_error()) ?: null;$vb2b487d1b18dbc424ea02d924eb47e13 = (error_get_last()) ?: null;if (isset($vbf6a60f985ad5c964ccd5790759655b7)) {$result = file_put_contents($vec228b97c97d55a0ff1de131f1b9d220, print_r($vbf6a60f985ad5c964ccd5790759655b7, true) . "\n", FILE_APPEND | LOCK_EX);if (!$result) {var_export($vbf6a60f985ad5c964ccd5790759655b7);echo '<br />';}}if (isset($vb2b487d1b18dbc424ea02d924eb47e13)) {$result = file_put_contents($vec228b97c97d55a0ff1de131f1b9d220, print_r($vb2b487d1b18dbc424ea02d924eb47e13, true), FILE_APPEND | LOCK_EX);if (!$result) {var_export($vb2b487d1b18dbc424ea02d924eb47e13);}}});return true;}}