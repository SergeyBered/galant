<?php
 namespace UmiCms\Classes\System\Controllers;use UmiCms\System\Auth\iAuth;use UmiCms\System\Session\iSession;class SessionCheckController extends AbstractController implements iSessionCheckController {private $session;private $auth;public function setSession(iSession $v21d6f40cfb511982e4424e0e250a9557) {$this->session = $v21d6f40cfb511982e4424e0e250a9557;return $this;}public function setAuth(iAuth $vfa53b91ccc1b78668d5af58e1ed3a485) {$this->auth = $vfa53b91ccc1b78668d5af58e1ed3a485;return $this;}public function execute() {$v50d6d45fbc4f20700845006272fc5e42 = $this->request->Get()->get('a') === 'ping';$v3057015159aecbff5d44c510e27ba0d4 = false;if ($v50d6d45fbc4f20700845006272fc5e42) {$v3057015159aecbff5d44c510e27ba0d4 = $this->ping();}$v336a901dbd6c44ecead0c00e2e245e86 = $this->getRemainingTime($v3057015159aecbff5d44c510e27ba0d4);$this->buffer->push($v336a901dbd6c44ecead0c00e2e245e86);$this->buffer->end();}private function ping() {$this->session->startActiveTime();$vb5eda0a74558a342cf659187f06f746f = $this->request->Get();if ($vb5eda0a74558a342cf659187f06f746f->get('u-login') && $vb5eda0a74558a342cf659187f06f746f->get('u-password')) {try {$this->auth->loginByEnvironment();return $this->auth->isAuthorized();}catch (\Exception $v42552b1f133f9f8eb406d4f306ea9fd1) {}}return false;}private function getRemainingTime($v3057015159aecbff5d44c510e27ba0d4) {$v1fb1b678505a617b0bc42e5a97cd88f8 = '-1';switch (true) {case ($this->session->isActiveTimeExpired() === false) : {$v336a901dbd6c44ecead0c00e2e245e86 = $this->session->getActiveTime();break;}case ($v3057015159aecbff5d44c510e27ba0d4) : {$v336a901dbd6c44ecead0c00e2e245e86 = $this->session->getMaxActiveTime() * $this->session::SECONDS_IN_ONE_MINUTE;break;}default : {$this->session->clear();$v336a901dbd6c44ecead0c00e2e245e86 = $v1fb1b678505a617b0bc42e5a97cd88f8;}}return $v336a901dbd6c44ecead0c00e2e245e86;}}