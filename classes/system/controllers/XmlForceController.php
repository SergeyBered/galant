<?php
 namespace UmiCms\Classes\System\Controllers;use \iConfiguration as iConfig;use UmiCms\Classes\System\MiddleWares;use UmiCms\Classes\System\Translators\iFacade as iTranslator;class XmlForceController extends AbstractController implements iXmlForceController {use MiddleWares\tAuth;use MiddleWares\tUmiManager;use MiddleWares\tStub;use MiddleWares\tUmapRouter;use MiddleWares\tMirrorHandler;use MiddleWares\tModuleRouter;protected $config;protected $translator;public function setConfig(iConfig $v2245023265ae4cf87d02c8b6ba991139) {$this->config = $v2245023265ae4cf87d02c8b6ba991139;return $this;}public function setTranslator(iTranslator $v607f2f3099f2a347b327caa70e0be4b2) {$this->translator = $v607f2f3099f2a347b327caa70e0be4b2;return $this;}public function execute() {parent::execute();if (!$this->isEnabled()) {$this->moduleRouter->setNotFoundState();$v568e4df6b72662047d3c5db25163f9ad = !$this->config->get('debug', 'callstack.disabled');$result = $this->executeModuleRequest($v568e4df6b72662047d3c5db25163f9ad);if ($this->request->isStreamCallStack()) {$this->response->printXmlAsString($result);}$this->response->printHtml($result, '404 Not Found');}$this->loginByEnvironment();$this->validateUmiManagerRequest();$this->showStubPageIfRequired();$this->executeUmap();$this->analyzeModuleRequest();$this->handleRequestFromMirror();$this->handleRequest();}protected function isEnabled() {return $this->request->isAdmin() || (bool) $this->config->get('router', 'xmlForce.enabled');}protected function handleRequestFromMirror() {$v15d61712450a686a7f365adf4fef581f = (int) $this->config->get('seo', 'primary-domain-redirect');$this->checkMirror($v15d61712450a686a7f365adf4fef581f);}protected function handleRequest() {\def_module::isXSLTResultMode(true);$v6d9fecd2868e8a635b6d088c3e8068c2 = $this->moduleRouter->getGlobalVariables();$v0f635d0e0f3874fff8b581c132e6c7a7 = $this->translator->translateToXml($v6d9fecd2868e8a635b6d088c3e8068c2);$this->buffer->contentType('text/xml');$this->buffer->push($v0f635d0e0f3874fff8b581c132e6c7a7);$this->buffer->option('generation-time', true);$this->buffer->end();}}