<?php
 namespace UmiCms\Classes\System\PageNum\Agent;use UmiCms\System\Utils\iUrl;use \iConfiguration as iConfig;use UmiCms\System\Utils\Url\iFactory as iUrlFactory;class Common implements iCommon {protected $config;protected $urlFactory;protected $parameterKey;public function __construct(iConfig $v2245023265ae4cf87d02c8b6ba991139, iUrlFactory $v44febe2beadd1d4b691811c127575d70) {$this->config = $v2245023265ae4cf87d02c8b6ba991139;$this->urlFactory = $v44febe2beadd1d4b691811c127575d70;$this->defineParameterKey();}public function resolve(string $v572d4e421e5e6b9bc11d815e8a027112) : int {$v3bfc3e29cbe503271e73702fc7b2a1f1 = $this->urlFactory->create($v572d4e421e5e6b9bc11d815e8a027112);$vb1bc248a7ff2b2e95569f56de68615df = $this->getPageNumber($v3bfc3e29cbe503271e73702fc7b2a1f1);return $this->normalisePageNumber($vb1bc248a7ff2b2e95569f56de68615df);}public function issetPageNumber(string $v572d4e421e5e6b9bc11d815e8a027112) : bool {$v3bfc3e29cbe503271e73702fc7b2a1f1 = $this->urlFactory->create($v572d4e421e5e6b9bc11d815e8a027112);$v1b1cc7f086b3f074da452bc3129981eb = $v3bfc3e29cbe503271e73702fc7b2a1f1->getQueryAsList();return array_key_exists($this->parameterKey, $v1b1cc7f086b3f074da452bc3129981eb);}public function cleanUrl(string $v572d4e421e5e6b9bc11d815e8a027112) : string {$v3bfc3e29cbe503271e73702fc7b2a1f1 = $this->urlFactory->create($v572d4e421e5e6b9bc11d815e8a027112);$v1b1cc7f086b3f074da452bc3129981eb = $v3bfc3e29cbe503271e73702fc7b2a1f1->getQueryAsList();if (array_key_exists($this->parameterKey, $v1b1cc7f086b3f074da452bc3129981eb)) {unset($v1b1cc7f086b3f074da452bc3129981eb[$this->parameterKey]);}$v3bfc3e29cbe503271e73702fc7b2a1f1->setQueryAsList($v1b1cc7f086b3f074da452bc3129981eb);return $v3bfc3e29cbe503271e73702fc7b2a1f1->__toString();}public function generateUri(string $v572d4e421e5e6b9bc11d815e8a027112, int $vb1bc248a7ff2b2e95569f56de68615df) : string {$v572d4e421e5e6b9bc11d815e8a027112 = $this->cleanUrl($v572d4e421e5e6b9bc11d815e8a027112);$v3bfc3e29cbe503271e73702fc7b2a1f1 = $this->urlFactory->create($v572d4e421e5e6b9bc11d815e8a027112);$v1b1cc7f086b3f074da452bc3129981eb = $v3bfc3e29cbe503271e73702fc7b2a1f1->getQueryAsList();$v1b1cc7f086b3f074da452bc3129981eb[$this->parameterKey] = $vb1bc248a7ff2b2e95569f56de68615df;$v3bfc3e29cbe503271e73702fc7b2a1f1->setQueryAsList($v1b1cc7f086b3f074da452bc3129981eb);return $v3bfc3e29cbe503271e73702fc7b2a1f1->__toString();}protected function getPageNumber(iUrl $v572d4e421e5e6b9bc11d815e8a027112) : int {$v1b1cc7f086b3f074da452bc3129981eb = $v572d4e421e5e6b9bc11d815e8a027112->getQueryAsList();return isset($v1b1cc7f086b3f074da452bc3129981eb[$this->parameterKey]) ? (int) $v1b1cc7f086b3f074da452bc3129981eb[$this->parameterKey] : 0;}protected function normalisePageNumber(int $vb1bc248a7ff2b2e95569f56de68615df) : int {return ($vb1bc248a7ff2b2e95569f56de68615df < 0) ? 0 : $vb1bc248a7ff2b2e95569f56de68615df;}protected function defineParameterKey() : void {$v3c6e0b8a9c15224a8228b9a98ca1531d = (string) $this->config->get('page-navigation', 'parameter-key') ?: self::DEFAULT_KEY;$this->parameterKey = $v3c6e0b8a9c15224a8228b9a98ca1531d;}}