<?php
 namespace UmiCms\Classes\System\Utils\Stub;use \iConfiguration as iConfig;use UmiCms\Classes\System\Utils\Stub\Settings\iSettings;use UmiCms\Classes\System\Utils\Stub\Settings\iFactory as iSettingFactory;use UmiCms\Classes\System\Utils\DOM\Document\iFactory as iDomDocumentFactory;class Content implements iContent {private $config;private $settingsFactory;private $domDocumentFactory;public function __construct(iConfig $v2245023265ae4cf87d02c8b6ba991139, iSettingFactory $v02a9df299a9e4e5b9f2723ea5b941e35, iDomDocumentFactory $vfc9e2d0d5c0256454b185d0788b6ca5a) {$this->config = $v2245023265ae4cf87d02c8b6ba991139;$this->settingsFactory = $v02a9df299a9e4e5b9f2723ea5b941e35;$this->domDocumentFactory = $vfc9e2d0d5c0256454b185d0788b6ca5a;}public function getCustom() {$v2e5d8aa3dfa8ef34ca5131d20f9dad51 = $this->settingsFactory->createCustom();return $this->get($v2e5d8aa3dfa8ef34ca5131d20f9dad51);}public function getDefault() {$v2e5d8aa3dfa8ef34ca5131d20f9dad51 = $this->settingsFactory->createCommon();return $this->get($v2e5d8aa3dfa8ef34ca5131d20f9dad51);}private function get(iSettings $v2e5d8aa3dfa8ef34ca5131d20f9dad51) {$v47826cacc65c665212b821e6ff80b9b0 = $v2e5d8aa3dfa8ef34ca5131d20f9dad51->getStubFilePath();$v9a0364b9e99bb480dd25e1f0284c8555 = is_file($v47826cacc65c665212b821e6ff80b9b0) ? file_get_contents($v47826cacc65c665212b821e6ff80b9b0) : false;if ($v9a0364b9e99bb480dd25e1f0284c8555) {$vb172c44bafc948d3bbcf0884abf55d58 = (bool) $this->config->get('stub', 'show-modal-window');$v9a0364b9e99bb480dd25e1f0284c8555 = $vb172c44bafc948d3bbcf0884abf55d58 ? $this->addAlertForm($v9a0364b9e99bb480dd25e1f0284c8555) : $v9a0364b9e99bb480dd25e1f0284c8555;}else {$v9a0364b9e99bb480dd25e1f0284c8555 = $this->getFailBack();}return $v9a0364b9e99bb480dd25e1f0284c8555;}private function getFailBack() {$v0a1aa93a2e994cce7eff84d11d2478a5 = $this->config->includeParam('system.stub');if (!is_file($v0a1aa93a2e994cce7eff84d11d2478a5)) {throw new \coreException("Stub file $v0a1aa93a2e994cce7eff84d11d2478a5 not found");}return file_get_contents($v0a1aa93a2e994cce7eff84d11d2478a5);}private function addAlertForm($v9a0364b9e99bb480dd25e1f0284c8555) {$vfdc3bdefb79cec8eb8211d2499e04704 = $this->domDocumentFactory->create();libxml_use_internal_errors(true);$vfdc3bdefb79cec8eb8211d2499e04704->loadHTML('<?xml encoding="utf-8" ?>' . $v9a0364b9e99bb480dd25e1f0284c8555);$v96e89a298e0a9f469b9ae458d6afae9f = $vfdc3bdefb79cec8eb8211d2499e04704->getElementsByTagName('head');if ($v96e89a298e0a9f469b9ae458d6afae9f->length === 0) {$v96e89a298e0a9f469b9ae458d6afae9f = $vfdc3bdefb79cec8eb8211d2499e04704->createElement('head', '');$vfdc3bdefb79cec8eb8211d2499e04704->getElementsByTagName('html')     ->item(0)     ->appendChild($v96e89a298e0a9f469b9ae458d6afae9f);$v96e89a298e0a9f469b9ae458d6afae9f = $vfdc3bdefb79cec8eb8211d2499e04704->getElementsByTagName('head');}foreach ($this->getScriptList() as $v3205c0ded576131ea255ad2bd38b0fb2) {$v8e2dcfd7e7e24b1ca76c1193f645902b = $vfdc3bdefb79cec8eb8211d2499e04704->createElement('script', '');$v8e2dcfd7e7e24b1ca76c1193f645902b->setAttribute('src' , $v3205c0ded576131ea255ad2bd38b0fb2);$v96e89a298e0a9f469b9ae458d6afae9f->item(0)     ->appendChild($v8e2dcfd7e7e24b1ca76c1193f645902b);}$va1b01e734b573fca08eb1a65e6df9a38 = $vfdc3bdefb79cec8eb8211d2499e04704->createElement('link', '');$va1b01e734b573fca08eb1a65e6df9a38->setAttribute('href', $this->getAlertCss());$va1b01e734b573fca08eb1a65e6df9a38->setAttribute('rel','stylesheet');$vfdc3bdefb79cec8eb8211d2499e04704->getElementsByTagName('body')    ->item(0)    ->appendChild($va1b01e734b573fca08eb1a65e6df9a38);return $vfdc3bdefb79cec8eb8211d2499e04704->saveHTML();}private function getScriptList() {return [    '/styles/common/js/node_modules/jquery/dist/jquery.js',    '/styles/common/js/jquery/jquery-migrate.js',    '/ulang/common.js',    '/styles/skins/modern/design/js/dataView/underscore-min.js',    '/errors/stub.js'   ];}private function getAlertCss() {return $this->config->get('stub', 'modal-window-css');}}